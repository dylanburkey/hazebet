exports.id=7069,exports.ids=[7069],exports.modules={50535:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;let d=c(53412),_=c(99912),w=c(60318);function gf(t){let i=new Float64Array(16);if(t)for(let c=0;c<t.length;c++)i[c]=t[c];return i}i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;let S=new Uint8Array(32);S[0]=9;let P=gf(),R=gf([1]),C=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),T=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),q=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function set25519(t,i){for(let c=0;c<16;c++)t[c]=0|i[c]}function car25519(t){let i=1;for(let c=0;c<16;c++){let d=t[c]+i+65535;i=Math.floor(d/65536),t[c]=d-65536*i}t[0]+=i-1+37*(i-1)}function sel25519(t,i,c){let d=~(c-1);for(let c=0;c<16;c++){let _=d&(t[c]^i[c]);t[c]^=_,i[c]^=_}}function pack25519(t,i){let c=gf(),d=gf();for(let t=0;t<16;t++)d[t]=i[t];car25519(d),car25519(d),car25519(d);for(let t=0;t<2;t++){c[0]=d[0]-65517;for(let t=1;t<15;t++)c[t]=d[t]-65535-(c[t-1]>>16&1),c[t-1]&=65535;c[15]=d[15]-32767-(c[14]>>16&1);let t=c[15]>>16&1;c[14]&=65535,sel25519(d,c,1-t)}for(let i=0;i<16;i++)t[2*i]=255&d[i],t[2*i+1]=d[i]>>8}function verify32(t,i){let c=0;for(let d=0;d<32;d++)c|=t[d]^i[d];return(1&c-1>>>8)-1}function neq25519(t,i){let c=new Uint8Array(32),d=new Uint8Array(32);return pack25519(c,t),pack25519(d,i),verify32(c,d)}function par25519(t){let i=new Uint8Array(32);return pack25519(i,t),1&i[0]}function add(t,i,c){for(let d=0;d<16;d++)t[d]=i[d]+c[d]}function sub(t,i,c){for(let d=0;d<16;d++)t[d]=i[d]-c[d]}function mul(t,i,c){let d,_,w=0,S=0,P=0,R=0,C=0,T=0,A=0,$=0,q=0,U=0,B=0,F=0,J=0,X=0,ee=0,et=0,es=0,eo=0,ec=0,el=0,eh=0,ef=0,ep=0,ed=0,eg=0,ey=0,em=0,e_=0,eb=0,ew=0,eE=0,eS=c[0],eI=c[1],eO=c[2],eP=c[3],ex=c[4],eR=c[5],eC=c[6],eT=c[7],eN=c[8],ek=c[9],eA=c[10],eL=c[11],ej=c[12],eD=c[13],eM=c[14],e$=c[15];w+=(d=i[0])*eS,S+=d*eI,P+=d*eO,R+=d*eP,C+=d*ex,T+=d*eR,A+=d*eC,$+=d*eT,q+=d*eN,U+=d*ek,B+=d*eA,F+=d*eL,J+=d*ej,X+=d*eD,ee+=d*eM,et+=d*e$,S+=(d=i[1])*eS,P+=d*eI,R+=d*eO,C+=d*eP,T+=d*ex,A+=d*eR,$+=d*eC,q+=d*eT,U+=d*eN,B+=d*ek,F+=d*eA,J+=d*eL,X+=d*ej,ee+=d*eD,et+=d*eM,es+=d*e$,P+=(d=i[2])*eS,R+=d*eI,C+=d*eO,T+=d*eP,A+=d*ex,$+=d*eR,q+=d*eC,U+=d*eT,B+=d*eN,F+=d*ek,J+=d*eA,X+=d*eL,ee+=d*ej,et+=d*eD,es+=d*eM,eo+=d*e$,R+=(d=i[3])*eS,C+=d*eI,T+=d*eO,A+=d*eP,$+=d*ex,q+=d*eR,U+=d*eC,B+=d*eT,F+=d*eN,J+=d*ek,X+=d*eA,ee+=d*eL,et+=d*ej,es+=d*eD,eo+=d*eM,ec+=d*e$,C+=(d=i[4])*eS,T+=d*eI,A+=d*eO,$+=d*eP,q+=d*ex,U+=d*eR,B+=d*eC,F+=d*eT,J+=d*eN,X+=d*ek,ee+=d*eA,et+=d*eL,es+=d*ej,eo+=d*eD,ec+=d*eM,el+=d*e$,T+=(d=i[5])*eS,A+=d*eI,$+=d*eO,q+=d*eP,U+=d*ex,B+=d*eR,F+=d*eC,J+=d*eT,X+=d*eN,ee+=d*ek,et+=d*eA,es+=d*eL,eo+=d*ej,ec+=d*eD,el+=d*eM,eh+=d*e$,A+=(d=i[6])*eS,$+=d*eI,q+=d*eO,U+=d*eP,B+=d*ex,F+=d*eR,J+=d*eC,X+=d*eT,ee+=d*eN,et+=d*ek,es+=d*eA,eo+=d*eL,ec+=d*ej,el+=d*eD,eh+=d*eM,ef+=d*e$,$+=(d=i[7])*eS,q+=d*eI,U+=d*eO,B+=d*eP,F+=d*ex,J+=d*eR,X+=d*eC,ee+=d*eT,et+=d*eN,es+=d*ek,eo+=d*eA,ec+=d*eL,el+=d*ej,eh+=d*eD,ef+=d*eM,ep+=d*e$,q+=(d=i[8])*eS,U+=d*eI,B+=d*eO,F+=d*eP,J+=d*ex,X+=d*eR,ee+=d*eC,et+=d*eT,es+=d*eN,eo+=d*ek,ec+=d*eA,el+=d*eL,eh+=d*ej,ef+=d*eD,ep+=d*eM,ed+=d*e$,U+=(d=i[9])*eS,B+=d*eI,F+=d*eO,J+=d*eP,X+=d*ex,ee+=d*eR,et+=d*eC,es+=d*eT,eo+=d*eN,ec+=d*ek,el+=d*eA,eh+=d*eL,ef+=d*ej,ep+=d*eD,ed+=d*eM,eg+=d*e$,B+=(d=i[10])*eS,F+=d*eI,J+=d*eO,X+=d*eP,ee+=d*ex,et+=d*eR,es+=d*eC,eo+=d*eT,ec+=d*eN,el+=d*ek,eh+=d*eA,ef+=d*eL,ep+=d*ej,ed+=d*eD,eg+=d*eM,ey+=d*e$,F+=(d=i[11])*eS,J+=d*eI,X+=d*eO,ee+=d*eP,et+=d*ex,es+=d*eR,eo+=d*eC,ec+=d*eT,el+=d*eN,eh+=d*ek,ef+=d*eA,ep+=d*eL,ed+=d*ej,eg+=d*eD,ey+=d*eM,em+=d*e$,J+=(d=i[12])*eS,X+=d*eI,ee+=d*eO,et+=d*eP,es+=d*ex,eo+=d*eR,ec+=d*eC,el+=d*eT,eh+=d*eN,ef+=d*ek,ep+=d*eA,ed+=d*eL,eg+=d*ej,ey+=d*eD,em+=d*eM,e_+=d*e$,X+=(d=i[13])*eS,ee+=d*eI,et+=d*eO,es+=d*eP,eo+=d*ex,ec+=d*eR,el+=d*eC,eh+=d*eT,ef+=d*eN,ep+=d*ek,ed+=d*eA,eg+=d*eL,ey+=d*ej,em+=d*eD,e_+=d*eM,eb+=d*e$,ee+=(d=i[14])*eS,et+=d*eI,es+=d*eO,eo+=d*eP,ec+=d*ex,el+=d*eR,eh+=d*eC,ef+=d*eT,ep+=d*eN,ed+=d*ek,eg+=d*eA,ey+=d*eL,em+=d*ej,e_+=d*eD,eb+=d*eM,ew+=d*e$,et+=(d=i[15])*eS,es+=d*eI,eo+=d*eO,ec+=d*eP,el+=d*ex,eh+=d*eR,ef+=d*eC,ep+=d*eT,ed+=d*eN,eg+=d*ek,ey+=d*eA,em+=d*eL,e_+=d*ej,eb+=d*eD,ew+=d*eM,eE+=d*e$,w+=38*es,S+=38*eo,P+=38*ec,R+=38*el,C+=38*eh,T+=38*ef,A+=38*ep,$+=38*ed,q+=38*eg,U+=38*ey,B+=38*em,F+=38*e_,J+=38*eb,X+=38*ew,ee+=38*eE,_=Math.floor((d=w+(_=1)+65535)/65536),w=d-65536*_,_=Math.floor((d=S+_+65535)/65536),S=d-65536*_,_=Math.floor((d=P+_+65535)/65536),P=d-65536*_,_=Math.floor((d=R+_+65535)/65536),R=d-65536*_,_=Math.floor((d=C+_+65535)/65536),C=d-65536*_,_=Math.floor((d=T+_+65535)/65536),T=d-65536*_,_=Math.floor((d=A+_+65535)/65536),A=d-65536*_,_=Math.floor((d=$+_+65535)/65536),$=d-65536*_,_=Math.floor((d=q+_+65535)/65536),q=d-65536*_,_=Math.floor((d=U+_+65535)/65536),U=d-65536*_,_=Math.floor((d=B+_+65535)/65536),B=d-65536*_,_=Math.floor((d=F+_+65535)/65536),F=d-65536*_,_=Math.floor((d=J+_+65535)/65536),J=d-65536*_,_=Math.floor((d=X+_+65535)/65536),X=d-65536*_,_=Math.floor((d=ee+_+65535)/65536),ee=d-65536*_,_=Math.floor((d=et+_+65535)/65536),et=d-65536*_,w+=_-1+37*(_-1),_=Math.floor((d=w+(_=1)+65535)/65536),w=d-65536*_,_=Math.floor((d=S+_+65535)/65536),S=d-65536*_,_=Math.floor((d=P+_+65535)/65536),P=d-65536*_,_=Math.floor((d=R+_+65535)/65536),R=d-65536*_,_=Math.floor((d=C+_+65535)/65536),C=d-65536*_,_=Math.floor((d=T+_+65535)/65536),T=d-65536*_,_=Math.floor((d=A+_+65535)/65536),A=d-65536*_,_=Math.floor((d=$+_+65535)/65536),$=d-65536*_,_=Math.floor((d=q+_+65535)/65536),q=d-65536*_,_=Math.floor((d=U+_+65535)/65536),U=d-65536*_,_=Math.floor((d=B+_+65535)/65536),B=d-65536*_,_=Math.floor((d=F+_+65535)/65536),F=d-65536*_,_=Math.floor((d=J+_+65535)/65536),J=d-65536*_,_=Math.floor((d=X+_+65535)/65536),X=d-65536*_,_=Math.floor((d=ee+_+65535)/65536),ee=d-65536*_,_=Math.floor((d=et+_+65535)/65536),et=d-65536*_,w+=_-1+37*(_-1),t[0]=w,t[1]=S,t[2]=P,t[3]=R,t[4]=C,t[5]=T,t[6]=A,t[7]=$,t[8]=q,t[9]=U,t[10]=B,t[11]=F,t[12]=J,t[13]=X,t[14]=ee,t[15]=et}function inv25519(t,i){let c;let d=gf();for(c=0;c<16;c++)d[c]=i[c];for(c=253;c>=0;c--)mul(d,d,d),2!==c&&4!==c&&mul(d,d,i);for(c=0;c<16;c++)t[c]=d[c]}function edadd(t,i){let c=gf(),d=gf(),_=gf(),w=gf(),S=gf(),P=gf(),R=gf(),C=gf(),A=gf();sub(c,t[1],t[0]),sub(A,i[1],i[0]),mul(c,c,A),add(d,t[0],t[1]),add(A,i[0],i[1]),mul(d,d,A),mul(_,t[3],i[3]),mul(_,_,T),mul(w,t[2],i[2]),add(w,w,w),sub(S,d,c),sub(P,w,_),add(R,w,_),add(C,d,c),mul(t[0],S,P),mul(t[1],C,R),mul(t[2],R,P),mul(t[3],S,C)}function cswap(t,i,c){for(let d=0;d<4;d++)sel25519(t[d],i[d],c)}function pack(t,i){let c=gf(),d=gf(),_=gf();inv25519(_,i[2]),mul(c,i[0],_),mul(d,i[1],_),pack25519(t,d),t[31]^=par25519(c)<<7}function scalarmult(t,i,c){set25519(t[0],P),set25519(t[1],R),set25519(t[2],R),set25519(t[3],P);for(let d=255;d>=0;--d){let _=c[d/8|0]>>(7&d)&1;cswap(t,i,_),edadd(i,t),edadd(t,t),cswap(t,i,_)}}function scalarbase(t,i){let c=[gf(),gf(),gf(),gf()];set25519(c[0],A),set25519(c[1],$),set25519(c[2],R),mul(c[3],A,$),scalarmult(t,c,i)}function generateKeyPairFromSeed(t){if(t.length!==i.SEED_LENGTH)throw Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);let c=(0,_.hash)(t);c[0]&=248,c[31]&=127,c[31]|=64;let d=new Uint8Array(32),w=[gf(),gf(),gf(),gf()];scalarbase(w,c),pack(d,w);let S=new Uint8Array(64);return S.set(t),S.set(d,32),{publicKey:d,secretKey:S}}i.generateKeyPairFromSeed=generateKeyPairFromSeed,i.generateKeyPair=function(t){let i=(0,d.randomBytes)(32,t),c=generateKeyPairFromSeed(i);return(0,w.wipe)(i),c},i.extractPublicKeyFromSecretKey=function(t){if(t.length!==i.SECRET_KEY_LENGTH)throw Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))};let U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(t,i){let c,d,_,w;for(d=63;d>=32;--d){for(c=0,_=d-32,w=d-12;_<w;++_)i[_]+=c-16*i[d]*U[_-(d-32)],c=Math.floor((i[_]+128)/256),i[_]-=256*c;i[_]+=c,i[d]=0}for(_=0,c=0;_<32;_++)i[_]+=c-(i[31]>>4)*U[_],c=i[_]>>8,i[_]&=255;for(_=0;_<32;_++)i[_]-=c*U[_];for(d=0;d<32;d++)i[d+1]+=i[d]>>8,t[d]=255&i[d]}function reduce(t){let i=new Float64Array(64);for(let c=0;c<64;c++)i[c]=t[c];for(let i=0;i<64;i++)t[i]=0;modL(t,i)}function unpackneg(t,i){var c,d,_;let w=gf(),S=gf(),T=gf(),A=gf(),$=gf(),U=gf(),B=gf();return(set25519(t[2],R),function(t,i){for(let c=0;c<16;c++)t[c]=i[2*c]+(i[2*c+1]<<8);t[15]&=32767}(t[1],i),mul(T,c=t[1],c),mul(A,T,C),sub(T,T,t[2]),add(A,t[2],A),mul($,A,A),mul(U,$,$),mul(B,U,$),mul(w,B,T),mul(w,w,A),function(t,i){let c;let d=gf();for(c=0;c<16;c++)d[c]=i[c];for(c=250;c>=0;c--)mul(d,d,d),1!==c&&mul(d,d,i);for(c=0;c<16;c++)t[c]=d[c]}(w,w),mul(w,w,T),mul(w,w,A),mul(w,w,A),mul(t[0],w,A),mul(S,d=t[0],d),mul(S,S,A),neq25519(S,T)&&mul(t[0],t[0],q),mul(S,_=t[0],_),mul(S,S,A),neq25519(S,T))?-1:(par25519(t[0])===i[31]>>7&&sub(t[0],P,t[0]),mul(t[3],t[0],t[1]),0)}i.sign=function(t,i){let c=new Float64Array(64),d=[gf(),gf(),gf(),gf()],w=(0,_.hash)(t.subarray(0,32));w[0]&=248,w[31]&=127,w[31]|=64;let S=new Uint8Array(64);S.set(w.subarray(32),32);let P=new _.SHA512;P.update(S.subarray(32)),P.update(i);let R=P.digest();P.clean(),reduce(R),scalarbase(d,R),pack(S,d),P.reset(),P.update(S.subarray(0,32)),P.update(t.subarray(32)),P.update(i);let C=P.digest();reduce(C);for(let t=0;t<32;t++)c[t]=R[t];for(let t=0;t<32;t++)for(let i=0;i<32;i++)c[t+i]+=C[t]*w[i];return modL(S.subarray(32),c),S},i.verify=function(t,c,d){let w=new Uint8Array(32),S=[gf(),gf(),gf(),gf()],P=[gf(),gf(),gf(),gf()];if(d.length!==i.SIGNATURE_LENGTH)throw Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(unpackneg(P,t))return!1;let R=new _.SHA512;R.update(d.subarray(0,32)),R.update(t),R.update(c);let C=R.digest();return reduce(C),scalarmult(S,P,C),scalarbase(P,d.subarray(32)),edadd(S,P),pack(w,S),!verify32(d,w)},i.convertPublicKeyToX25519=function(t){let i=[gf(),gf(),gf(),gf()];if(unpackneg(i,t))throw Error("Ed25519: invalid public key");let c=gf(),d=gf(),_=i[1];add(c,R,_),sub(d,R,_),inv25519(d,d),mul(c,c,d);let w=new Uint8Array(32);return pack25519(w,c),w},i.convertSecretKeyToX25519=function(t){let i=(0,_.hash)(t.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;let c=new Uint8Array(i.subarray(0,32));return(0,w.wipe)(i),c}},99912:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=c(87492),_=c(60318);i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var w=function(){function SHA512(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){_.wipe(this._buffer),_.wipe(this._tempHi),_.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(t,c){if(void 0===c&&(c=t.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=t[d++],c--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(d=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,d,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=t[d++],c--;return this},SHA512.prototype.finish=function(t){if(!this._finished){var i=this._bytesHashed,c=this._bufferLength,_=i%128<112?128:256;this._buffer[c]=128;for(var w=c+1;w<_-8;w++)this._buffer[w]=0;d.writeUint32BE(i/536870912|0,this._buffer,_-8),d.writeUint32BE(i<<3,this._buffer,_-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,_),this._finished=!0}for(var w=0;w<this.digestLength/8;w++)d.writeUint32BE(this._stateHi[w],t,8*w),d.writeUint32BE(this._stateLo[w],t,8*w+4);return this},SHA512.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(t){_.wipe(t.stateHi),_.wipe(t.stateLo),t.buffer&&_.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},SHA512}();i.SHA512=w;var S=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(t,i,c,_,w,P,R){for(var C,T,A,$,q,U,B,F,J=c[0],X=c[1],ee=c[2],et=c[3],es=c[4],eo=c[5],ec=c[6],el=c[7],eh=_[0],ef=_[1],ep=_[2],ed=_[3],eg=_[4],ey=_[5],em=_[6],e_=_[7];R>=128;){for(var eb=0;eb<16;eb++){var ew=8*eb+P;t[eb]=d.readUint32BE(w,ew),i[eb]=d.readUint32BE(w,ew+4)}for(var eb=0;eb<80;eb++){var eE=J,eS=X,eI=ee,eO=et,eP=es,ex=eo,eR=ec,eC=el,eT=eh,eN=ef,ek=ep,eA=ed,eL=eg,ej=ey,eD=em,eM=e_;if(C=el,q=65535&(T=e_),U=T>>>16,B=65535&C,F=C>>>16,C=(es>>>14|eg<<18)^(es>>>18|eg<<14)^(eg>>>9|es<<23),q+=65535&(T=(eg>>>14|es<<18)^(eg>>>18|es<<14)^(es>>>9|eg<<23)),U+=T>>>16,B+=65535&C,F+=C>>>16,C=es&eo^~es&ec,q+=65535&(T=eg&ey^~eg&em),U+=T>>>16,B+=65535&C,F+=C>>>16,C=S[2*eb],q+=65535&(T=S[2*eb+1]),U+=T>>>16,B+=65535&C,F+=C>>>16,C=t[eb%16],q+=65535&(T=i[eb%16]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,A=65535&B|F<<16,$=65535&q|U<<16,C=A,q=65535&(T=$),U=T>>>16,B=65535&C,F=C>>>16,C=(J>>>28|eh<<4)^(eh>>>2|J<<30)^(eh>>>7|J<<25),q+=65535&(T=(eh>>>28|J<<4)^(J>>>2|eh<<30)^(J>>>7|eh<<25)),U+=T>>>16,B+=65535&C,F+=C>>>16,C=J&X^J&ee^X&ee,q+=65535&(T=eh&ef^eh&ep^ef&ep),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,eC=65535&B|F<<16,eM=65535&q|U<<16,C=eO,q=65535&(T=eA),U=T>>>16,B=65535&C,F=C>>>16,C=A,q+=65535&(T=$),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,eO=65535&B|F<<16,eA=65535&q|U<<16,X=eE,ee=eS,et=eI,es=eO,eo=eP,ec=ex,el=eR,J=eC,ef=eT,ep=eN,ed=ek,eg=eA,ey=eL,em=ej,e_=eD,eh=eM,eb%16==15)for(var ew=0;ew<16;ew++)C=t[ew],q=65535&(T=i[ew]),U=T>>>16,B=65535&C,F=C>>>16,C=t[(ew+9)%16],q+=65535&(T=i[(ew+9)%16]),U+=T>>>16,B+=65535&C,F+=C>>>16,C=((A=t[(ew+1)%16])>>>1|($=i[(ew+1)%16])<<31)^(A>>>8|$<<24)^A>>>7,q+=65535&(T=($>>>1|A<<31)^($>>>8|A<<24)^($>>>7|A<<25)),U+=T>>>16,B+=65535&C,F+=C>>>16,C=((A=t[(ew+14)%16])>>>19|($=i[(ew+14)%16])<<13)^($>>>29|A<<3)^A>>>6,q+=65535&(T=($>>>19|A<<13)^(A>>>29|$<<3)^($>>>6|A<<26)),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,t[ew]=65535&B|F<<16,i[ew]=65535&q|U<<16}C=J,q=65535&(T=eh),U=T>>>16,B=65535&C,F=C>>>16,C=c[0],q+=65535&(T=_[0]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[0]=J=65535&B|F<<16,_[0]=eh=65535&q|U<<16,C=X,q=65535&(T=ef),U=T>>>16,B=65535&C,F=C>>>16,C=c[1],q+=65535&(T=_[1]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[1]=X=65535&B|F<<16,_[1]=ef=65535&q|U<<16,C=ee,q=65535&(T=ep),U=T>>>16,B=65535&C,F=C>>>16,C=c[2],q+=65535&(T=_[2]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[2]=ee=65535&B|F<<16,_[2]=ep=65535&q|U<<16,C=et,q=65535&(T=ed),U=T>>>16,B=65535&C,F=C>>>16,C=c[3],q+=65535&(T=_[3]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[3]=et=65535&B|F<<16,_[3]=ed=65535&q|U<<16,C=es,q=65535&(T=eg),U=T>>>16,B=65535&C,F=C>>>16,C=c[4],q+=65535&(T=_[4]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[4]=es=65535&B|F<<16,_[4]=eg=65535&q|U<<16,C=eo,q=65535&(T=ey),U=T>>>16,B=65535&C,F=C>>>16,C=c[5],q+=65535&(T=_[5]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[5]=eo=65535&B|F<<16,_[5]=ey=65535&q|U<<16,C=ec,q=65535&(T=em),U=T>>>16,B=65535&C,F=C>>>16,C=c[6],q+=65535&(T=_[6]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[6]=ec=65535&B|F<<16,_[6]=em=65535&q|U<<16,C=el,q=65535&(T=e_),U=T>>>16,B=65535&C,F=C>>>16,C=c[7],q+=65535&(T=_[7]),U+=T>>>16,B+=65535&C,F+=C>>>16,U+=q>>>16,B+=U>>>16,F+=B>>>16,c[7]=el=65535&B|F<<16,_[7]=e_=65535&q|U<<16,P+=128,R-=128}return P}i.hash=function(t){var i=new w;i.update(t);var c=i.digest();return i.clean(),c}},78771:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=c(82361),_=c(7752),w=c(906),S=c(3491),P=c(49454),R=c(51738),C=c(55336),T=c(40491),A=c(12447),$=c(26438),q=c(32207),U=c(25815),B=c(51393),F=c(510),J=c(73793);function V(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var X=V(d),ee=V(_),et=function(t){if(t&&t.__esModule)return t;var i=Object.create(null);return t&&Object.keys(t).forEach(function(c){if("default"!==c){var d=Object.getOwnPropertyDescriptor(t,c);Object.defineProperty(i,c,d.get?d:{enumerable:!0,get:function(){return t[c]}})}}),i.default=t,Object.freeze(i)}(C),es=V(B),eo=V(F),ec=V(J),Mt=function(t,i){if(t.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),d=0;d<c.length;d++)c[d]=255;for(var _=0;_<t.length;_++){var w=t.charAt(_),S=w.charCodeAt(0);if(255!==c[S])throw TypeError(w+" is ambiguous");c[S]=_}var P=t.length,R=t.charAt(0),C=Math.log(P)/Math.log(256),T=Math.log(256)/Math.log(P);function b(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return new Uint8Array;var i=0;if(" "!==t[0]){for(var d=0,_=0;t[i]===R;)d++,i++;for(var w=(t.length-i)*C+1>>>0,S=new Uint8Array(w);t[i];){var T=c[t.charCodeAt(i)];if(255===T)return;for(var A=0,$=w-1;(0!==T||A<_)&&-1!==$;$--,A++)T+=P*S[$]>>>0,S[$]=T%256>>>0,T=T/256>>>0;if(0!==T)throw Error("Non-zero carry");_=A,i++}if(" "!==t[i]){for(var q=w-_;q!==w&&0===S[q];)q++;for(var U=new Uint8Array(d+(w-q)),B=d;q!==w;)U[B++]=S[q++];return U}}}return{encode:function(i){if(i instanceof Uint8Array||(ArrayBuffer.isView(i)?i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength):Array.isArray(i)&&(i=Uint8Array.from(i))),!(i instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===i.length)return"";for(var c=0,d=0,_=0,w=i.length;_!==w&&0===i[_];)_++,c++;for(var S=(w-_)*T+1>>>0,C=new Uint8Array(S);_!==w;){for(var A=i[_],$=0,q=S-1;(0!==A||$<d)&&-1!==q;q--,$++)A+=256*C[q]>>>0,C[q]=A%P>>>0,A=A/P>>>0;if(0!==A)throw Error("Non-zero carry");d=$,_++}for(var U=S-d;U!==S&&0===C[U];)U++;for(var B=R.repeat(c);U<S;++U)B+=t.charAt(C[U]);return B},decodeUnsafe:b,decode:function(t){var c=b(t);if(c)return c;throw Error(`Non-${i} character`)}}};let oe=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Unknown type, must be binary type")},$t=t=>new TextEncoder().encode(t),Bt=t=>new TextDecoder().decode(t);let Vt=class Vt{constructor(t,i,c){this.name=t,this.prefix=i,this.baseEncode=c}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}};let kt=class kt{constructor(t,i,c){if(this.name=t,this.prefix=i,void 0===i.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=c}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return he(this,t)}};let Kt=class Kt{constructor(t){this.decoders=t}or(t){return he(this,t)}decode(t){let i=t[0],c=this.decoders[i];if(c)return c.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let he=(t,i)=>new Kt({...t.decoders||{[t.prefix]:t},...i.decoders||{[i.prefix]:i}});let Yt=class Yt{constructor(t,i,c,d){this.name=t,this.prefix=i,this.baseEncode=c,this.baseDecode=d,this.encoder=new Vt(t,i,c),this.decoder=new kt(t,i,d)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};let G=({name:t,prefix:i,encode:c,decode:d})=>new Yt(t,i,c,d),k=({prefix:t,name:i,alphabet:c})=>{let{encode:d,decode:_}=Mt(c,i);return G({prefix:t,name:i,encode:d,decode:t=>oe(_(t))})},qt=(t,i,c,d)=>{let _={};for(let t=0;t<i.length;++t)_[i[t]]=t;let w=t.length;for(;"="===t[w-1];)--w;let S=new Uint8Array(w*c/8|0),P=0,R=0,C=0;for(let i=0;i<w;++i){let w=_[t[i]];if(void 0===w)throw SyntaxError(`Non-${d} character`);R=R<<c|w,(P+=c)>=8&&(P-=8,S[C++]=255&R>>P)}if(P>=c||255&R<<8-P)throw SyntaxError("Unexpected end of data");return S},jt=(t,i,c)=>{let d="="===i[i.length-1],_=(1<<c)-1,w="",S=0,P=0;for(let d=0;d<t.length;++d)for(P=P<<8|t[d],S+=8;S>c;)S-=c,w+=i[_&P>>S];if(S&&(w+=i[_&P<<c-S]),d)for(;w.length*c&7;)w+="=";return w},D=({name:t,prefix:i,bitsPerChar:c,alphabet:d})=>G({prefix:i,name:t,encode:t=>jt(t,d,c),decode:i=>qt(i,d,c,t)}),el=G({prefix:"\x00",name:"identity",encode:t=>Bt(t),decode:t=>$t(t)});var eh=Object.freeze({__proto__:null,identity:el});let ef=D({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ep=Object.freeze({__proto__:null,base2:ef});let ed=D({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eg=Object.freeze({__proto__:null,base8:ed});let ey=k({prefix:"9",name:"base10",alphabet:"0123456789"});var em=Object.freeze({__proto__:null,base10:ey});let e_=D({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eb=D({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ew=Object.freeze({__proto__:null,base16:e_,base16upper:eb});let eE=D({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eS=D({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eI=D({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eO=D({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eP=D({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ex=D({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eR=D({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eC=D({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eT=D({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eN=Object.freeze({__proto__:null,base32:eE,base32upper:eS,base32pad:eI,base32padupper:eO,base32hex:eP,base32hexupper:ex,base32hexpad:eR,base32hexpadupper:eC,base32z:eT});let ek=k({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eA=k({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var eL=Object.freeze({__proto__:null,base36:ek,base36upper:eA});let ej=k({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eD=k({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var eM=Object.freeze({__proto__:null,base58btc:ej,base58flickr:eD});let e$=D({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ez=D({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eU=D({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eH=D({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var eB=Object.freeze({__proto__:null,base64:e$,base64pad:ez,base64url:eU,base64urlpad:eH});let eW=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),eV=eW.reduce((t,i,c)=>(t[c]=i,t),[]),eK=eW.reduce((t,i,c)=>(t[i.codePointAt(0)]=c,t),[]),eG=G({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(t){return t.reduce((t,i)=>t+=eV[i],"")},decode:function(t){let i=[];for(let c of t){let t=eK[c.codePointAt(0)];if(void 0===t)throw Error(`Non-base256emoji character: ${c}`);i.push(t)}return new Uint8Array(i)}});var eF=Object.freeze({__proto__:null,base256emoji:eG});function ue(t,i,c){i=i||[],c=c||0;for(var d=c;t>=2147483648;)i[c++]=255&t|128,t/=128;for(;-128&t;)i[c++]=255&t|128,t>>>=7;return i[c]=0|t,ue.bytes=c-d+1,i}function Q(t,i){var c,d=0,i=i||0,_=0,w=i,S=t.length;do{if(w>=S)throw Q.bytes=0,RangeError("Could not decode varint");c=t[w++],d+=_<28?(127&c)<<_:(127&c)*Math.pow(2,_),_+=7}while(c>=128);return Q.bytes=w-i,d}var eJ={encode:ue,decode:Q,encodingLength:function(t){return t<128?1:t<16384?2:t<2097152?3:t<268435456?4:t<34359738368?5:t<4398046511104?6:t<562949953421312?7:t<72057594037927940?8:t<0x7fffffffffffffff?9:10}};let pe=(t,i,c=0)=>(eJ.encode(t,i,c),i),De=t=>eJ.encodingLength(t),Z=(t,i)=>{let c=i.byteLength,d=De(t),_=d+De(c),w=new Uint8Array(_+c);return pe(t,w,0),pe(c,w,d),w.set(i,_),new Hi(t,c,i,w)};let Hi=class Hi{constructor(t,i,c,d){this.code=t,this.size=i,this.digest=c,this.bytes=d}};let ye=({name:t,code:i,encode:c})=>new Xi(t,i,c);let Xi=class Xi{constructor(t,i,c){this.name=t,this.code=i,this.encode=c}digest(t){if(t instanceof Uint8Array){let i=this.encode(t);return i instanceof Uint8Array?Z(this.code,i):i.then(t=>Z(this.code,t))}throw Error("Unknown type, must be binary type")}};let Ee=t=>async i=>new Uint8Array(await crypto.subtle.digest(t,i)),eY=ye({name:"sha2-256",code:18,encode:Ee("SHA-256")}),eZ=ye({name:"sha2-512",code:19,encode:Ee("SHA-512")});var eQ=Object.freeze({__proto__:null,sha256:eY,sha512:eZ}),eX=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:oe,digest:t=>Z(0,oe(t))}});new TextEncoder,new TextDecoder;let e0={...eh,...ep,...eg,...em,...ew,...eN,...eL,...eM,...eB,...eF};function ve(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function we(t,i,c,d){return{name:t,prefix:i,encoder:{name:t,prefix:i,encode:c},decoder:{decode:d}}}({...eQ,...eX});let e1=we("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),e5=we("ascii","a",t=>{let i="a";for(let c=0;c<t.length;c++)i+=String.fromCharCode(t[c]);return i},t=>{t=t.substring(1);let i=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ve(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}(t.length);for(let c=0;c<t.length;c++)i[c]=t.charCodeAt(c);return i}),e2={utf8:e1,"utf-8":e1,hex:e0.base16,latin1:e5,ascii:e5,binary:e5,...e0},e6="core",e3=`wc@2:${e6}:`,e4={name:e6,logger:"error"},e8={database:":memory:"},e9="crypto",e7="client_ed25519_seed",te=$.ONE_DAY,tn="keychain",ts="messages",to=$.SIX_HOURS,ta="publisher",tc="error",tl="wss://relay.walletconnect.com",th="wss://relay.walletconnect.org",tf="relayer",tp={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},td="_subscription",tg={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ty=$.ONE_SECOND,tm="2.11.0",t_="WALLETCONNECT_CLIENT_ID",tb={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tw=$.THIRTY_DAYS,tE="subscription",tS=1e3*$.FIVE_SECONDS,tI="pairing",tO=$.THIRTY_DAYS,tP={wc_pairingDelete:{req:{ttl:$.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:$.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:$.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:$.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:$.ONE_DAY,prompt:!1,tag:0},res:{ttl:$.ONE_DAY,prompt:!1,tag:0}}},tx={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},tR={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},tC="history",tT="expirer",tN={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tk=$.ONE_DAY,tA="verify-api",tL="https://verify.walletconnect.com",tj="https://verify.walletconnect.org",tD=[tL,tj],tM="echo",t$="https://echo.walletconnect.com";let it=class it{constructor(t,i){this.core=t,this.logger=i,this.keychain=new Map,this.name=tn,this.version="0.3",this.initialized=!1,this.storagePrefix=e3,this.init=async()=>{if(!this.initialized){let t=await this.getKeyChain();"u">typeof t&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,i)=>{this.isInitialized(),this.keychain.set(t,i),await this.persist()},this.get=t=>{this.isInitialized();let i=this.keychain.get(t);if(typeof i>"u"){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(i)}return i},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=S.generateChildLogger(i,this.name)}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,T.mapToObj(t))}async getKeyChain(){let t=await this.core.storage.getItem(this.storageKey);return"u">typeof t?T.objToMap(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let st=class st{constructor(t,i,c){this.core=t,this.logger=i,this.name=e9,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();let t=await this.getClientSeed(),i=et.generateKeyPair(t);return et.encodeIss(i.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let t=T.generateKeyPair();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();let i=await this.getClientSeed(),c=et.generateKeyPair(i),d=T.generateRandomBytes32();return await et.signJWT(d,t,te,c)},this.generateSharedKey=(t,i,c)=>{this.isInitialized();let d=this.getPrivateKey(t),_=T.deriveSymKey(d,i);return this.setSymKey(_,c)},this.setSymKey=async(t,i)=>{this.isInitialized();let c=i||T.hashKey(t);return await this.keychain.set(c,t),c},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,i,c)=>{this.isInitialized();let d=T.validateEncoding(c),_=R.safeJsonStringify(i);if(T.isTypeOneEnvelope(d)){let i=d.senderPublicKey,c=d.receiverPublicKey;t=await this.generateSharedKey(i,c)}let w=this.getSymKey(t),{type:S,senderPublicKey:P}=d;return T.encrypt({type:S,symKey:w,message:_,senderPublicKey:P})},this.decode=async(t,i,c)=>{this.isInitialized();let d=T.validateDecoding(i,c);if(T.isTypeOneEnvelope(d)){let i=d.receiverPublicKey,c=d.senderPublicKey;t=await this.generateSharedKey(i,c)}try{let c=this.getSymKey(t),d=T.decrypt({symKey:c,encoded:i});return R.safeJsonParse(d)}catch(i){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(i)}},this.getPayloadType=t=>{let i=T.deserialize(t);return T.decodeTypeByte(i.type)},this.getPayloadSenderPublicKey=t=>{let i=T.deserialize(t);return i.senderPublicKey?A.toString(i.senderPublicKey,T.BASE16):void 0},this.core=t,this.logger=S.generateChildLogger(i,this.name),this.keychain=c||new it(this.core,this.logger)}get context(){return S.getLoggerContext(this.logger)}async setPrivateKey(t,i){return await this.keychain.set(t,i),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(e7)}catch{t=T.generateRandomBytes32(),await this.keychain.set(e7,t)}return function(t,i="utf8"){let c=e2[i];if(!c)throw Error(`Unsupported encoding "${i}"`);return("utf8"===i||"utf-8"===i)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?ve(globalThis.Buffer.from(t,"utf-8")):c.decoder.decode(`${c.prefix}${t}`)}(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let rt=class rt extends P.IMessageTracker{constructor(t,i){super(t,i),this.logger=t,this.core=i,this.messages=new Map,this.name=ts,this.version="0.3",this.initialized=!1,this.storagePrefix=e3,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let t=await this.getRelayerMessages();"u">typeof t&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,i)=>{this.isInitialized();let c=T.hashMessage(i),d=this.messages.get(t);return typeof d>"u"&&(d={}),"u">typeof d[c]||(d[c]=i,this.messages.set(t,d),await this.persist()),c},this.get=t=>{this.isInitialized();let i=this.messages.get(t);return typeof i>"u"&&(i={}),i},this.has=(t,i)=>{this.isInitialized();let c=this.get(t),d=T.hashMessage(i);return"u">typeof c[d]},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=S.generateChildLogger(t,this.name),this.core=i}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,T.mapToObj(t))}async getRelayerMessages(){let t=await this.core.storage.getItem(this.storageKey);return"u">typeof t?T.objToMap(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let ls=class ls extends P.IPublisher{constructor(t,i){super(t,i),this.relayer=t,this.logger=i,this.events=new d.EventEmitter,this.name=ta,this.queue=new Map,this.publishTimeout=$.toMiliseconds($.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(t,i,c)=>{var d;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:i,opts:c}});try{let _=c?.ttl||to,w=T.getRelayProtocolName(c),S=c?.prompt||!1,P=c?.tag||0,R=c?.id||U.getBigIntRpcId().toString(),C={topic:t,message:i,opts:{ttl:_,relay:w,prompt:S,tag:P,id:R}},A=setTimeout(()=>this.queue.set(R,C),this.publishTimeout);try{await await T.createExpiringPromise(this.rpcPublish(t,i,_,w,S,P,R),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(R),this.relayer.events.emit(tp.publish,C)}catch(t){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(d=c?.internal)&&d.throwOnFailedPublish)throw this.removeRequestFromQueue(R),t;return}finally{clearTimeout(A)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:i,opts:c}})}catch(t){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(t),t}},this.on=(t,i)=>{this.events.on(t,i)},this.once=(t,i)=>{this.events.once(t,i)},this.off=(t,i)=>{this.events.off(t,i)},this.removeListener=(t,i)=>{this.events.removeListener(t,i)},this.relayer=t,this.logger=S.generateChildLogger(i,this.name),this.registerEventListeners()}get context(){return S.getLoggerContext(this.logger)}rpcPublish(t,i,c,d,_,w,S){var P,R,C,A;let $={method:T.getRelayProtocolApi(d.protocol).publish,params:{topic:t,message:i,ttl:c,prompt:_,tag:w},id:S};return T.isUndefined(null==(P=$.params)?void 0:P.prompt)&&(null==(R=$.params)||delete R.prompt),T.isUndefined(null==(C=$.params)?void 0:C.tag)&&(null==(A=$.params)||delete A.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:$}),this.relayer.request($)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{let{topic:i,message:c,opts:d}=t;await this.publish(i,c,d)})}registerEventListeners(){this.relayer.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tp.connection_stalled);return}this.checkQueue()}),this.relayer.on(tp.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}};let us=class us{constructor(){this.map=new Map,this.set=(t,i)=>{let c=this.get(t);this.exists(t,i)||this.map.set(t,[...c,i])},this.get=t=>this.map.get(t)||[],this.exists=(t,i)=>this.get(t).includes(i),this.delete=(t,i)=>{if(typeof i>"u"){this.map.delete(t);return}if(!this.map.has(t))return;let c=this.get(t);if(!this.exists(t,i))return;let d=c.filter(t=>t!==i);if(!d.length){this.map.delete(t);return}this.map.set(t,d)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var tz=Object.defineProperty,tq=Object.defineProperties,tU=Object.getOwnPropertyDescriptors,tH=Object.getOwnPropertySymbols,tB=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable,at=(t,i,c)=>i in t?tz(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,Y=(t,i)=>{for(var c in i||(i={}))tB.call(i,c)&&at(t,c,i[c]);if(tH)for(var c of tH(i))tW.call(i,c)&&at(t,c,i[c]);return t},ne=(t,i)=>tq(t,tU(i));let ot=class ot extends P.ISubscriber{constructor(t,i){super(t,i),this.relayer=t,this.logger=i,this.subscriptions=new Map,this.topicMap=new us,this.events=new d.EventEmitter,this.name=tE,this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=e3,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:i}});try{let c=T.getRelayProtocolName(i),d={topic:t,relay:c};this.pending.set(t,d);let _=await this.rpcSubscribe(t,c);return this.onSubscribe(_,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:i}}),_}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,i)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof i?.id?await this.unsubscribeById(t,i.id,i):await this.unsubscribeByTopic(t,i)},this.isSubscribed=async t=>!!this.topics.includes(t)||await new Promise((i,c)=>{let d=new $.Watch;d.start(this.pendingSubscriptionWatchLabel);let _=setInterval(()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(_),d.stop(this.pendingSubscriptionWatchLabel),i(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=tS&&(clearInterval(_),d.stop(this.pendingSubscriptionWatchLabel),c(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(t,i)=>{this.events.on(t,i)},this.once=(t,i)=>{this.events.once(t,i)},this.off=(t,i)=>{this.events.off(t,i)},this.removeListener=(t,i)=>{this.events.removeListener(t,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=S.generateChildLogger(i,this.name),this.clientId=""}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,i){let c=!1;try{c=this.getSubscription(t).topic===i}catch{}return c}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,i){let c=this.topicMap.get(t);await Promise.all(c.map(async c=>await this.unsubscribeById(t,c,i)))}async unsubscribeById(t,i,c){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:i,opts:c}});try{let d=T.getRelayProtocolName(c);await this.rpcUnsubscribe(t,i,d);let _=T.getSdkError("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,i,_),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:i,opts:c}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,i){let c={method:T.getRelayProtocolApi(i.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{await await T.createExpiringPromise(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tp.connection_stalled)}return T.hashMessage(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;let i=t[0].relay,c={method:T.getRelayProtocolApi(i.protocol).batchSubscribe,params:{topics:t.map(t=>t.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{return await await T.createExpiringPromise(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tp.connection_stalled)}}rpcUnsubscribe(t,i,c){let d={method:T.getRelayProtocolApi(c.protocol).unsubscribe,params:{topic:t,id:i}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:d}),this.relayer.request(d)}onSubscribe(t,i){this.setSubscription(t,ne(Y({},i),{id:t})),this.pending.delete(i.topic)}onBatchSubscribe(t){t.length&&t.forEach(t=>{this.setSubscription(t.id,Y({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(t,i,c){this.events.removeAllListeners(i),this.hasSubscription(i,t)&&this.deleteSubscription(i,c),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,i){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:i}),this.addSubscription(t,i))}addSubscription(t,i){this.subscriptions.set(t,Y({},i)),this.topicMap.set(i.topic,t),this.events.emit(tb.created,i)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});let i=this.subscriptions.get(t);if(!i){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(i)}return i}deleteSubscription(t,i){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:i});let c=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(c.topic,t),this.events.emit(tb.deleted,ne(Y({},c),{reason:i}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tb.sync)}async reset(){if(this.cached.length){let t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){let t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(tb.resubscribed)}async restore(){try{let t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){let{message:t}=T.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;let i=await this.rpcBatchSubscribe(t);T.isValidArray(i)&&this.onBatchSubscribe(i.map((i,c)=>ne(Y({},t[c]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let t=[];this.pending.forEach(i=>{t.push(i)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tp.connect,async()=>{await this.onConnect()}),this.relayer.on(tp.disconnect,()=>{this.onDisconnect()}),this.events.on(tb.created,async t=>{let i=tb.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),await this.persist()}),this.events.on(tb.deleted,async t=>{let i=tb.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{let i=setInterval(()=>{this.restartInProgress||(clearInterval(i),t())},this.pollingInterval)})}};var tV=Object.defineProperty,tK=Object.getOwnPropertySymbols,tG=Object.prototype.hasOwnProperty,tF=Object.prototype.propertyIsEnumerable,ct=(t,i,c)=>i in t?tV(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,ms=(t,i)=>{for(var c in i||(i={}))tG.call(i,c)&&ct(t,c,i[c]);if(tK)for(var c of tK(i))tF.call(i,c)&&ct(t,c,i[c]);return t};let lt=class lt extends P.IRelayer{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new d.EventEmitter,this.name=tf,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(t){throw this.logger.debug("Failed to Publish Request"),this.logger.error(t),t}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tp.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tp.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tg.payload,this.onPayloadHandler),this.provider.on(tg.connect,this.onConnectHandler),this.provider.on(tg.disconnect,this.onDisconnectHandler),this.provider.on(tg.error,this.onProviderErrorHandler)},this.core=t.core,this.logger="u">typeof t.logger&&"string"!=typeof t.logger?S.generateChildLogger(t.logger,this.name):S.pino(S.getDefaultLoggerOptions({level:t.logger||tc})),this.messages=new rt(this.logger,t.core),this.subscriber=new ot(this,this.logger),this.publisher=new ls(this,this.logger),this.relayUrl=t?.relayUrl||tl,this.projectId=t.projectId,this.bundleId=T.getBundleId(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${th}...`),await this.restartTransport(th)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return S.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,i,c){this.isInitialized(),await this.publisher.publish(t,i,c),await this.recordMessageEvent({topic:t,message:i,publishedAt:Date.now()})}async subscribe(t,i){var c;let d;this.isInitialized();let _=(null==(c=this.subscriber.topicMap.get(t))?void 0:c[0])||"";if(_)return _;let a=i=>{i.topic===t&&(this.subscriber.off(tb.created,a),d())};return await Promise.all([new Promise(t=>{d=t,this.subscriber.on(tb.created,a)}),new Promise(async c=>{_=await this.subscriber.subscribe(t,i),c()})]),_}async unsubscribe(t,i){this.isInitialized(),await this.subscriber.unsubscribe(t,i)}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await T.createExpiringPromise(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(tb.resubscribed,()=>{t()})}),new Promise(async(t,i)=>{try{await T.createExpiringPromise(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(t){i(t);return}t()})])}catch(t){if(this.logger.error(t),!this.isConnectionStalled(t.message))throw t;this.provider.events.emit(tg.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await T.isOnline())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(i=>t.includes(i))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new q.JsonRpcProvider(new es.default(T.formatRelayRpcUrl({sdkVersion:tm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){let{topic:i,message:c}=t;await this.messages.set(i,c)}async shouldIgnoreMessageEvent(t){let{topic:i,message:c}=t;if(!c||0===c.length)return this.logger.debug(`Ignoring invalid/empty message: ${c}`),!0;if(!await this.subscriber.isSubscribed(i))return this.logger.debug(`Ignoring message for non-subscribed topic ${i}`),!0;let d=this.messages.has(i,c);return d&&this.logger.debug(`Ignoring duplicate message: ${c}`),d}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),U.isJsonRpcRequest(t)){if(!t.method.endsWith(td))return;let i=t.params,{topic:c,message:d,publishedAt:_}=i.data,w={topic:c,message:d,publishedAt:_};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ms({type:"event",event:i.id},w)),this.events.emit(i.id,w),await this.acknowledgePayload(t),await this.onMessageEvent(w)}else U.isJsonRpcResponse(t)&&this.events.emit(tp.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(tp.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){let i=U.formatJsonRpcResult(t.id,!0);await this.provider.connection.send(i)}unregisterProviderListeners(){this.provider.off(tg.payload,this.onPayloadHandler),this.provider.off(tg.connect,this.onConnectHandler),this.provider.off(tg.disconnect,this.onDisconnectHandler),this.provider.off(tg.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tp.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let t=await T.isOnline();T.subscribeToNetworkChange(async i=>{this.initialized&&t!==i&&(t=i,i?await this.restartTransport().catch(t=>this.logger.error(t)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(t=>this.logger.error(t))))})}onProviderDisconnect(){this.events.emit(tp.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},$.toMiliseconds(ty)))}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{let i=setInterval(()=>{this.connected&&(clearInterval(i),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var tJ=Object.defineProperty,tY=Object.getOwnPropertySymbols,tZ=Object.prototype.hasOwnProperty,tQ=Object.prototype.propertyIsEnumerable,gt=(t,i,c)=>i in t?tJ(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,dt=(t,i)=>{for(var c in i||(i={}))tZ.call(i,c)&&gt(t,c,i[c]);if(tY)for(var c of tY(i))tQ.call(i,c)&&gt(t,c,i[c]);return t};let pt=class pt extends P.IStore{constructor(t,i,c,d=e3,_){super(t,i,c,d),this.core=t,this.logger=i,this.name=c,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e3,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>{this.getKey&&null!==t&&!T.isUndefined(t)?this.map.set(this.getKey(t),t):T.isProposalStruct(t)?this.map.set(t.id,t):T.isSessionStruct(t)&&this.map.set(t.topic,t)}),this.cached=[],this.initialized=!0)},this.set=async(t,i)=>{this.isInitialized(),this.map.has(t)?await this.update(t,i):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:i}),this.map.set(t,i),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter(i=>Object.keys(t).every(c=>eo.default(i[c],t[c]))):this.values),this.update=async(t,i)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:i});let c=dt(dt({},this.getData(t)),i);this.map.set(t,c),await this.persist()},this.delete=async(t,i)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:i}),this.map.delete(t),await this.persist())},this.logger=S.generateChildLogger(i,this.name),this.storagePrefix=d,this.getKey=_}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){let i=this.map.get(t);if(!i){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),Error(i)}return i}async persist(){await this.setDataStore(this.values)}async restore(){try{let t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){let{message:t}=T.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let Dt=class Dt{constructor(t,i){this.core=t,this.logger=i,this.name=tI,this.version="0.3",this.events=new X.default,this.initialized=!1,this.storagePrefix=e3,this.ignoredPayloadTypes=[T.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async()=>{this.isInitialized();let t=T.generateRandomBytes32(),i=await this.core.crypto.setSymKey(t),c=T.calcExpiry($.FIVE_MINUTES),d={protocol:"irn"},_=T.formatUri({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:t,relay:d});return await this.pairings.set(i,{topic:i,expiry:c,relay:d,active:!1}),await this.core.relayer.subscribe(i),this.core.expirer.set(i,c),{topic:i,uri:_}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);let{topic:i,symKey:c,relay:d}=T.parseUri(t.uri);if(this.pairings.keys.includes(i)&&this.pairings.get(i).active)throw Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);let _=T.calcExpiry($.FIVE_MINUTES),w={topic:i,relay:d,expiry:_,active:!1};return await this.pairings.set(i,w),this.core.expirer.set(i,_),t.activatePairing&&await this.activate({topic:i}),this.events.emit(tx.create,w),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(c,i),await this.core.relayer.subscribe(i,{relay:d})),w},this.activate=async({topic:t})=>{this.isInitialized();let i=T.calcExpiry($.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:i}),this.core.expirer.set(t,i)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);let{topic:i}=t;if(this.pairings.keys.includes(i)){let t=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:d,reject:_}=T.createDelayedPromise();this.events.once(T.engineEvent("pairing_ping",t),({error:t})=>{t?_(t):d()}),await c()}},this.updateExpiry=async({topic:t,expiry:i})=>{this.isInitialized(),await this.pairings.update(t,{expiry:i})},this.updateMetadata=async({topic:t,metadata:i})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);let{topic:i}=t;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",T.getSdkError("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(t,i,c)=>{let d=U.formatJsonRpcRequest(i,c),_=await this.core.crypto.encode(t,d),w=tP[i].req;return this.core.history.set(t,d),this.core.relayer.publish(t,_,w),d.id},this.sendResult=async(t,i,c)=>{let d=U.formatJsonRpcResult(t,c),_=await this.core.crypto.encode(i,d),w=await this.core.history.get(i,t),S=tP[w.request.method].res;await this.core.relayer.publish(i,_,S),await this.core.history.resolve(d)},this.sendError=async(t,i,c)=>{let d=U.formatJsonRpcError(t,c),_=await this.core.crypto.encode(i,d),w=await this.core.history.get(i,t),S=tP[w.request.method]?tP[w.request.method].res:tP.unregistered_method.res;await this.core.relayer.publish(i,_,S),await this.core.history.resolve(d)},this.deletePairing=async(t,i)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,T.getSdkError("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),i?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{let t=this.pairings.getAll().filter(t=>T.isExpired(t.expiry));await Promise.all(t.map(t=>this.deletePairing(t.topic)))},this.onRelayEventRequest=t=>{let{topic:i,payload:c}=t;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(i,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,c);default:return this.onUnknownRpcMethodRequest(i,c)}},this.onRelayEventResponse=async t=>{let{topic:i,payload:c}=t,d=(await this.core.history.get(i,c.id)).request.method;return"wc_pairingPing"===d?this.onPairingPingResponse(i,c):this.onUnknownRpcMethodResponse(d)},this.onPairingPingRequest=async(t,i)=>{let{id:c}=i;try{this.isValidPing({topic:t}),await this.sendResult(c,t,!0),this.events.emit(tx.ping,{id:c,topic:t})}catch(i){await this.sendError(c,t,i),this.logger.error(i)}},this.onPairingPingResponse=(t,i)=>{let{id:c}=i;setTimeout(()=>{U.isJsonRpcResult(i)?this.events.emit(T.engineEvent("pairing_ping",c),{}):U.isJsonRpcError(i)&&this.events.emit(T.engineEvent("pairing_ping",c),{error:i.error})},500)},this.onPairingDeleteRequest=async(t,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit(tx.delete,{id:c,topic:t})}catch(i){await this.sendError(c,t,i),this.logger.error(i)}},this.onUnknownRpcMethodRequest=async(t,i)=>{let{id:c,method:d}=i;try{if(this.registeredMethods.includes(d))return;let i=T.getSdkError("WC_METHOD_UNSUPPORTED",d);await this.sendError(c,t,i),this.logger.error(i)}catch(i){await this.sendError(c,t,i),this.logger.error(i)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(T.getSdkError("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{var i;if(!T.isValidParams(t)){let{message:i}=T.getInternalError("MISSING_OR_INVALID",`pair() params: ${t}`);throw Error(i)}if(!T.isValidUrl(t.uri)){let{message:i}=T.getInternalError("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw Error(i)}let c=T.parseUri(t.uri);if(!(null!=(i=c?.relay)&&i.protocol)){let{message:t}=T.getInternalError("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(t)}if(!(null!=c&&c.symKey)){let{message:t}=T.getInternalError("MISSING_OR_INVALID","pair() uri#symKey");throw Error(t)}},this.isValidPing=async t=>{if(!T.isValidParams(t)){let{message:i}=T.getInternalError("MISSING_OR_INVALID",`ping() params: ${t}`);throw Error(i)}let{topic:i}=t;await this.isValidPairingTopic(i)},this.isValidDisconnect=async t=>{if(!T.isValidParams(t)){let{message:i}=T.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw Error(i)}let{topic:i}=t;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async t=>{if(!T.isValidString(t,!1)){let{message:i}=T.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw Error(i)}if(!this.pairings.keys.includes(t)){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw Error(i)}if(T.isExpired(this.pairings.get(t).expiry)){await this.deletePairing(t);let{message:i}=T.getInternalError("EXPIRED",`pairing topic: ${t}`);throw Error(i)}},this.core=t,this.logger=S.generateChildLogger(i,this.name),this.pairings=new pt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return S.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}registerRelayerEvents(){this.core.relayer.on(tp.message,async t=>{let{topic:i,message:c}=t;if(!this.pairings.keys.includes(i)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(c)))return;let d=await this.core.crypto.decode(i,c);try{U.isJsonRpcRequest(d)?(this.core.history.set(i,d),this.onRelayEventRequest({topic:i,payload:d})):U.isJsonRpcResponse(d)&&(await this.core.history.resolve(d),await this.onRelayEventResponse({topic:i,payload:d}),this.core.history.delete(i,d.id))}catch(t){this.logger.error(t)}})}registerExpirerEvents(){this.core.expirer.on(tN.expired,async t=>{let{topic:i}=T.parseExpirerTarget(t.target);i&&this.pairings.keys.includes(i)&&(await this.deletePairing(i,!0),this.events.emit(tx.expire,{topic:i}))})}};let yt=class yt extends P.IJsonRpcHistory{constructor(t,i){super(t,i),this.core=t,this.logger=i,this.records=new Map,this.events=new d.EventEmitter,this.name=tC,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e3,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>this.records.set(t.id,t)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,i,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:i,chainId:c}),this.records.has(i.id))return;let d={id:i.id,topic:t,request:{method:i.method,params:i.params||null},chainId:c,expiry:T.calcExpiry($.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(tR.created,d)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;let i=await this.getRecord(t.id);typeof i.response>"u"&&(i.response=U.isJsonRpcError(t)?{error:t.error}:{result:t.result},this.records.set(i.id,i),this.events.emit(tR.updated,i))},this.get=async(t,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:i}),await this.getRecord(i)),this.delete=(t,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(c=>{c.topic!==t||"u">typeof i&&c.id!==i||(this.records.delete(c.id),this.events.emit(tR.deleted,c))})},this.exists=async(t,i)=>(this.isInitialized(),!!this.records.has(i)&&(await this.getRecord(i)).topic===t),this.on=(t,i)=>{this.events.on(t,i)},this.once=(t,i)=>{this.events.once(t,i)},this.off=(t,i)=>{this.events.off(t,i)},this.removeListener=(t,i)=>{this.events.removeListener(t,i)},this.logger=S.generateChildLogger(i,this.name)}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let t=[];return this.values.forEach(i=>{if("u">typeof i.response)return;let c={topic:i.topic,request:U.formatJsonRpcRequest(i.request.method,i.request.params,i.id),chainId:i.chainId};return t.push(c)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();let i=this.records.get(t);if(!i){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`${this.name}: ${t}`);throw Error(i)}return i}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(tR.sync)}async restore(){try{let t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){let{message:t}=T.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(tR.created,t=>{let i=tR.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t}),this.persist()}),this.events.on(tR.updated,t=>{let i=tR.updated;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t}),this.persist()}),this.events.on(tR.deleted,t=>{let i=tR.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t}),this.persist()}),this.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{$.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let Et=class Et extends P.IExpirer{constructor(t,i){super(t,i),this.core=t,this.logger=i,this.expirations=new Map,this.events=new d.EventEmitter,this.name=tT,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=e3,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(t=>this.expirations.set(t.target,t)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{let i=this.formatTarget(t);return"u">typeof this.getExpiration(i)}catch{return!1}},this.set=(t,i)=>{this.isInitialized();let c=this.formatTarget(t),d={target:c,expiry:i};this.expirations.set(c,d),this.checkExpiry(c,d),this.events.emit(tN.created,{target:c,expiration:d})},this.get=t=>{this.isInitialized();let i=this.formatTarget(t);return this.getExpiration(i)},this.del=t=>{if(this.isInitialized(),this.has(t)){let i=this.formatTarget(t),c=this.getExpiration(i);this.expirations.delete(i),this.events.emit(tN.deleted,{target:i,expiration:c})}},this.on=(t,i)=>{this.events.on(t,i)},this.once=(t,i)=>{this.events.once(t,i)},this.off=(t,i)=>{this.events.off(t,i)},this.removeListener=(t,i)=>{this.events.removeListener(t,i)},this.logger=S.generateChildLogger(i,this.name)}get context(){return S.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if("string"==typeof t)return T.formatTopicTarget(t);if("number"==typeof t)return T.formatIdTarget(t);let{message:i}=T.getInternalError("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw Error(i)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(tN.sync)}async restore(){try{let t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){let{message:t}=T.getInternalError("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){let i=this.expirations.get(t);if(!i){let{message:i}=T.getInternalError("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),Error(i)}return i}checkExpiry(t,i){let{expiry:c}=i;$.toMiliseconds(c)-Date.now()<=0&&this.expire(t,i)}expire(t,i){this.expirations.delete(t),this.events.emit(tN.expired,{target:t,expiration:i})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,i)=>this.checkExpiry(i,t))}registerEventListeners(){this.core.heartbeat.on(w.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(tN.created,t=>{let i=tN.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()}),this.events.on(tN.expired,t=>{let i=tN.expired;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()}),this.events.on(tN.deleted,t=>{let i=tN.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()})}isInitialized(){if(!this.initialized){let{message:t}=T.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}}};let bt=class bt extends P.IVerify{constructor(t,i){super(t,i),this.projectId=t,this.logger=i,this.name=tA,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async t=>{if(this.verifyDisabled||T.isReactNative()||!T.isBrowser())return;let i=this.getVerifyUrl(t?.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t)}if(!this.initialized){this.removeIframe(),this.verifyUrl=tj;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t),this.verifyDisabled=!0}}},this.register=async t=>{this.initialized?this.sendPost(t.attestationId):(this.addToQueue(t.attestationId),await this.init())},this.resolve=async t=>{let i;if(this.isDevEnv)return"";let c=this.getVerifyUrl(t?.verifyUrl);try{i=await this.fetchAttestation(t.attestationId,c)}catch(d){this.logger.info(`failed to resolve attestation: ${t.attestationId} from url: ${c}`),this.logger.info(d),i=await this.fetchAttestation(t.attestationId,tj)}return i},this.fetchAttestation=async(t,i)=>{this.logger.info(`resolving attestation: ${t} from url: ${i}`);let c=this.startAbortTimer(2*$.ONE_SECOND),d=await fetch(`${i}/attestation/${t}`,{signal:this.abortController.signal});return clearTimeout(c),200===d.status?await d.json():void 0},this.addToQueue=t=>{this.queue.push(t)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(t=>this.sendPost(t)),this.queue=[])},this.sendPost=t=>{var i;try{if(!this.iframe)return;null==(i=this.iframe.contentWindow)||i.postMessage(t,"*"),this.logger.info(`postMessage sent: ${t} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let t;let s=i=>{"verify_ready"===i.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),t())};await Promise.race([new Promise(i=>{if(document.getElementById(tA))return i();window.addEventListener("message",s);let c=document.createElement("iframe");c.id=tA,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,t=i}),new Promise((t,i)=>setTimeout(()=>{window.removeEventListener("message",s),i("verify iframe load timeout")},$.toMiliseconds($.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=t=>{let i=t||tL;return tD.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${tL}`),i=tL),i},this.logger=S.generateChildLogger(i,this.name),this.verifyUrl=tL,this.abortController=new AbortController,this.isDevEnv=T.isNode()&&process.env.IS_VITEST}get context(){return S.getLoggerContext(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),$.toMiliseconds(t))}};let ft=class ft extends P.IEchoClient{constructor(t,i){super(t,i),this.projectId=t,this.logger=i,this.context=tM,this.registerDeviceToken=async t=>{let{clientId:i,token:c,notificationType:d,enableEncrypted:_=!1}=t,w=`${t$}/${this.projectId}/clients`;await ec.default(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:d,token:c,always_raw:_})})},this.logger=S.generateChildLogger(i,this.context)}};var tX=Object.defineProperty,t0=Object.getOwnPropertySymbols,t1=Object.prototype.hasOwnProperty,t5=Object.prototype.propertyIsEnumerable,vt=(t,i,c)=>i in t?tX(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,wt=(t,i)=>{for(var c in i||(i={}))t1.call(i,c)&&vt(t,c,i[c]);if(t0)for(var c of t0(i))t5.call(i,c)&&vt(t,c,i[c]);return t};let W=class W extends P.ICore{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=e6,this.events=new d.EventEmitter,this.initialized=!1,this.on=(t,i)=>this.events.on(t,i),this.once=(t,i)=>this.events.once(t,i),this.off=(t,i)=>this.events.off(t,i),this.removeListener=(t,i)=>this.events.removeListener(t,i),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||tl,this.customStoragePrefix=null!=t&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";let i="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:S.pino(S.getDefaultLoggerOptions({level:t?.logger||e4.logger}));this.logger=S.generateChildLogger(i,this.name),this.heartbeat=new w.HeartBeat,this.crypto=new st(this,this.logger,t?.keychain),this.history=new yt(this,this.logger),this.expirer=new Et(this,this.logger),this.storage=null!=t&&t.storage?t.storage:new ee.default(wt(wt({},e8),t?.storageOptions)),this.relayer=new lt({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Dt(this,this.logger),this.verify=new bt(this.projectId||"",this.logger),this.echoClient=new ft(this.projectId||"",this.logger)}static async init(t){let i=new W(t);await i.initialize();let c=await i.crypto.getClientId();return await i.storage.setItem(t_,c),i}get context(){return S.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};i.CORE_CONTEXT=e6,i.CORE_DEFAULT=e4,i.CORE_PROTOCOL="wc",i.CORE_STORAGE_OPTIONS=e8,i.CORE_STORAGE_PREFIX=e3,i.CORE_VERSION=2,i.CRYPTO_CLIENT_SEED=e7,i.CRYPTO_CONTEXT=e9,i.CRYPTO_JWT_TTL=te,i.Core=W,i.Crypto=st,i.ECHO_CONTEXT=tM,i.ECHO_URL=t$,i.EXPIRER_CONTEXT=tT,i.EXPIRER_DEFAULT_TTL=tk,i.EXPIRER_EVENTS=tN,i.EXPIRER_STORAGE_VERSION="0.3",i.EchoClient=ft,i.Expirer=Et,i.HISTORY_CONTEXT=tC,i.HISTORY_EVENTS=tR,i.HISTORY_STORAGE_VERSION="0.3",i.JsonRpcHistory=yt,i.KEYCHAIN_CONTEXT=tn,i.KEYCHAIN_STORAGE_VERSION="0.3",i.KeyChain=it,i.MESSAGES_CONTEXT=ts,i.MESSAGES_STORAGE_VERSION="0.3",i.MessageTracker=rt,i.PAIRING_CONTEXT=tI,i.PAIRING_DEFAULT_TTL=tO,i.PAIRING_EVENTS=tx,i.PAIRING_RPC_OPTS=tP,i.PAIRING_STORAGE_VERSION="0.3",i.PENDING_SUB_RESOLUTION_TIMEOUT=tS,i.PUBLISHER_CONTEXT=ta,i.PUBLISHER_DEFAULT_TTL=to,i.Pairing=Dt,i.RELAYER_CONTEXT=tf,i.RELAYER_DEFAULT_LOGGER=tc,i.RELAYER_DEFAULT_PROTOCOL="irn",i.RELAYER_DEFAULT_RELAY_URL=tl,i.RELAYER_EVENTS=tp,i.RELAYER_FAILOVER_RELAY_URL=th,i.RELAYER_PROVIDER_EVENTS=tg,i.RELAYER_RECONNECT_TIMEOUT=ty,i.RELAYER_SDK_VERSION=tm,i.RELAYER_STORAGE_OPTIONS={database:":memory:"},i.RELAYER_SUBSCRIBER_SUFFIX=td,i.RELAYER_TRANSPORT_CUTOFF=1e4,i.Relayer=lt,i.STORE_STORAGE_VERSION="0.3",i.SUBSCRIBER_CONTEXT=tE,i.SUBSCRIBER_DEFAULT_TTL=tw,i.SUBSCRIBER_EVENTS=tb,i.SUBSCRIBER_STORAGE_VERSION="0.3",i.Store=pt,i.Subscriber=ot,i.TRUSTED_VERIFY_URLS=tD,i.VERIFY_CONTEXT=tA,i.VERIFY_FALLBACK_SERVER=tj,i.VERIFY_SERVER=tL,i.Verify=bt,i.WALLETCONNECT_CLIENT_ID=t_,i.default=W},57069:(t,i,c)=>{"use strict";c.d(i,{EthereumProvider:()=>ex});var d=c(82361),_=c.n(d),w=c(40491),S=c(66226),P=c(3491),R=c(65286),C=c.n(R),T=c(32207),A=c(25815);let $="error",q="wc@2:universal_provider:",U={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var B="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{},F={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(t,i){(function(){var c,d="Expected a function",_="__lodash_hash_undefined__",w="__lodash_placeholder__",S=1/0,P=0/0,R=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],C="[object Arguments]",T="[object Array]",A="[object Boolean]",$="[object Date]",q="[object Error]",U="[object Function]",F="[object GeneratorFunction]",J="[object Map]",X="[object Number]",ee="[object Object]",et="[object Promise]",es="[object RegExp]",eo="[object Set]",ec="[object String]",el="[object Symbol]",eh="[object WeakMap]",ef="[object ArrayBuffer]",ep="[object DataView]",ed="[object Float32Array]",eg="[object Float64Array]",ey="[object Int8Array]",em="[object Int16Array]",e_="[object Int32Array]",eb="[object Uint8Array]",ew="[object Uint8ClampedArray]",eE="[object Uint16Array]",eS="[object Uint32Array]",eI=/\b__p \+= '';/g,eO=/\b(__p \+=) '' \+/g,eP=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ex=/&(?:amp|lt|gt|quot|#39);/g,eR=/[&<>"']/g,eC=RegExp(ex.source),eT=RegExp(eR.source),eN=/<%-([\s\S]+?)%>/g,ek=/<%([\s\S]+?)%>/g,eA=/<%=([\s\S]+?)%>/g,eL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ej=/^\w*$/,eD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eM=/[\\^$.*+?()[\]{}|]/g,e$=RegExp(eM.source),ez=/^\s+/,eU=/\s/,eH=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eB=/\{\n\/\* \[wrapped with (.+)\] \*/,eW=/,? & /,eV=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eK=/[()=,{}\[\]\/\s]/,eG=/\\(\\)?/g,eF=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eJ=/\w*$/,eY=/^[-+]0x[0-9a-f]+$/i,eZ=/^0b[01]+$/i,eQ=/^\[object .+?Constructor\]$/,eX=/^0o[0-7]+$/i,e0=/^(?:0|[1-9]\d*)$/,e1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e5=/($^)/,e2=/['\n\r\u2028\u2029\\]/g,e6="\ud800-\udfff",e3="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e4="\\u2700-\\u27bf",e8="a-z\\xdf-\\xf6\\xf8-\\xff",e9="A-Z\\xc0-\\xd6\\xd8-\\xde",e7="\\ufe0e\\ufe0f",te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="['’]",ts="["+te+"]",to="["+e3+"]",ta="["+e8+"]",tc="[^"+e6+te+"\\d+"+e4+e8+e9+"]",tl="\ud83c[\udffb-\udfff]",th="[^"+e6+"]",tf="(?:\ud83c[\udde6-\uddff]){2}",tp="[\ud800-\udbff][\udc00-\udfff]",td="["+e9+"]",tg="\\u200d",ty="(?:"+ta+"|"+tc+")",tm="(?:"+tn+"(?:d|ll|m|re|s|t|ve))?",t_="(?:"+tn+"(?:D|LL|M|RE|S|T|VE))?",tb="(?:"+to+"|"+tl+")?",tw="["+e7+"]?",tE="(?:"+tg+"(?:"+[th,tf,tp].join("|")+")"+tw+tb+")*",tS=tw+tb+tE,tI="(?:"+["["+e4+"]",tf,tp].join("|")+")"+tS,tO="(?:"+[th+to+"?",to,tf,tp,"["+e6+"]"].join("|")+")",tP=RegExp(tn,"g"),tx=RegExp(to,"g"),tR=RegExp(tl+"(?="+tl+")|"+tO+tS,"g"),tC=RegExp([td+"?"+ta+"+"+tm+"(?="+[ts,td,"$"].join("|")+")","(?:"+td+"|"+tc+")+"+t_+"(?="+[ts,td+ty,"$"].join("|")+")",td+"?"+ty+"+"+tm,td+"+"+t_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tI].join("|"),"g"),tT=RegExp("["+tg+e6+e3+e7+"]"),tN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tk=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tA=-1,tL={};tL[ed]=tL[eg]=tL[ey]=tL[em]=tL[e_]=tL[eb]=tL[ew]=tL[eE]=tL[eS]=!0,tL[C]=tL[T]=tL[ef]=tL[A]=tL[ep]=tL[$]=tL[q]=tL[U]=tL[J]=tL[X]=tL[ee]=tL[es]=tL[eo]=tL[ec]=tL[eh]=!1;var tj={};tj[C]=tj[T]=tj[ef]=tj[ep]=tj[A]=tj[$]=tj[ed]=tj[eg]=tj[ey]=tj[em]=tj[e_]=tj[J]=tj[X]=tj[ee]=tj[es]=tj[eo]=tj[ec]=tj[el]=tj[eb]=tj[ew]=tj[eE]=tj[eS]=!0,tj[q]=tj[U]=tj[eh]=!1;var tD={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tM=parseFloat,t$=parseInt,tz="object"==typeof B&&B&&B.Object===Object&&B,tq="object"==typeof self&&self&&self.Object===Object&&self,tU=tz||tq||Function("return this")(),tH=i&&!i.nodeType&&i,tB=tH&&t&&!t.nodeType&&t,tW=tB&&tB.exports===tH,tV=tW&&tz.process,tK=function(){try{return tB&&tB.require&&tB.require("util").types||tV&&tV.binding&&tV.binding("util")}catch{}}(),tG=tK&&tK.isArrayBuffer,tF=tK&&tK.isDate,tJ=tK&&tK.isMap,tY=tK&&tK.isRegExp,tZ=tK&&tK.isSet,tQ=tK&&tK.isTypedArray;function cn(t,i,c){switch(c.length){case 0:return t.call(i);case 1:return t.call(i,c[0]);case 2:return t.call(i,c[0],c[1]);case 3:return t.call(i,c[0],c[1],c[2])}return t.apply(i,c)}function Vo(t,i,c,d){for(var _=-1,w=null==t?0:t.length;++_<w;){var S=t[_];i(d,S,c(S),t)}return d}function mn(t,i){for(var c=-1,d=null==t?0:t.length;++c<d&&!1!==i(t[c],c,t););return t}function As(t,i){for(var c=-1,d=null==t?0:t.length;++c<d;)if(!i(t[c],c,t))return!1;return!0}function jn(t,i){for(var c=-1,d=null==t?0:t.length,_=0,w=[];++c<d;){var S=t[c];i(S,c,t)&&(w[_++]=S)}return w}function Ee(t,i){return!!(null==t?0:t.length)&&Tt(t,i,0)>-1}function Dr(t,i,c){for(var d=-1,_=null==t?0:t.length;++d<_;)if(c(i,t[d]))return!0;return!1}function G(t,i){for(var c=-1,d=null==t?0:t.length,_=Array(d);++c<d;)_[c]=i(t[c],c,t);return _}function nt(t,i){for(var c=-1,d=i.length,_=t.length;++c<d;)t[_+c]=i[c];return t}function Hr(t,i,c,d){var _=-1,w=null==t?0:t.length;for(d&&w&&(c=t[++_]);++_<w;)c=i(c,t[_],_,t);return c}function jo(t,i,c,d){var _=null==t?0:t.length;for(d&&_&&(c=t[--_]);_--;)c=i(c,t[_],_,t);return c}function Nr(t,i){for(var c=-1,d=null==t?0:t.length;++c<d;)if(i(t[c],c,t))return!0;return!1}var tX=$r("length");function Cs(t,i,c){var d;return c(t,function(t,c,_){if(i(t,c,_))return d=c,!1}),d}function ye(t,i,c,d){for(var _=t.length,w=c+(d?1:-1);d?w--:++w<_;)if(i(t[w],w,t))return w;return -1}function Tt(t,i,c){return i==i?function(t,i,c){for(var d=c-1,_=t.length;++d<_;)if(t[d]===i)return d;return -1}(t,i,c):ye(t,Is,c)}function rf(t,i,c,d){for(var _=c-1,w=t.length;++_<w;)if(d(t[_],i))return _;return -1}function Is(t){return t!=t}function xs(t,i){var c=null==t?0:t.length;return c?Wr(t,i)/c:P}function $r(t){return function(i){return null==i?c:i[t]}}function Ur(t){return function(i){return null==t?c:t[i]}}function Es(t,i,c,d,_){return _(t,function(t,_,w){c=d?(d=!1,t):i(c,t,_,w)}),c}function Wr(t,i){for(var d,_=-1,w=t.length;++_<w;){var S=i(t[_]);S!==c&&(d=d===c?S:d+S)}return d}function Fr(t,i){for(var c=-1,d=Array(t);++c<t;)d[c]=i(c);return d}function ys(t){return t&&t.slice(0,bs(t)+1).replace(ez,"")}function hn(t){return function(i){return t(i)}}function Mr(t,i){return G(i,function(i){return t[i]})}function jt(t,i){return t.has(i)}function Ss(t,i){for(var c=-1,d=t.length;++c<d&&Tt(i,t[c],0)>-1;);return c}function Os(t,i){for(var c=t.length;c--&&Tt(i,t[c],0)>-1;);return c}var t0=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),t1=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(t){return"\\"+tD[t]}function Lt(t){return tT.test(t)}function qr(t){var i=-1,c=Array(t.size);return t.forEach(function(t,d){c[++i]=[d,t]}),c}function Rs(t,i){return function(c){return t(i(c))}}function tt(t,i){for(var c=-1,d=t.length,_=0,S=[];++c<d;){var P=t[c];(P===i||P===w)&&(t[c]=w,S[_++]=c)}return S}function Se(t){var i=-1,c=Array(t.size);return t.forEach(function(t){c[++i]=t}),c}function Dt(t){return Lt(t)?function(t){for(var i=tR.lastIndex=0;tR.test(t);)++i;return i}(t):tX(t)}function On(t){return Lt(t)?t.match(tR)||[]:t.split("")}function bs(t){for(var i=t.length;i--&&eU.test(t.charAt(i)););return i}var t5=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),t2=function h(t){var i,B,eU,e6,e3=(t=null==t?tU:t2.defaults(tU.Object(),t,t2.pick(tU,tk))).Array,e4=t.Date,e8=t.Error,e9=t.Function,e7=t.Math,te=t.Object,tn=t.RegExp,ts=t.String,to=t.TypeError,ta=e3.prototype,tc=e9.prototype,tl=te.prototype,th=t["__core-js_shared__"],tf=tc.toString,tp=tl.hasOwnProperty,td=0,tg=(i=/[^.]+$/.exec(th&&th.keys&&th.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",ty=tl.toString,tm=tf.call(te),t_=tU._,tb=tn("^"+tf.call(tp).replace(eM,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tw=tW?t.Buffer:c,tE=t.Symbol,tS=t.Uint8Array,tI=tw?tw.allocUnsafe:c,tO=Rs(te.getPrototypeOf,te),tR=te.create,tT=tl.propertyIsEnumerable,tD=ta.splice,tz=tE?tE.isConcatSpreadable:c,tq=tE?tE.iterator:c,tH=tE?tE.toStringTag:c,tB=function(){try{var t=mt(te,"defineProperty");return t({},"",{}),t}catch{}}(),tV=t.clearTimeout!==tU.clearTimeout&&t.clearTimeout,tK=e4&&e4.now!==tU.Date.now&&e4.now,tX=t.setTimeout!==tU.setTimeout&&t.setTimeout,t6=e7.ceil,t3=e7.floor,t4=te.getOwnPropertySymbols,t8=tw?tw.isBuffer:c,t9=t.isFinite,t7=ta.join,re=Rs(te.keys,te),rs=e7.max,ro=e7.min,ra=e4.now,rc=t.parseInt,rl=e7.random,rh=ta.reverse,rp=mt(t,"DataView"),rd=mt(t,"Map"),rg=mt(t,"Promise"),ry=mt(t,"Set"),rm=mt(t,"WeakMap"),r_=mt(te,"create"),rb=rm&&new rm,rw={},rE=wt(rp),rS=wt(rd),rI=wt(rg),rO=wt(ry),rP=wt(rm),rx=tE?tE.prototype:c,rR=rx?rx.valueOf:c,rC=rx?rx.toString:c;function a(t){if(Y(t)&&!iR(t)&&!(t instanceof H)){if(t instanceof Pn)return t;if(tp.call(t,"__wrapped__"))return Fu(t)}return new Pn(t)}var rT=function(){function n(){}return function(t){if(!K(t))return{};if(tR)return tR(t);n.prototype=t;var i=new n;return n.prototype=c,i}}();function qe(){}function Pn(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=c}function H(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function dt(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function Bn(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function Gn(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function gt(t){var i=-1,c=null==t?0:t.length;for(this.__data__=new Gn;++i<c;)this.add(t[i])}function Rn(t){var i=this.__data__=new Bn(t);this.size=i.size}function Fs(t,i){var c=iR(t),d=!c&&ix(t),_=!c&&!d&&iT(t),w=!c&&!d&&!_&&ij(t),S=c||d||_||w,P=S?Fr(t.length,ts):[],R=P.length;for(var C in t)(i||tp.call(t,C))&&!(S&&("length"==C||_&&("offset"==C||"parent"==C)||w&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||Zn(C,R)))&&P.push(C);return P}function Ms(t){var i=t.length;return i?t[ei(0,i-1)]:c}function Yr(t,i,d){(d===c||bn(t[i],d))&&(d!==c||i in t)||zn(t,i,d)}function se(t,i,d){var _=t[i];tp.call(t,i)&&bn(_,d)&&(d!==c||i in t)||zn(t,i,d)}function Be(t,i){for(var c=t.length;c--;)if(bn(t[c][0],i))return c;return -1}function gc(t,i,c,d){return rN(t,function(t,_,w){i(d,t,c(t),w)}),d}function qs(t,i){return t&&Un(i,V(i),t)}function zn(t,i,c){"__proto__"==i&&tB?tB(t,i,{configurable:!0,enumerable:!0,value:c,writable:!0}):t[i]=c}function Zr(t,i){for(var d=-1,_=i.length,w=e3(_),S=null==t;++d<_;)w[d]=S?c:Si(t,i[d]);return w}function vt(t,i,d){return t==t&&(d!==c&&(t=t<=d?t:d),i!==c&&(t=t>=i?t:i)),t}function An(t,i,d,_,w,S){var P,R=1&i,T=2&i,q=4&i;if(d&&(P=w?d(t,_,w,S):d(t)),P!==c)return P;if(!K(t))return t;var B=iR(t);if(B){if(et=t.length,eh=new t.constructor(et),et&&"string"==typeof t[0]&&tp.call(t,"index")&&(eh.index=t.index,eh.input=t.input),P=eh,!R)return un(t,P)}else{var et,eh,eI,eO,eP,ex=rH(t),eR=ex==U||ex==F;if(iT(t))return hu(t,R);if(ex==ee||ex==C||eR&&!w){if(P=T||eR?{}:bu(t),!R)return T?(eI=(eP=P)&&Un(t,on(t),eP),Un(t,rU(t),eI)):(eO=qs(P,t),Un(t,rq(t),eO))}else{if(!tj[ex])return w?t:{};P=function(t,i,c){var d,_,w=t.constructor;switch(i){case ef:return fi(t);case A:case $:return new w(+t);case ep:return d=c?fi(t.buffer):t.buffer,new t.constructor(d,t.byteOffset,t.byteLength);case ed:case eg:case ey:case em:case e_:case eb:case ew:case eE:case eS:return lu(t,c);case J:return new w;case X:case ec:return new w(t);case es:return(_=new t.constructor(t.source,eJ.exec(t))).lastIndex=t.lastIndex,_;case eo:return new w;case el:return rR?te(rR.call(t)):{}}}(t,ex,R)}}S||(S=new Rn);var eC=S.get(t);if(eC)return eC;S.set(t,P),iL(t)?t.forEach(function(c){P.add(An(c,i,d,c,t,S))}):ik(t)&&t.forEach(function(c,_){P.set(_,An(c,i,d,_,t,S))});var eT=q?T?pi:li:T?on:V,eN=B?c:eT(t);return mn(eN||t,function(c,_){eN&&(c=t[_=c]),se(P,_,An(c,i,d,_,t,S))}),P}function Bs(t,i,d){var _=d.length;if(null==t)return!_;for(t=te(t);_--;){var w=d[_],S=i[w],P=t[w];if(P===c&&!(w in t)||!S(P))return!1}return!0}function Gs(t,i,_){if("function"!=typeof t)throw new to(d);return rV(function(){t.apply(c,_)},i)}function ue(t,i,c,d){var _=-1,w=Ee,S=!0,P=t.length,R=[],C=i.length;if(!P)return R;c&&(i=G(i,hn(c))),d?(w=Dr,S=!1):i.length>=200&&(w=jt,S=!1,i=new gt(i));e:for(;++_<P;){var T=t[_],A=null==c?T:c(T);if(T=d||0!==T?T:0,S&&A==A){for(var $=C;$--;)if(i[$]===A)continue e;R.push(T)}else w(i,A,d)||R.push(T)}return R}a.templateSettings={escape:eN,evaluate:ek,interpolate:eA,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=rT(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=rT(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=function(){this.__data__=r_?r_(null):{},this.size=0},dt.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},dt.prototype.get=function(t){var i=this.__data__;if(r_){var d=i[t];return d===_?c:d}return tp.call(i,t)?i[t]:c},dt.prototype.has=function(t){var i=this.__data__;return r_?i[t]!==c:tp.call(i,t)},dt.prototype.set=function(t,i){var d=this.__data__;return this.size+=this.has(t)?0:1,d[t]=r_&&i===c?_:i,this},Bn.prototype.clear=function(){this.__data__=[],this.size=0},Bn.prototype.delete=function(t){var i=this.__data__,c=Be(i,t);return!(c<0)&&(c==i.length-1?i.pop():tD.call(i,c,1),--this.size,!0)},Bn.prototype.get=function(t){var i=this.__data__,d=Be(i,t);return d<0?c:i[d][1]},Bn.prototype.has=function(t){return Be(this.__data__,t)>-1},Bn.prototype.set=function(t,i){var c=this.__data__,d=Be(c,t);return d<0?(++this.size,c.push([t,i])):c[d][1]=i,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new dt,map:new(rd||Bn),string:new dt}},Gn.prototype.delete=function(t){var i=nr(this,t).delete(t);return this.size-=i?1:0,i},Gn.prototype.get=function(t){return nr(this,t).get(t)},Gn.prototype.has=function(t){return nr(this,t).has(t)},Gn.prototype.set=function(t,i){var c=nr(this,t),d=c.size;return c.set(t,i),this.size+=c.size==d?0:1,this},gt.prototype.add=gt.prototype.push=function(t){return this.__data__.set(t,_),this},gt.prototype.has=function(t){return this.__data__.has(t)},Rn.prototype.clear=function(){this.__data__=new Bn,this.size=0},Rn.prototype.delete=function(t){var i=this.__data__,c=i.delete(t);return this.size=i.size,c},Rn.prototype.get=function(t){return this.__data__.get(t)},Rn.prototype.has=function(t){return this.__data__.has(t)},Rn.prototype.set=function(t,i){var c=this.__data__;if(c instanceof Bn){var d=c.__data__;if(!rd||d.length<199)return d.push([t,i]),this.size=++c.size,this;c=this.__data__=new Gn(d)}return c.set(t,i),this.size=c.size,this};var rN=vu($n),rk=vu(Xr,!0);function mc(t,i){var c=!0;return rN(t,function(t,d,_){return c=!!i(t,d,_)}),c}function Ge(t,i,d){for(var _=-1,w=t.length;++_<w;){var S=t[_],P=i(S);if(null!=P&&(R===c?P==P&&!pn(P):d(P,R)))var R=P,C=S}return C}function Ks(t,i){var c=[];return rN(t,function(t,d,_){i(t,d,_)&&c.push(t)}),c}function j(t,i,c,d,_){var w=-1,S=t.length;for(c||(c=ah),_||(_=[]);++w<S;){var P=t[w];i>0&&c(P)?i>1?j(P,i-1,c,d,_):nt(_,P):d||(_[_.length]=P)}return _}var rA=_u(),rL=_u(!0);function $n(t,i){return t&&rA(t,i,V)}function Xr(t,i){return t&&rL(t,i,V)}function ze(t,i){return jn(i,function(i){return Jn(t[i])})}function _t(t,i){i=st(i,t);for(var d=0,_=i.length;null!=t&&d<_;)t=t[Wn(i[d++])];return d&&d==_?t:c}function Zs(t,i,c){var d=i(t);return iR(t)?d:nt(d,c(t))}function en(t){return null==t?t===c?"[object Undefined]":"[object Null]":tH&&tH in te(t)?function(t){var i=tp.call(t,tH),d=t[tH];try{t[tH]=c;var _=!0}catch{}var w=ty.call(t);return _&&(i?t[tH]=d:delete t[tH]),w}(t):ty.call(t)}function Qr(t,i){return t>i}function Pc(t,i){return null!=t&&tp.call(t,i)}function Ac(t,i){return null!=t&&i in te(t)}function Vr(t,i,d){for(var _=d?Dr:Ee,w=t[0].length,S=t.length,P=S,R=e3(S),C=1/0,T=[];P--;){var A=t[P];P&&i&&(A=G(A,hn(i))),C=ro(A.length,C),R[P]=!d&&(i||w>=120&&A.length>=120)?new gt(P&&A):c}A=t[0];var $=-1,q=R[0];e:for(;++$<w&&T.length<C;){var U=A[$],B=i?i(U):U;if(U=d||0!==U?U:0,!(q?jt(q,B):_(T,B,d))){for(P=S;--P;){var F=R[P];if(!(F?jt(F,B):_(t[P],B,d)))continue e}q&&q.push(B),T.push(U)}}return T}function ae(t,i,d){i=st(i,t);var _=null==(t=Hu(t,i))?t:t[Wn(In(i))];return null==_?c:cn(_,t,d)}function Js(t){return Y(t)&&en(t)==C}function oe(t,i,d,_,w){return t===i||(null!=t&&null!=i&&(Y(t)||Y(i))?function(t,i,d,_,w,S){var P=iR(t),R=iR(i),U=P?T:rH(t),B=R?T:rH(i);U=U==C?ee:U,B=B==C?ee:B;var F=U==ee,et=B==ee,eh=U==B;if(eh&&iT(t)){if(!iT(i))return!1;P=!0,F=!1}if(eh&&!F)return S||(S=new Rn),P||ij(t)?Su(t,i,d,_,w,S):function(t,i,c,d,_,w,S){switch(c){case ep:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)break;t=t.buffer,i=i.buffer;case ef:return!(t.byteLength!=i.byteLength||!w(new tS(t),new tS(i)));case A:case $:case X:return bn(+t,+i);case q:return t.name==i.name&&t.message==i.message;case es:case ec:return t==i+"";case J:var P=qr;case eo:var R=1&d;if(P||(P=Se),t.size!=i.size&&!R)break;var C=S.get(t);if(C)return C==i;d|=2,S.set(t,i);var T=Su(P(t),P(i),d,_,w,S);return S.delete(t),T;case el:if(rR)return rR.call(t)==rR.call(i)}return!1}(t,i,U,d,_,w,S);if(!(1&d)){var ed=F&&tp.call(t,"__wrapped__"),eg=et&&tp.call(i,"__wrapped__");if(ed||eg){var ey=ed?t.value():t,em=eg?i.value():i;return S||(S=new Rn),w(ey,em,d,_,S)}}return!!eh&&(S||(S=new Rn),function(t,i,d,_,w,S){var P=1&d,R=li(t),C=R.length;if(C!=li(i).length&&!P)return!1;for(var T=C;T--;){var A=R[T];if(!(P?A in i:tp.call(i,A)))return!1}var $=S.get(t),q=S.get(i);if($&&q)return $==i&&q==t;var U=!0;S.set(t,i),S.set(i,t);for(var B=P;++T<C;){var F=t[A=R[T]],J=i[A];if(_)var X=P?_(J,F,A,i,t,S):_(F,J,A,t,i,S);if(!(X===c?F===J||w(F,J,d,_,S):X)){U=!1;break}B||(B="constructor"==A)}if(U&&!B){var ee=t.constructor,et=i.constructor;ee!=et&&"constructor"in t&&"constructor"in i&&!("function"==typeof ee&&ee instanceof ee&&"function"==typeof et&&et instanceof et)&&(U=!1)}return S.delete(t),S.delete(i),U}(t,i,d,_,w,S))}(t,i,d,_,oe,w):t!=t&&i!=i)}function kr(t,i,d,_){var w=d.length,S=w,P=!_;if(null==t)return!S;for(t=te(t);w--;){var R=d[w];if(P&&R[2]?R[1]!==t[R[0]]:!(R[0]in t))return!1}for(;++w<S;){var C=(R=d[w])[0],T=t[C],A=R[1];if(P&&R[2]){if(T===c&&!(C in t))return!1}else{var $=new Rn;if(_)var q=_(T,A,C,t,i,$);if(!(q===c?oe(A,T,3,_,$):q))return!1}}return!0}function Xs(t){return!(!K(t)||tg&&tg in t)&&(Jn(t)?tb:eQ).test(wt(t))}function Qs(t){return"function"==typeof t?t:null==t?fn:"object"==typeof t?iR(t)?js(t[0],t[1]):ks(t):ma(t)}function jr(t){if(!he(t))return re(t);var i=[];for(var c in te(t))tp.call(t,c)&&"constructor"!=c&&i.push(c);return i}function ni(t,i){return t<i}function Vs(t,i){var c=-1,d=an(t)?e3(t.length):[];return rN(t,function(t,_,w){d[++c]=i(t,_,w)}),d}function ks(t){var i=gi(t);return 1==i.length&&i[0][2]?Lu(i[0][0],i[0][1]):function(c){return c===t||kr(c,t,i)}}function js(t,i){var d;return _i(t)&&(d=i)==d&&!K(d)?Lu(Wn(t),i):function(d){var _=Si(d,t);return _===c&&_===i?Oi(d,t):oe(i,_,3)}}function Ke(t,i,d,_,w){t!==i&&rA(i,function(S,P){if(w||(w=new Rn),K(S))(function(t,i,d,_,w,S,P){var R=wi(t,d),C=wi(i,d),T=P.get(C);if(T){Yr(t,d,T);return}var A=S?S(R,C,d+"",t,i,P):c,$=A===c;if($){var q=iR(C),U=!q&&iT(C),B=!q&&!U&&ij(C);A=C,q||U||B?iR(R)?A=R:Z(R)?A=un(R):U?($=!1,A=hu(C,!0)):B?($=!1,A=lu(C,!0)):A=[]:pe(C)||ix(C)?(A=R,ix(R)?A=oa(R):(!K(R)||Jn(R))&&(A=bu(C))):$=!1}$&&(P.set(C,A),w(A,C,_,S,P),P.delete(C)),Yr(t,d,A)})(t,i,P,d,Ke,_,w);else{var R=_?_(wi(t,P),S,P+"",t,i,w):c;R===c&&(R=S),Yr(t,P,R)}},on)}function nu(t,i){var d=t.length;if(d)return Zn(i+=i<0?d:0,d)?t[i]:c}function tu(t,i,c){i=i.length?G(i,function(t){return iR(t)?function(i){return _t(i,1===t.length?t[0]:t)}:t}):[fn];var d=-1;return i=G(i,hn(x())),function(t,i){var c=t.length;for(t.sort(i);c--;)t[c]=t[c].value;return t}(Vs(t,function(t,c,_){return{criteria:G(i,function(i){return i(t)}),index:++d,value:t}}),function(t,i){return function(t,i,c){for(var d=-1,_=t.criteria,w=i.criteria,S=_.length,P=c.length;++d<S;){var R=pu(_[d],w[d]);if(R){if(d>=P)return R;return R*("desc"==c[d]?-1:1)}}return t.index-i.index}(t,i,c)})}function eu(t,i,c){for(var d=-1,_=i.length,w={};++d<_;){var S=i[d],P=_t(t,S);c(P,S)&&fe(w,st(S,t),P)}return w}function ti(t,i,c,d){var _=d?rf:Tt,w=-1,S=i.length,P=t;for(t===i&&(i=un(i)),c&&(P=G(t,hn(c)));++w<S;)for(var R=0,C=i[w],T=c?c(C):C;(R=_(P,T,R,d))>-1;)P!==t&&tD.call(P,R,1),tD.call(t,R,1);return t}function ru(t,i){for(var c=t?i.length:0,d=c-1;c--;){var _=i[c];if(c==d||_!==w){var w=_;Zn(_)?tD.call(t,_,1):si(t,_)}}return t}function ei(t,i){return t+t3(rl()*(i-t+1))}function ri(t,i){var c="";if(!t||i<1||i>9007199254740991)return c;do i%2&&(c+=t),(i=t3(i/2))&&(t+=t);while(i);return c}function L(t,i){return rK(Du(t,i,fn),t+"")}function fe(t,i,d,_){if(!K(t))return t;i=st(i,t);for(var w=-1,S=i.length,P=S-1,R=t;null!=R&&++w<S;){var C=Wn(i[w]),T=d;if("__proto__"===C||"constructor"===C||"prototype"===C)break;if(w!=P){var A=R[C];(T=_?_(A,C,R):c)===c&&(T=K(A)?A:Zn(i[w+1])?[]:{})}se(R,C,T),R=R[C]}return t}var rj=rb?function(t,i){return rb.set(t,i),t}:fn,rD=tB?function(t,i){return tB(t,"toString",{configurable:!0,enumerable:!1,value:bi(i),writable:!0})}:fn;function Cn(t,i,c){var d=-1,_=t.length;i<0&&(i=-i>_?0:_+i),(c=c>_?_:c)<0&&(c+=_),_=i>c?0:c-i>>>0,i>>>=0;for(var w=e3(_);++d<_;)w[d]=t[d+i];return w}function Mc(t,i){var c;return rN(t,function(t,d,_){return!(c=i(t,d,_))}),!!c}function Ye(t,i,c){var d=0,_=null==t?d:t.length;if("number"==typeof i&&i==i&&_<=2147483647){for(;d<_;){var w=d+_>>>1,S=t[w];null!==S&&!pn(S)&&(c?S<=i:S<i)?d=w+1:_=w}return _}return ii(t,i,fn,c)}function ii(t,i,d,_){var w=0,S=null==t?0:t.length;if(0===S)return 0;i=d(i);for(var P=i!=i,R=null===i,C=pn(i),T=i===c;w<S;){var A=t3((w+S)/2),$=d(t[A]),q=$!==c,U=null===$,B=$==$,F=pn($);if(P)var J=_||B;else J=T?B&&(_||q):R?B&&q&&(_||!U):C?B&&q&&!U&&(_||!F):!U&&!F&&(_?$<=i:$<i);J?w=A+1:S=A}return ro(S,4294967294)}function su(t,i){for(var c=-1,d=t.length,_=0,w=[];++c<d;){var S=t[c],P=i?i(S):S;if(!c||!bn(P,R)){var R=P;w[_++]=0===S?0:S}}return w}function uu(t){return"number"==typeof t?t:pn(t)?P:+t}function ln(t){if("string"==typeof t)return t;if(iR(t))return G(t,ln)+"";if(pn(t))return rC?rC.call(t):"";var i=t+"";return"0"==i&&1/t==-S?"-0":i}function it(t,i,c){var d=-1,_=Ee,w=t.length,S=!0,P=[],R=P;if(c)S=!1,_=Dr;else if(w>=200){var C=i?null:r$(t);if(C)return Se(C);S=!1,_=jt,R=new gt}else R=i?[]:P;e:for(;++d<w;){var T=t[d],A=i?i(T):T;if(T=c||0!==T?T:0,S&&A==A){for(var $=R.length;$--;)if(R[$]===A)continue e;i&&R.push(A),P.push(T)}else _(R,A,c)||(R!==P&&R.push(A),P.push(T))}return P}function si(t,i){return i=st(i,t),null==(t=Hu(t,i))||delete t[Wn(In(i))]}function au(t,i,c,d){return fe(t,i,c(_t(t,i)),d)}function Ze(t,i,c,d){for(var _=t.length,w=d?_:-1;(d?w--:++w<_)&&i(t[w],w,t););return c?Cn(t,d?0:w,d?w+1:_):Cn(t,d?w+1:0,d?_:w)}function ou(t,i){var c=t;return c instanceof H&&(c=c.value()),Hr(i,function(t,i){return i.func.apply(i.thisArg,nt([t],i.args))},c)}function ui(t,i,c){var d=t.length;if(d<2)return d?it(t[0]):[];for(var _=-1,w=e3(d);++_<d;)for(var S=t[_],P=-1;++P<d;)P!=_&&(w[_]=ue(w[_]||S,t[P],i,c));return it(j(w,1),i,c)}function fu(t,i,d){for(var _=-1,w=t.length,S=i.length,P={};++_<w;){var R=_<S?i[_]:c;d(P,t[_],R)}return P}function ai(t){return Z(t)?t:[]}function oi(t){return"function"==typeof t?t:fn}function st(t,i){return iR(t)?t:_i(t,i)?[t]:rG(W(t))}function ut(t,i,d){var _=t.length;return d=d===c?_:d,!i&&d>=_?t:Cn(t,i,d)}var rM=tV||function(t){return tU.clearTimeout(t)};function hu(t,i){if(i)return t.slice();var c=t.length,d=tI?tI(c):new t.constructor(c);return t.copy(d),d}function fi(t){var i=new t.constructor(t.byteLength);return new tS(i).set(new tS(t)),i}function lu(t,i){var c=i?fi(t.buffer):t.buffer;return new t.constructor(c,t.byteOffset,t.length)}function pu(t,i){if(t!==i){var d=t!==c,_=null===t,w=t==t,S=pn(t),P=i!==c,R=null===i,C=i==i,T=pn(i);if(!R&&!T&&!S&&t>i||S&&P&&C&&!R&&!T||_&&P&&C||!d&&C||!w)return 1;if(!_&&!S&&!T&&t<i||T&&d&&w&&!_&&!S||R&&d&&w||!P&&w||!C)return -1}return 0}function du(t,i,c,d){for(var _=-1,w=t.length,S=c.length,P=-1,R=i.length,C=rs(w-S,0),T=e3(R+C),A=!d;++P<R;)T[P]=i[P];for(;++_<S;)(A||_<w)&&(T[c[_]]=t[_]);for(;C--;)T[P++]=t[_++];return T}function gu(t,i,c,d){for(var _=-1,w=t.length,S=-1,P=c.length,R=-1,C=i.length,T=rs(w-P,0),A=e3(T+C),$=!d;++_<T;)A[_]=t[_];for(var q=_;++R<C;)A[q+R]=i[R];for(;++S<P;)($||_<w)&&(A[q+c[S]]=t[_++]);return A}function un(t,i){var c=-1,d=t.length;for(i||(i=e3(d));++c<d;)i[c]=t[c];return i}function Un(t,i,d,_){var w=!d;d||(d={});for(var S=-1,P=i.length;++S<P;){var R=i[S],C=_?_(d[R],t[R],R,d,t):c;C===c&&(C=t[R]),w?zn(d,R,C):se(d,R,C)}return d}function Je(t,i){return function(c,d){var _=iR(c)?Vo:gc,w=i?i():{};return _(c,t,x(d,2),w)}}function Ft(t){return L(function(i,d){var _=-1,w=d.length,S=w>1?d[w-1]:c,P=w>2?d[2]:c;for(S=t.length>3&&"function"==typeof S?(w--,S):c,P&&rn(d[0],d[1],P)&&(S=w<3?c:S,w=1),i=te(i);++_<w;){var R=d[_];R&&t(i,R,_,S)}return i})}function vu(t,i){return function(c,d){if(null==c)return c;if(!an(c))return t(c,d);for(var _=c.length,w=i?_:-1,S=te(c);(i?w--:++w<_)&&!1!==d(S[w],w,S););return c}}function _u(t){return function(i,c,d){for(var _=-1,w=te(i),S=d(i),P=S.length;P--;){var R=S[t?P:++_];if(!1===c(w[R],R,w))break}return i}}function mu(t){return function(i){var d=Lt(i=W(i))?On(i):c,_=d?d[0]:i.charAt(0),w=d?ut(d,1).join(""):i.slice(1);return _[t]()+w}}function Mt(t){return function(i){return Hr(va(ga(i).replace(tP,"")),t,"")}}function ce(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var c=rT(t.prototype),d=t.apply(c,i);return K(d)?d:c}}function wu(t){return function(i,d,_){var w=te(i);if(!an(i)){var S=x(d,3);i=V(i),d=function(t){return S(w[t],t,w)}}var P=t(i,d,_);return P>-1?w[S?i[P]:P]:c}}function Pu(t){return Yn(function(i){var _=i.length,w=_,S=Pn.prototype.thru;for(t&&i.reverse();w--;){var P=i[w];if("function"!=typeof P)throw new to(d);if(S&&!R&&"wrapper"==je(P))var R=new Pn([],!0)}for(w=R?w:_;++w<_;){var C=je(P=i[w]),T="wrapper"==C?rz(P):c;R=T&&mi(T[0])&&424==T[1]&&!T[4].length&&1==T[9]?R[je(T[0])].apply(R,T[3]):1==P.length&&mi(P)?R[C]():R.thru(P)}return function(){var t=arguments,c=t[0];if(R&&1==t.length&&iR(c))return R.plant(c).value();for(var d=0,w=_?i[d].apply(this,t):c;++d<_;)w=i[d].call(this,w);return w}})}function Xe(t,i,d,_,w,S,P,R,C,T){var A=128&i,$=1&i,q=2&i,U=24&i,B=512&i,F=q?c:ce(t);return function y(){for(var J=arguments.length,X=e3(J),ee=J;ee--;)X[ee]=arguments[ee];if(U)var et=qt(y),es=function(t,i){for(var c=t.length,d=0;c--;)t[c]===i&&++d;return d}(X,et);if(_&&(X=du(X,_,w,U)),S&&(X=gu(X,S,P,U)),J-=es,U&&J<T){var eo=tt(X,et);return Iu(t,i,Xe,y.placeholder,d,X,eo,R,C,T-J)}var ec=$?d:this,el=q?ec[t]:t;return J=X.length,R?X=function(t,i){for(var d=t.length,_=ro(i.length,d),w=un(t);_--;){var S=i[_];t[_]=Zn(S,d)?w[S]:c}return t}(X,R):B&&J>1&&X.reverse(),A&&C<J&&(X.length=C),this&&this!==tU&&this instanceof y&&(el=F||ce(el)),el.apply(ec,X)}}function Au(t,i){return function(c,d){var _,w;return _=i(d),w={},$n(c,function(i,c,d){t(w,_(i),c,d)}),w}}function Qe(t,i){return function(d,_){var w;if(d===c&&_===c)return i;if(d!==c&&(w=d),_!==c){if(w===c)return _;"string"==typeof d||"string"==typeof _?(d=ln(d),_=ln(_)):(d=uu(d),_=uu(_)),w=t(d,_)}return w}}function ci(t){return Yn(function(i){return i=G(i,hn(x())),L(function(c){var d=this;return t(i,function(t){return cn(t,d,c)})})})}function Ve(t,i){var d=(i=i===c?" ":ln(i)).length;if(d<2)return d?ri(i,t):i;var _=ri(i,t6(t/Dt(i)));return Lt(i)?ut(On(_),0,t).join(""):_.slice(0,t)}function Cu(t){return function(i,d,_){return _&&"number"!=typeof _&&rn(i,d,_)&&(d=_=c),i=Xn(i),d===c?(d=i,i=0):d=Xn(d),_=_===c?i<d?1:-1:Xn(_),function(t,i,c,d){for(var _=-1,w=rs(t6((i-t)/(c||1)),0),S=e3(w);w--;)S[d?w:++_]=t,t+=c;return S}(i,d,_,t)}}function ke(t){return function(i,c){return"string"==typeof i&&"string"==typeof c||(i=xn(i),c=xn(c)),t(i,c)}}function Iu(t,i,d,_,w,S,P,R,C,T){var A=8&i,$=A?P:c,q=A?c:P,U=A?S:c,B=A?c:S;i|=A?32:64,4&(i&=~(A?64:32))||(i&=-4);var F=[t,i,w,U,$,B,q,R,C,T],J=d.apply(c,F);return mi(t)&&rW(J,F),J.placeholder=_,$u(J,t,i)}function hi(t){var i=e7[t];return function(t,c){if(t=xn(t),(c=null==c?0:ro(b(c),292))&&t9(t)){var d=(W(t)+"e").split("e");return+((d=(W(i(d[0]+"e"+(+d[1]+c)))+"e").split("e"))[0]+"e"+(+d[1]-c))}return i(t)}}var r$=ry&&1/Se(new ry([,-0]))[1]==S?function(t){return new ry(t)}:Di;function xu(t){return function(i){var c,d,_=rH(i);return _==J?qr(i):_==eo?(c=-1,d=Array(i.size),i.forEach(function(t){d[++c]=[t,t]}),d):G(t(i),function(t){return[t,i[t]]})}}function Kn(t,i,_,S,P,R,C,T){var A=2&i;if(!A&&"function"!=typeof t)throw new to(d);var $=S?S.length:0;if($||(i&=-97,S=P=c),C=C===c?C:rs(b(C),0),T=T===c?T:b(T),$-=P?P.length:0,64&i){var q=S,U=P;S=P=c}var B=A?c:rz(t),F=[t,i,_,S,P,q,U,R,C,T];if(B&&function(t,i){var c=t[1],d=i[1],_=c|d,S=_<131,P=128==d&&8==c||128==d&&256==c&&t[7].length<=i[8]||384==d&&i[7].length<=i[8]&&8==c;if(S||P){1&d&&(t[2]=i[2],_|=1&c?0:4);var R=i[3];if(R){var C=t[3];t[3]=C?du(C,R,i[4]):R,t[4]=C?tt(t[3],w):i[4]}(R=i[5])&&(C=t[5],t[5]=C?gu(C,R,i[6]):R,t[6]=C?tt(t[5],w):i[6]),(R=i[7])&&(t[7]=R),128&d&&(t[8]=null==t[8]?i[8]:ro(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=_}}(F,B),t=F[0],i=F[1],_=F[2],S=F[3],P=F[4],(T=F[9]=F[9]===c?A?0:t.length:rs(F[9]-$,0))||!(24&i)||(i&=-25),i&&1!=i)8==i||16==i?(J=t,X=i,ee=T,et=ce(J),e_=function s(){for(var t=arguments.length,i=e3(t),d=t,_=qt(s);d--;)i[d]=arguments[d];var w=t<3&&i[0]!==_&&i[t-1]!==_?[]:tt(i,_);return(t-=w.length)<ee?Iu(J,X,Xe,s.placeholder,c,i,w,c,c,ee-t):cn(this&&this!==tU&&this instanceof s?et:J,this,i)}):32!=i&&33!=i||P.length?e_=Xe.apply(c,F):(es=t,eo=i,ec=_,el=S,eh=1&eo,ef=ce(es),e_=function f(){for(var t=-1,i=arguments.length,c=-1,d=el.length,_=e3(d+i),w=this&&this!==tU&&this instanceof f?ef:es;++c<d;)_[c]=el[c];for(;i--;)_[c++]=arguments[++t];return cn(w,eh?ec:this,_)});else var J,X,ee,et,es,eo,ec,el,eh,ef,ep,ed,eg,ey,em,e_=(ep=t,ed=i,eg=_,ey=1&ed,em=ce(ep),function o(){return(this&&this!==tU&&this instanceof o?em:ep).apply(ey?eg:this,arguments)});return $u((B?rj:rW)(e_,F),t,i)}function Eu(t,i,d,_){return t===c||bn(t,tl[d])&&!tp.call(_,d)?i:t}function yu(t,i,d,_,w,S){return K(t)&&K(i)&&(S.set(i,t),Ke(t,i,c,yu,S),S.delete(i)),t}function kc(t){return pe(t)?c:t}function Su(t,i,d,_,w,S){var P=1&d,R=t.length,C=i.length;if(R!=C&&!(P&&C>R))return!1;var T=S.get(t),A=S.get(i);if(T&&A)return T==i&&A==t;var $=-1,q=!0,U=2&d?new gt:c;for(S.set(t,i),S.set(i,t);++$<R;){var B=t[$],F=i[$];if(_)var J=P?_(F,B,$,i,t,S):_(B,F,$,t,i,S);if(J!==c){if(J)continue;q=!1;break}if(U){if(!Nr(i,function(t,i){if(!jt(U,i)&&(B===t||w(B,t,d,_,S)))return U.push(i)})){q=!1;break}}else if(!(B===F||w(B,F,d,_,S))){q=!1;break}}return S.delete(t),S.delete(i),q}function Yn(t){return rK(Du(t,c,Bu),t+"")}function li(t){return Zs(t,V,rq)}function pi(t){return Zs(t,on,rU)}var rz=rb?function(t){return rb.get(t)}:Di;function je(t){for(var i=t.name+"",c=rw[i],d=tp.call(rw,i)?c.length:0;d--;){var _=c[d],w=_.func;if(null==w||w==t)return _.name}return i}function qt(t){return(tp.call(a,"placeholder")?a:t).placeholder}function x(){var t=a.iteratee||Ti;return t=t===Ti?Qs:t,arguments.length?t(arguments[0],arguments[1]):t}function nr(t,i){var c,d=t.__data__;return("string"==(c=typeof i)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==i:null===i)?d["string"==typeof i?"string":"hash"]:d.map}function gi(t){for(var i=V(t),c=i.length;c--;){var d=i[c],_=t[d];i[c]=[d,_,_==_&&!K(_)]}return i}function mt(t,i){var d=null==t?c:t[i];return Xs(d)?d:c}var rq=t4?function(t){return null==t?[]:jn(t4(t=te(t)),function(i){return tT.call(t,i)})}:Hi,rU=t4?function(t){for(var i=[];t;)nt(i,rq(t)),t=tO(t);return i}:Hi,rH=en;function Ru(t,i,c){i=st(i,t);for(var d=-1,_=i.length,w=!1;++d<_;){var S=Wn(i[d]);if(!(w=null!=t&&c(t,S)))break;t=t[S]}return w||++d!=_?w:!!(_=null==t?0:t.length)&&ar(_)&&Zn(S,_)&&(iR(t)||ix(t))}function bu(t){return"function"!=typeof t.constructor||he(t)?{}:rT(tO(t))}function ah(t){return iR(t)||ix(t)||!!(tz&&t&&t[tz])}function Zn(t,i){var c=typeof t;return!!(i=i??9007199254740991)&&("number"==c||"symbol"!=c&&e0.test(t))&&t>-1&&t%1==0&&t<i}function rn(t,i,c){if(!K(c))return!1;var d=typeof i;return("number"==d?!!(an(c)&&Zn(i,c.length)):"string"==d&&i in c)&&bn(c[i],t)}function _i(t,i){if(iR(t))return!1;var c=typeof t;return!!("number"==c||"symbol"==c||"boolean"==c||null==t||pn(t))||ej.test(t)||!eL.test(t)||null!=i&&t in te(i)}function mi(t){var i=je(t),c=a[i];if("function"!=typeof c||!(i in H.prototype))return!1;if(t===c)return!0;var d=rz(c);return!!d&&t===d[0]}(rp&&rH(new rp(new ArrayBuffer(1)))!=ep||rd&&rH(new rd)!=J||rg&&rH(rg.resolve())!=et||ry&&rH(new ry)!=eo||rm&&rH(new rm)!=eh)&&(rH=function(t){var i=en(t),d=i==ee?t.constructor:c,_=d?wt(d):"";if(_)switch(_){case rE:return ep;case rS:return J;case rI:return et;case rO:return eo;case rP:return eh}return i});var rB=th?Jn:Ni;function he(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||tl)}function Lu(t,i){return function(d){return null!=d&&d[t]===i&&(i!==c||t in te(d))}}function Du(t,i,d){return i=rs(i===c?t.length-1:i,0),function(){for(var c=arguments,_=-1,w=rs(c.length-i,0),S=e3(w);++_<w;)S[_]=c[i+_];_=-1;for(var P=e3(i+1);++_<i;)P[_]=c[_];return P[i]=d(S),cn(t,this,P)}}function Hu(t,i){return i.length<2?t:_t(t,Cn(i,0,-1))}function wi(t,i){if(!("constructor"===i&&"function"==typeof t[i])&&"__proto__"!=i)return t[i]}var rW=Uu(rj),rV=tX||function(t,i){return tU.setTimeout(t,i)},rK=Uu(rD);function $u(t,i,c){var d,_,w=i+"";return rK(t,function(t,i){var c=i.length;if(!c)return t;var d=c-1;return i[d]=(c>1?"& ":"")+i[d],i=i.join(c>2?", ":" "),t.replace(eH,`{
/* [wrapped with `+i+`] */
`)}(w,(d=(_=w.match(eB))?_[1].split(eW):[],mn(R,function(t){var i="_."+t[0];c&t[1]&&!Ee(d,i)&&d.push(i)}),d.sort())))}function Uu(t){var i=0,d=0;return function(){var _=ra(),w=16-(_-d);if(d=_,w>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(c,arguments)}}function tr(t,i){var d=-1,_=t.length,w=_-1;for(i=i===c?_:i;++d<i;){var S=ei(d,w),P=t[S];t[S]=t[d],t[d]=P}return t.length=i,t}var rG=(eU=(B=sr(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(eD,function(t,c,d,_){i.push(d?_.replace(eG,"$1"):c||t)}),i},function(t){return 500===eU.size&&eU.clear(),t})).cache,B);function Wn(t){if("string"==typeof t||pn(t))return t;var i=t+"";return"0"==i&&1/t==-S?"-0":i}function wt(t){if(null!=t){try{return tf.call(t)}catch{}try{return t+""}catch{}}return""}function Fu(t){if(t instanceof H)return t.clone();var i=new Pn(t.__wrapped__,t.__chain__);return i.__actions__=un(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var rF=L(function(t,i){return Z(t)?ue(t,j(i,1,Z,!0)):[]}),rJ=L(function(t,i){var d=In(i);return Z(d)&&(d=c),Z(t)?ue(t,j(i,1,Z,!0),x(d,2)):[]}),rY=L(function(t,i){var d=In(i);return Z(d)&&(d=c),Z(t)?ue(t,j(i,1,Z,!0),c,d):[]});function Mu(t,i,c){var d=null==t?0:t.length;if(!d)return -1;var _=null==c?0:b(c);return _<0&&(_=rs(d+_,0)),ye(t,x(i,3),_)}function qu(t,i,d){var _=null==t?0:t.length;if(!_)return -1;var w=_-1;return d!==c&&(w=b(d),w=d<0?rs(_+w,0):ro(w,_-1)),ye(t,x(i,3),w,!0)}function Bu(t){return(null==t?0:t.length)?j(t,1):[]}function Gu(t){return t&&t.length?t[0]:c}var rZ=L(function(t){var i=G(t,ai);return i.length&&i[0]===t[0]?Vr(i):[]}),rQ=L(function(t){var i=In(t),d=G(t,ai);return i===In(d)?i=c:d.pop(),d.length&&d[0]===t[0]?Vr(d,x(i,2)):[]}),rX=L(function(t){var i=In(t),d=G(t,ai);return(i="function"==typeof i?i:c)&&d.pop(),d.length&&d[0]===t[0]?Vr(d,c,i):[]});function In(t){var i=null==t?0:t.length;return i?t[i-1]:c}var r0=L(zu);function zu(t,i){return t&&t.length&&i&&i.length?ti(t,i):t}var r1=Yn(function(t,i){var c=null==t?0:t.length,d=Zr(t,i);return ru(t,G(i,function(t){return Zn(t,c)?+t:t}).sort(pu)),d});function Ai(t){return null==t?t:rh.call(t)}var r5=L(function(t){return it(j(t,1,Z,!0))}),r2=L(function(t){var i=In(t);return Z(i)&&(i=c),it(j(t,1,Z,!0),x(i,2))}),r6=L(function(t){var i=In(t);return i="function"==typeof i?i:c,it(j(t,1,Z,!0),c,i)});function Ci(t){if(!(t&&t.length))return[];var i=0;return t=jn(t,function(t){if(Z(t))return i=rs(t.length,i),!0}),Fr(i,function(i){return G(t,$r(i))})}function Ku(t,i){if(!(t&&t.length))return[];var d=Ci(t);return null==i?d:G(d,function(t){return cn(i,c,t)})}var r3=L(function(t,i){return Z(t)?ue(t,i):[]}),r4=L(function(t){return ui(jn(t,Z))}),r8=L(function(t){var i=In(t);return Z(i)&&(i=c),ui(jn(t,Z),x(i,2))}),r9=L(function(t){var i=In(t);return i="function"==typeof i?i:c,ui(jn(t,Z),c,i)}),r7=L(Ci),ie=L(function(t){var i=t.length,d=i>1?t[i-1]:c;return d="function"==typeof d?(t.pop(),d):c,Ku(t,d)});function Yu(t){var i=a(t);return i.__chain__=!0,i}function er(t,i){return i(t)}var ir=Yn(function(t){var i=t.length,d=i?t[0]:0,_=this.__wrapped__,s=function(i){return Zr(i,t)};return!(i>1)&&!this.__actions__.length&&_ instanceof H&&Zn(d)?((_=_.slice(d,+d+(i?1:0))).__actions__.push({func:er,args:[s],thisArg:c}),new Pn(_,this.__chain__).thru(function(t){return i&&!t.length&&t.push(c),t})):this.thru(s)}),is=Je(function(t,i,c){tp.call(t,c)?++t[c]:zn(t,c,1)}),io=wu(Mu),ic=wu(qu);function Zu(t,i){return(iR(t)?mn:rN)(t,x(i,3))}function Ju(t,i){return(iR(t)?function(t,i){for(var c=null==t?0:t.length;c--&&!1!==i(t[c],c,t););return t}:rk)(t,x(i,3))}var il=Je(function(t,i,c){tp.call(t,c)?t[c].push(i):zn(t,c,[i])}),iu=L(function(t,i,c){var d=-1,_="function"==typeof i,w=an(t)?e3(t.length):[];return rN(t,function(t){w[++d]=_?cn(i,t,c):ae(t,i,c)}),w}),ih=Je(function(t,i,c){zn(t,c,i)});function rr(t,i){return(iR(t)?G:Vs)(t,x(i,3))}var ip=Je(function(t,i,c){t[c?0:1].push(i)},function(){return[[],[]]}),id=L(function(t,i){if(null==t)return[];var c=i.length;return c>1&&rn(t,i[0],i[1])?i=[]:c>2&&rn(i[0],i[1],i[2])&&(i=[i[0]]),tu(t,j(i,1),[])}),ig=tK||function(){return tU.Date.now()};function Xu(t,i,d){return i=d?c:i,i=t&&null==i?t.length:i,Kn(t,128,c,c,c,c,i)}function Qu(t,i){var _;if("function"!=typeof i)throw new to(d);return t=b(t),function(){return--t>0&&(_=i.apply(this,arguments)),t<=1&&(i=c),_}}var iy=L(function(t,i,c){var d=1;if(c.length){var _=tt(c,qt(iy));d|=32}return Kn(t,d,i,c,_)}),im=L(function(t,i,c){var d=3;if(c.length){var _=tt(c,qt(im));d|=32}return Kn(i,d,t,c,_)});function na(t,i,_){var w,S,P,R,C,T,A=0,$=!1,q=!1,U=!0;if("function"!=typeof t)throw new to(d);function I(i){var d=w,_=S;return w=S=c,A=i,R=t.apply(_,d)}function y(t){var d=t-T,_=t-A;return T===c||d>=i||d<0||q&&_>=P}function D(){var t,c,d,_=ig();if(y(_))return N(_);C=rV(D,(t=_-T,c=_-A,d=i-t,q?ro(d,P-c):d))}function N(t){return C=c,U&&w?I(t):(w=S=c,R)}function gn(){var t,d=ig(),_=y(d);if(w=arguments,S=this,T=d,_){if(C===c)return A=t=T,C=rV(D,i),$?I(t):R;if(q)return rM(C),C=rV(D,i),I(T)}return C===c&&(C=rV(D,i)),R}return i=xn(i)||0,K(_)&&($=!!_.leading,P=(q="maxWait"in _)?rs(xn(_.maxWait)||0,i):P,U="trailing"in _?!!_.trailing:U),gn.cancel=function(){C!==c&&rM(C),A=0,w=T=S=C=c},gn.flush=function(){return C===c?R:N(ig())},gn}var i_=L(function(t,i){return Gs(t,1,i)}),ib=L(function(t,i,c){return Gs(t,xn(i)||0,c)});function sr(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new to(d);var e=function(){var c=arguments,d=i?i.apply(this,c):c[0],_=e.cache;if(_.has(d))return _.get(d);var w=t.apply(this,c);return e.cache=_.set(d,w)||_,w};return e.cache=new(sr.Cache||Gn),e}function ur(t){if("function"!=typeof t)throw new to(d);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}sr.Cache=Gn;var iw=L(function(t,i){var c=(i=1==i.length&&iR(i[0])?G(i[0],hn(x())):G(j(i,1),hn(x()))).length;return L(function(d){for(var _=-1,w=ro(d.length,c);++_<w;)d[_]=i[_].call(this,d[_]);return cn(t,this,d)})}),iE=L(function(t,i){var d=tt(i,qt(iE));return Kn(t,32,c,i,d)}),iS=L(function(t,i){var d=tt(i,qt(iS));return Kn(t,64,c,i,d)}),iI=Yn(function(t,i){return Kn(t,256,c,c,c,i)});function bn(t,i){return t===i||t!=t&&i!=i}var iO=ke(Qr),iP=ke(function(t,i){return t>=i}),ix=Js(function(){return arguments}())?Js:function(t){return Y(t)&&tp.call(t,"callee")&&!tT.call(t,"callee")},iR=e3.isArray,iC=tG?hn(tG):function(t){return Y(t)&&en(t)==ef};function an(t){return null!=t&&ar(t.length)&&!Jn(t)}function Z(t){return Y(t)&&an(t)}var iT=t8||Ni,iN=tF?hn(tF):function(t){return Y(t)&&en(t)==$};function Ei(t){if(!Y(t))return!1;var i=en(t);return i==q||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!pe(t)}function Jn(t){if(!K(t))return!1;var i=en(t);return i==U||i==F||"[object AsyncFunction]"==i||"[object Proxy]"==i}function ea(t){return"number"==typeof t&&t==b(t)}function ar(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function K(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function Y(t){return null!=t&&"object"==typeof t}var ik=tJ?hn(tJ):function(t){return Y(t)&&rH(t)==J};function ia(t){return"number"==typeof t||Y(t)&&en(t)==X}function pe(t){if(!Y(t)||en(t)!=ee)return!1;var i=tO(t);if(null===i)return!0;var c=tp.call(i,"constructor")&&i.constructor;return"function"==typeof c&&c instanceof c&&tf.call(c)==tm}var iA=tY?hn(tY):function(t){return Y(t)&&en(t)==es},iL=tZ?hn(tZ):function(t){return Y(t)&&rH(t)==eo};function or(t){return"string"==typeof t||!iR(t)&&Y(t)&&en(t)==ec}function pn(t){return"symbol"==typeof t||Y(t)&&en(t)==el}var ij=tQ?hn(tQ):function(t){return Y(t)&&ar(t.length)&&!!tL[en(t)]},iD=ke(ni),iM=ke(function(t,i){return t<=i});function ua(t){if(!t)return[];if(an(t))return or(t)?On(t):un(t);if(tq&&t[tq])return function(t){for(var i,c=[];!(i=t.next()).done;)c.push(i.value);return c}(t[tq]());var i=rH(t);return(i==J?qr:i==eo?Se:Gt)(t)}function Xn(t){return t?(t=xn(t))===S||t===-S?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function b(t){var i=Xn(t),c=i%1;return i==i?c?i-c:i:0}function aa(t){return t?vt(b(t),0,4294967295):0}function xn(t){if("number"==typeof t)return t;if(pn(t))return P;if(K(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=K(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=ys(t);var c=eZ.test(t);return c||eX.test(t)?t$(t.slice(2),c?2:8):eY.test(t)?P:+t}function oa(t){return Un(t,on(t))}function W(t){return null==t?"":ln(t)}var i$=Ft(function(t,i){if(he(i)||an(i)){Un(i,V(i),t);return}for(var c in i)tp.call(i,c)&&se(t,c,i[c])}),iz=Ft(function(t,i){Un(i,on(i),t)}),iq=Ft(function(t,i,c,d){Un(i,on(i),t,d)}),iU=Ft(function(t,i,c,d){Un(i,V(i),t,d)}),iH=Yn(Zr),iB=L(function(t,i){t=te(t);var d=-1,_=i.length,w=_>2?i[2]:c;for(w&&rn(i[0],i[1],w)&&(_=1);++d<_;)for(var S=i[d],P=on(S),R=-1,C=P.length;++R<C;){var T=P[R],A=t[T];(A===c||bn(A,tl[T])&&!tp.call(t,T))&&(t[T]=S[T])}return t}),iW=L(function(t){return t.push(c,yu),cn(iJ,c,t)});function Si(t,i,d){var _=null==t?c:_t(t,i);return _===c?d:_}function Oi(t,i){return null!=t&&Ru(t,i,Ac)}var iV=Au(function(t,i,c){null!=i&&"function"!=typeof i.toString&&(i=ty.call(i)),t[i]=c},bi(fn)),iK=Au(function(t,i,c){null!=i&&"function"!=typeof i.toString&&(i=ty.call(i)),tp.call(t,i)?t[i].push(c):t[i]=[c]},x),iG=L(ae);function V(t){return an(t)?Fs(t):jr(t)}function on(t){return an(t)?Fs(t,!0):function(t){if(!K(t))return function(t){var i=[];if(null!=t)for(var c in te(t))i.push(c);return i}(t);var i=he(t),c=[];for(var d in t)"constructor"==d&&(i||!tp.call(t,d))||c.push(d);return c}(t)}var iF=Ft(function(t,i,c){Ke(t,i,c)}),iJ=Ft(function(t,i,c,d){Ke(t,i,c,d)}),iY=Yn(function(t,i){var c={};if(null==t)return c;var d=!1;i=G(i,function(i){return i=st(i,t),d||(d=i.length>1),i}),Un(t,pi(t),c),d&&(c=An(c,7,kc));for(var _=i.length;_--;)si(c,i[_]);return c}),iZ=Yn(function(t,i){return null==t?{}:eu(t,i,function(i,c){return Oi(t,c)})});function ha(t,i){if(null==t)return{};var c=G(pi(t),function(t){return[t]});return i=x(i),eu(t,c,function(t,c){return i(t,c[0])})}var iQ=xu(V),iX=xu(on);function Gt(t){return null==t?[]:Mr(t,V(t))}var i0=Mt(function(t,i,c){return i=i.toLowerCase(),t+(c?da(i):i)});function da(t){return i8(W(t).toLowerCase())}function ga(t){return(t=W(t))&&t.replace(e1,t0).replace(tx,"")}var i1=Mt(function(t,i,c){return t+(c?"-":"")+i.toLowerCase()}),i5=Mt(function(t,i,c){return t+(c?" ":"")+i.toLowerCase()}),i2=mu("toLowerCase"),i6=Mt(function(t,i,c){return t+(c?"_":"")+i.toLowerCase()}),i3=Mt(function(t,i,c){return t+(c?" ":"")+i8(i)}),i4=Mt(function(t,i,c){return t+(c?" ":"")+i.toUpperCase()}),i8=mu("toUpperCase");function va(t,i,d){var _;return t=W(t),(i=d?c:i)===c?(_=t,tN.test(_))?t.match(tC)||[]:t.match(eV)||[]:t.match(i)||[]}var i9=L(function(t,i){try{return cn(t,c,i)}catch(t){return Ei(t)?t:new e8(t)}}),i7=Yn(function(t,i){return mn(i,function(i){zn(t,i=Wn(i),iy(t[i],t))}),t});function bi(t){return function(){return t}}var nn=Pu(),ns=Pu(!0);function fn(t){return t}function Ti(t){return Qs("function"==typeof t?t:An(t,1))}var no=L(function(t,i){return function(c){return ae(c,t,i)}}),nc=L(function(t,i){return function(c){return ae(t,c,i)}});function Li(t,i,c){var d=V(i),_=ze(i,d);null!=c||K(i)&&(_.length||!d.length)||(c=i,i=t,t=this,_=ze(i,V(i)));var w=!(K(c)&&"chain"in c)||!!c.chain,S=Jn(t);return mn(_,function(c){var d=i[c];t[c]=d,S&&(t.prototype[c]=function(){var i=this.__chain__;if(w||i){var c=t(this.__wrapped__);return(c.__actions__=un(this.__actions__)).push({func:d,args:arguments,thisArg:t}),c.__chain__=i,c}return d.apply(t,nt([this.value()],arguments))})}),t}function Di(){}var nl=ci(G),nh=ci(As),nf=ci(Nr);function ma(t){return _i(t)?$r(Wn(t)):function(i){return _t(i,t)}}var np=Cu(),nd=Cu(!0);function Hi(){return[]}function Ni(){return!1}var ng=Qe(function(t,i){return t+i},0),ny=hi("ceil"),nm=Qe(function(t,i){return t/i},1),n_=hi("floor"),nb=Qe(function(t,i){return t*i},1),nw=hi("round"),nE=Qe(function(t,i){return t-i},0);return a.after=function(t,i){if("function"!=typeof i)throw new to(d);return t=b(t),function(){if(--t<1)return i.apply(this,arguments)}},a.ary=Xu,a.assign=i$,a.assignIn=iz,a.assignInWith=iq,a.assignWith=iU,a.at=iH,a.before=Qu,a.bind=iy,a.bindAll=i7,a.bindKey=im,a.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return iR(t)?t:[t]},a.chain=Yu,a.chunk=function(t,i,d){i=(d?rn(t,i,d):i===c)?1:rs(b(i),0);var _=null==t?0:t.length;if(!_||i<1)return[];for(var w=0,S=0,P=e3(t6(_/i));w<_;)P[S++]=Cn(t,w,w+=i);return P},a.compact=function(t){for(var i=-1,c=null==t?0:t.length,d=0,_=[];++i<c;){var w=t[i];w&&(_[d++]=w)}return _},a.concat=function(){var t=arguments.length;if(!t)return[];for(var i=e3(t-1),c=arguments[0],d=t;d--;)i[d-1]=arguments[d];return nt(iR(c)?un(c):[c],j(i,1))},a.cond=function(t){var i=null==t?0:t.length,c=x();return t=i?G(t,function(t){if("function"!=typeof t[1])throw new to(d);return[c(t[0]),t[1]]}):[],L(function(c){for(var d=-1;++d<i;){var _=t[d];if(cn(_[0],this,c))return cn(_[1],this,c)}})},a.conforms=function(t){var i,c;return c=V(i=An(t,1)),function(t){return Bs(t,i,c)}},a.constant=bi,a.countBy=is,a.create=function(t,i){var c=rT(t);return null==i?c:qs(c,i)},a.curry=function ku(t,i,d){i=d?c:i;var _=Kn(t,8,c,c,c,c,c,i);return _.placeholder=ku.placeholder,_},a.curryRight=function ju(t,i,d){i=d?c:i;var _=Kn(t,16,c,c,c,c,c,i);return _.placeholder=ju.placeholder,_},a.debounce=na,a.defaults=iB,a.defaultsDeep=iW,a.defer=i_,a.delay=ib,a.difference=rF,a.differenceBy=rJ,a.differenceWith=rY,a.drop=function(t,i,d){var _=null==t?0:t.length;return _?Cn(t,(i=d||i===c?1:b(i))<0?0:i,_):[]},a.dropRight=function(t,i,d){var _=null==t?0:t.length;return _?Cn(t,0,(i=_-(i=d||i===c?1:b(i)))<0?0:i):[]},a.dropRightWhile=function(t,i){return t&&t.length?Ze(t,x(i,3),!0,!0):[]},a.dropWhile=function(t,i){return t&&t.length?Ze(t,x(i,3),!0):[]},a.fill=function(t,i,d,_){var w=null==t?0:t.length;return w?(d&&"number"!=typeof d&&rn(t,i,d)&&(d=0,_=w),function(t,i,d,_){var w=t.length;for((d=b(d))<0&&(d=-d>w?0:w+d),(_=_===c||_>w?w:b(_))<0&&(_+=w),_=d>_?0:aa(_);d<_;)t[d++]=i;return t}(t,i,d,_)):[]},a.filter=function(t,i){return(iR(t)?jn:Ks)(t,x(i,3))},a.flatMap=function(t,i){return j(rr(t,i),1)},a.flatMapDeep=function(t,i){return j(rr(t,i),S)},a.flatMapDepth=function(t,i,d){return d=d===c?1:b(d),j(rr(t,i),d)},a.flatten=Bu,a.flattenDeep=function(t){return(null==t?0:t.length)?j(t,S):[]},a.flattenDepth=function(t,i){return(null==t?0:t.length)?j(t,i=i===c?1:b(i)):[]},a.flip=function(t){return Kn(t,512)},a.flow=nn,a.flowRight=ns,a.fromPairs=function(t){for(var i=-1,c=null==t?0:t.length,d={};++i<c;){var _=t[i];d[_[0]]=_[1]}return d},a.functions=function(t){return null==t?[]:ze(t,V(t))},a.functionsIn=function(t){return null==t?[]:ze(t,on(t))},a.groupBy=il,a.initial=function(t){return(null==t?0:t.length)?Cn(t,0,-1):[]},a.intersection=rZ,a.intersectionBy=rQ,a.intersectionWith=rX,a.invert=iV,a.invertBy=iK,a.invokeMap=iu,a.iteratee=Ti,a.keyBy=ih,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=function(t,i){var c={};return i=x(i,3),$n(t,function(t,d,_){zn(c,i(t,d,_),t)}),c},a.mapValues=function(t,i){var c={};return i=x(i,3),$n(t,function(t,d,_){zn(c,d,i(t,d,_))}),c},a.matches=function(t){return ks(An(t,1))},a.matchesProperty=function(t,i){return js(t,An(i,1))},a.memoize=sr,a.merge=iF,a.mergeWith=iJ,a.method=no,a.methodOf=nc,a.mixin=Li,a.negate=ur,a.nthArg=function(t){return t=b(t),L(function(i){return nu(i,t)})},a.omit=iY,a.omitBy=function(t,i){return ha(t,ur(x(i)))},a.once=function(t){return Qu(2,t)},a.orderBy=function(t,i,d,_){return null==t?[]:(iR(i)||(i=null==i?[]:[i]),iR(d=_?c:d)||(d=null==d?[]:[d]),tu(t,i,d))},a.over=nl,a.overArgs=iw,a.overEvery=nh,a.overSome=nf,a.partial=iE,a.partialRight=iS,a.partition=ip,a.pick=iZ,a.pickBy=ha,a.property=ma,a.propertyOf=function(t){return function(i){return null==t?c:_t(t,i)}},a.pull=r0,a.pullAll=zu,a.pullAllBy=function(t,i,c){return t&&t.length&&i&&i.length?ti(t,i,x(c,2)):t},a.pullAllWith=function(t,i,d){return t&&t.length&&i&&i.length?ti(t,i,c,d):t},a.pullAt=r1,a.range=np,a.rangeRight=nd,a.rearg=iI,a.reject=function(t,i){return(iR(t)?jn:Ks)(t,ur(x(i,3)))},a.remove=function(t,i){var c=[];if(!(t&&t.length))return c;var d=-1,_=[],w=t.length;for(i=x(i,3);++d<w;){var S=t[d];i(S,d,t)&&(c.push(S),_.push(d))}return ru(t,_),c},a.rest=function(t,i){if("function"!=typeof t)throw new to(d);return L(t,i=i===c?i:b(i))},a.reverse=Ai,a.sampleSize=function(t,i,d){return i=(d?rn(t,i,d):i===c)?1:b(i),(iR(t)?function(t,i){return tr(un(t),vt(i,0,t.length))}:function(t,i){var c=Gt(t);return tr(c,vt(i,0,c.length))})(t,i)},a.set=function(t,i,c){return null==t?t:fe(t,i,c)},a.setWith=function(t,i,d,_){return _="function"==typeof _?_:c,null==t?t:fe(t,i,d,_)},a.shuffle=function(t){return(iR(t)?function(t){return tr(un(t))}:function(t){return tr(Gt(t))})(t)},a.slice=function(t,i,d){var _=null==t?0:t.length;return _?(d&&"number"!=typeof d&&rn(t,i,d)?(i=0,d=_):(i=null==i?0:b(i),d=d===c?_:b(d)),Cn(t,i,d)):[]},a.sortBy=id,a.sortedUniq=function(t){return t&&t.length?su(t):[]},a.sortedUniqBy=function(t,i){return t&&t.length?su(t,x(i,2)):[]},a.split=function(t,i,d){return d&&"number"!=typeof d&&rn(t,i,d)&&(i=d=c),(d=d===c?4294967295:d>>>0)?(t=W(t))&&("string"==typeof i||null!=i&&!iA(i))&&!(i=ln(i))&&Lt(t)?ut(On(t),0,d):t.split(i,d):[]},a.spread=function(t,i){if("function"!=typeof t)throw new to(d);return i=null==i?0:rs(b(i),0),L(function(c){var d=c[i],_=ut(c,0,i);return d&&nt(_,d),cn(t,this,_)})},a.tail=function(t){var i=null==t?0:t.length;return i?Cn(t,1,i):[]},a.take=function(t,i,d){return t&&t.length?Cn(t,0,(i=d||i===c?1:b(i))<0?0:i):[]},a.takeRight=function(t,i,d){var _=null==t?0:t.length;return _?Cn(t,(i=_-(i=d||i===c?1:b(i)))<0?0:i,_):[]},a.takeRightWhile=function(t,i){return t&&t.length?Ze(t,x(i,3),!1,!0):[]},a.takeWhile=function(t,i){return t&&t.length?Ze(t,x(i,3)):[]},a.tap=function(t,i){return i(t),t},a.throttle=function(t,i,c){var _=!0,w=!0;if("function"!=typeof t)throw new to(d);return K(c)&&(_="leading"in c?!!c.leading:_,w="trailing"in c?!!c.trailing:w),na(t,i,{leading:_,maxWait:i,trailing:w})},a.thru=er,a.toArray=ua,a.toPairs=iQ,a.toPairsIn=iX,a.toPath=function(t){return iR(t)?G(t,Wn):pn(t)?[t]:un(rG(W(t)))},a.toPlainObject=oa,a.transform=function(t,i,c){var d=iR(t),_=d||iT(t)||ij(t);if(i=x(i,4),null==c){var w=t&&t.constructor;c=_?d?new w:[]:K(t)&&Jn(w)?rT(tO(t)):{}}return(_?mn:$n)(t,function(t,d,_){return i(c,t,d,_)}),c},a.unary=function(t){return Xu(t,1)},a.union=r5,a.unionBy=r2,a.unionWith=r6,a.uniq=function(t){return t&&t.length?it(t):[]},a.uniqBy=function(t,i){return t&&t.length?it(t,x(i,2)):[]},a.uniqWith=function(t,i){return i="function"==typeof i?i:c,t&&t.length?it(t,c,i):[]},a.unset=function(t,i){return null==t||si(t,i)},a.unzip=Ci,a.unzipWith=Ku,a.update=function(t,i,c){return null==t?t:au(t,i,oi(c))},a.updateWith=function(t,i,d,_){return _="function"==typeof _?_:c,null==t?t:au(t,i,oi(d),_)},a.values=Gt,a.valuesIn=function(t){return null==t?[]:Mr(t,on(t))},a.without=r3,a.words=va,a.wrap=function(t,i){return iE(oi(i),t)},a.xor=r4,a.xorBy=r8,a.xorWith=r9,a.zip=r7,a.zipObject=function(t,i){return fu(t||[],i||[],se)},a.zipObjectDeep=function(t,i){return fu(t||[],i||[],fe)},a.zipWith=ie,a.entries=iQ,a.entriesIn=iX,a.extend=iz,a.extendWith=iq,Li(a,a),a.add=ng,a.attempt=i9,a.camelCase=i0,a.capitalize=da,a.ceil=ny,a.clamp=function(t,i,d){return d===c&&(d=i,i=c),d!==c&&(d=(d=xn(d))==d?d:0),i!==c&&(i=(i=xn(i))==i?i:0),vt(xn(t),i,d)},a.clone=function(t){return An(t,4)},a.cloneDeep=function(t){return An(t,5)},a.cloneDeepWith=function(t,i){return An(t,5,i="function"==typeof i?i:c)},a.cloneWith=function(t,i){return An(t,4,i="function"==typeof i?i:c)},a.conformsTo=function(t,i){return null==i||Bs(t,i,V(i))},a.deburr=ga,a.defaultTo=function(t,i){return null==t||t!=t?i:t},a.divide=nm,a.endsWith=function(t,i,d){t=W(t),i=ln(i);var _=t.length,w=d=d===c?_:vt(b(d),0,_);return(d-=i.length)>=0&&t.slice(d,w)==i},a.eq=bn,a.escape=function(t){return(t=W(t))&&eT.test(t)?t.replace(eR,t1):t},a.escapeRegExp=function(t){return(t=W(t))&&e$.test(t)?t.replace(eM,"\\$&"):t},a.every=function(t,i,d){var _=iR(t)?As:mc;return d&&rn(t,i,d)&&(i=c),_(t,x(i,3))},a.find=io,a.findIndex=Mu,a.findKey=function(t,i){return Cs(t,x(i,3),$n)},a.findLast=ic,a.findLastIndex=qu,a.findLastKey=function(t,i){return Cs(t,x(i,3),Xr)},a.floor=n_,a.forEach=Zu,a.forEachRight=Ju,a.forIn=function(t,i){return null==t?t:rA(t,x(i,3),on)},a.forInRight=function(t,i){return null==t?t:rL(t,x(i,3),on)},a.forOwn=function(t,i){return t&&$n(t,x(i,3))},a.forOwnRight=function(t,i){return t&&Xr(t,x(i,3))},a.get=Si,a.gt=iO,a.gte=iP,a.has=function(t,i){return null!=t&&Ru(t,i,Pc)},a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=function(t,i,c,d){t=an(t)?t:Gt(t),c=c&&!d?b(c):0;var _=t.length;return c<0&&(c=rs(_+c,0)),or(t)?c<=_&&t.indexOf(i,c)>-1:!!_&&Tt(t,i,c)>-1},a.indexOf=function(t,i,c){var d=null==t?0:t.length;if(!d)return -1;var _=null==c?0:b(c);return _<0&&(_=rs(d+_,0)),Tt(t,i,_)},a.inRange=function(t,i,d){var _,w,S;return i=Xn(i),d===c?(d=i,i=0):d=Xn(d),(_=t=xn(t))>=ro(w=i,S=d)&&_<rs(w,S)},a.invoke=iG,a.isArguments=ix,a.isArray=iR,a.isArrayBuffer=iC,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=function(t){return!0===t||!1===t||Y(t)&&en(t)==A},a.isBuffer=iT,a.isDate=iN,a.isElement=function(t){return Y(t)&&1===t.nodeType&&!pe(t)},a.isEmpty=function(t){if(null==t)return!0;if(an(t)&&(iR(t)||"string"==typeof t||"function"==typeof t.splice||iT(t)||ij(t)||ix(t)))return!t.length;var i=rH(t);if(i==J||i==eo)return!t.size;if(he(t))return!jr(t).length;for(var c in t)if(tp.call(t,c))return!1;return!0},a.isEqual=function(t,i){return oe(t,i)},a.isEqualWith=function(t,i,d){var _=(d="function"==typeof d?d:c)?d(t,i):c;return _===c?oe(t,i,c,d):!!_},a.isError=Ei,a.isFinite=function(t){return"number"==typeof t&&t9(t)},a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=ik,a.isMatch=function(t,i){return t===i||kr(t,i,gi(i))},a.isMatchWith=function(t,i,d){return d="function"==typeof d?d:c,kr(t,i,gi(i),d)},a.isNaN=function(t){return ia(t)&&t!=+t},a.isNative=function(t){if(rB(t))throw new e8("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(t)},a.isNil=function(t){return null==t},a.isNull=function(t){return null===t},a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=iA,a.isSafeInteger=function(t){return ea(t)&&t>=-9007199254740991&&t<=9007199254740991},a.isSet=iL,a.isString=or,a.isSymbol=pn,a.isTypedArray=ij,a.isUndefined=function(t){return t===c},a.isWeakMap=function(t){return Y(t)&&rH(t)==eh},a.isWeakSet=function(t){return Y(t)&&"[object WeakSet]"==en(t)},a.join=function(t,i){return null==t?"":t7.call(t,i)},a.kebabCase=i1,a.last=In,a.lastIndexOf=function(t,i,d){var _=null==t?0:t.length;if(!_)return -1;var w=_;return d!==c&&(w=(w=b(d))<0?rs(_+w,0):ro(w,_-1)),i==i?function(t,i,c){for(var d=c+1;d--&&t[d]!==i;);return d}(t,i,w):ye(t,Is,w,!0)},a.lowerCase=i5,a.lowerFirst=i2,a.lt=iD,a.lte=iM,a.max=function(t){return t&&t.length?Ge(t,fn,Qr):c},a.maxBy=function(t,i){return t&&t.length?Ge(t,x(i,2),Qr):c},a.mean=function(t){return xs(t,fn)},a.meanBy=function(t,i){return xs(t,x(i,2))},a.min=function(t){return t&&t.length?Ge(t,fn,ni):c},a.minBy=function(t,i){return t&&t.length?Ge(t,x(i,2),ni):c},a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=function(){return{}},a.stubString=function(){return""},a.stubTrue=function(){return!0},a.multiply=nb,a.nth=function(t,i){return t&&t.length?nu(t,b(i)):c},a.noConflict=function(){return tU._===this&&(tU._=t_),this},a.noop=Di,a.now=ig,a.pad=function(t,i,c){t=W(t);var d=(i=b(i))?Dt(t):0;if(!i||d>=i)return t;var _=(i-d)/2;return Ve(t3(_),c)+t+Ve(t6(_),c)},a.padEnd=function(t,i,c){t=W(t);var d=(i=b(i))?Dt(t):0;return i&&d<i?t+Ve(i-d,c):t},a.padStart=function(t,i,c){t=W(t);var d=(i=b(i))?Dt(t):0;return i&&d<i?Ve(i-d,c)+t:t},a.parseInt=function(t,i,c){return c||null==i?i=0:i&&(i=+i),rc(W(t).replace(ez,""),i||0)},a.random=function(t,i,d){if(d&&"boolean"!=typeof d&&rn(t,i,d)&&(i=d=c),d===c&&("boolean"==typeof i?(d=i,i=c):"boolean"==typeof t&&(d=t,t=c)),t===c&&i===c?(t=0,i=1):(t=Xn(t),i===c?(i=t,t=0):i=Xn(i)),t>i){var _=t;t=i,i=_}if(d||t%1||i%1){var w=rl();return ro(t+w*(i-t+tM("1e-"+((w+"").length-1))),i)}return ei(t,i)},a.reduce=function(t,i,c){var d=iR(t)?Hr:Es,_=arguments.length<3;return d(t,x(i,4),c,_,rN)},a.reduceRight=function(t,i,c){var d=iR(t)?jo:Es,_=arguments.length<3;return d(t,x(i,4),c,_,rk)},a.repeat=function(t,i,d){return i=(d?rn(t,i,d):i===c)?1:b(i),ri(W(t),i)},a.replace=function(){var t=arguments,i=W(t[0]);return t.length<3?i:i.replace(t[1],t[2])},a.result=function(t,i,d){i=st(i,t);var _=-1,w=i.length;for(w||(w=1,t=c);++_<w;){var S=null==t?c:t[Wn(i[_])];S===c&&(_=w,S=d),t=Jn(S)?S.call(t):S}return t},a.round=nw,a.runInContext=h,a.sample=function(t){return(iR(t)?Ms:function(t){return Ms(Gt(t))})(t)},a.size=function(t){if(null==t)return 0;if(an(t))return or(t)?Dt(t):t.length;var i=rH(t);return i==J||i==eo?t.size:jr(t).length},a.snakeCase=i6,a.some=function(t,i,d){var _=iR(t)?Nr:Mc;return d&&rn(t,i,d)&&(i=c),_(t,x(i,3))},a.sortedIndex=function(t,i){return Ye(t,i)},a.sortedIndexBy=function(t,i,c){return ii(t,i,x(c,2))},a.sortedIndexOf=function(t,i){var c=null==t?0:t.length;if(c){var d=Ye(t,i);if(d<c&&bn(t[d],i))return d}return -1},a.sortedLastIndex=function(t,i){return Ye(t,i,!0)},a.sortedLastIndexBy=function(t,i,c){return ii(t,i,x(c,2),!0)},a.sortedLastIndexOf=function(t,i){if(null==t?0:t.length){var c=Ye(t,i,!0)-1;if(bn(t[c],i))return c}return -1},a.startCase=i3,a.startsWith=function(t,i,c){return t=W(t),c=null==c?0:vt(b(c),0,t.length),i=ln(i),t.slice(c,c+i.length)==i},a.subtract=nE,a.sum=function(t){return t&&t.length?Wr(t,fn):0},a.sumBy=function(t,i){return t&&t.length?Wr(t,x(i,2)):0},a.template=function(t,i,d){var _=a.templateSettings;d&&rn(t,i,d)&&(i=c),t=W(t),i=iq({},i,_,Eu);var w,S,P=iq({},i.imports,_.imports,Eu),R=V(P),C=Mr(P,R),T=0,A=i.interpolate||e5,$="__p += '",q=tn((i.escape||e5).source+"|"+A.source+"|"+(A===eA?eF:e5).source+"|"+(i.evaluate||e5).source+"|$","g"),U="//# sourceURL="+(tp.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tA+"]")+`
`;t.replace(q,function(i,c,d,_,P,R){return d||(d=_),$+=t.slice(T,R).replace(e2,cf),c&&(w=!0,$+=`' +
__e(`+c+`) +
'`),P&&(S=!0,$+=`';
`+P+`;
__p += '`),d&&($+=`' +
((__t = (`+d+`)) == null ? '' : __t) +
'`),T=R+i.length,i}),$+=`';
`;var B=tp.call(i,"variable")&&i.variable;if(B){if(eK.test(B))throw new e8("Invalid `variable` option passed into `_.template`")}else $=`with (obj) {
`+$+`
}
`;$=(S?$.replace(eI,""):$).replace(eO,"$1").replace(eP,"$1;"),$="function("+(B||"obj")+`) {
`+(B?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(w?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var F=i9(function(){return e9(R,U+"return "+$).apply(c,C)});if(F.source=$,Ei(F))throw F;return F},a.times=function(t,i){if((t=b(t))<1||t>9007199254740991)return[];var c=4294967295,d=ro(t,4294967295);i=x(i),t-=4294967295;for(var _=Fr(d,i);++c<t;)i(c);return _},a.toFinite=Xn,a.toInteger=b,a.toLength=aa,a.toLower=function(t){return W(t).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function(t){return t?vt(b(t),-9007199254740991,9007199254740991):0===t?t:0},a.toString=W,a.toUpper=function(t){return W(t).toUpperCase()},a.trim=function(t,i,d){if((t=W(t))&&(d||i===c))return ys(t);if(!t||!(i=ln(i)))return t;var _=On(t),w=On(i),S=Ss(_,w),P=Os(_,w)+1;return ut(_,S,P).join("")},a.trimEnd=function(t,i,d){if((t=W(t))&&(d||i===c))return t.slice(0,bs(t)+1);if(!t||!(i=ln(i)))return t;var _=On(t),w=Os(_,On(i))+1;return ut(_,0,w).join("")},a.trimStart=function(t,i,d){if((t=W(t))&&(d||i===c))return t.replace(ez,"");if(!t||!(i=ln(i)))return t;var _=On(t),w=Ss(_,On(i));return ut(_,w).join("")},a.truncate=function(t,i){var d=30,_="...";if(K(i)){var w="separator"in i?i.separator:w;d="length"in i?b(i.length):d,_="omission"in i?ln(i.omission):_}var S=(t=W(t)).length;if(Lt(t)){var P=On(t);S=P.length}if(d>=S)return t;var R=d-Dt(_);if(R<1)return _;var C=P?ut(P,0,R).join(""):t.slice(0,R);if(w===c)return C+_;if(P&&(R+=C.length-R),iA(w)){if(t.slice(R).search(w)){var T,A=C;for(w.global||(w=tn(w.source,W(eJ.exec(w))+"g")),w.lastIndex=0;T=w.exec(A);)var $=T.index;C=C.slice(0,$===c?R:$)}}else if(t.indexOf(ln(w),R)!=R){var q=C.lastIndexOf(w);q>-1&&(C=C.slice(0,q))}return C+_},a.unescape=function(t){return(t=W(t))&&eC.test(t)?t.replace(ex,t5):t},a.uniqueId=function(t){var i=++td;return W(t)+i},a.upperCase=i4,a.upperFirst=i8,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(e6={},$n(a,function(t,i){tp.call(a.prototype,i)||(e6[i]=t)}),e6),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),mn(["drop","take"],function(t,i){H.prototype[t]=function(d){d=d===c?1:rs(b(d),0);var _=this.__filtered__&&!i?new H(this):this.clone();return _.__filtered__?_.__takeCount__=ro(d,_.__takeCount__):_.__views__.push({size:ro(d,4294967295),type:t+(_.__dir__<0?"Right":"")}),_},H.prototype[t+"Right"]=function(i){return this.reverse()[t](i).reverse()}}),mn(["filter","map","takeWhile"],function(t,i){var c=i+1,d=1==c||3==c;H.prototype[t]=function(t){var i=this.clone();return i.__iteratees__.push({iteratee:x(t,3),type:c}),i.__filtered__=i.__filtered__||d,i}}),mn(["head","last"],function(t,i){var c="take"+(i?"Right":"");H.prototype[t]=function(){return this[c](1).value()[0]}}),mn(["initial","tail"],function(t,i){var c="drop"+(i?"":"Right");H.prototype[t]=function(){return this.__filtered__?new H(this):this[c](1)}}),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(t){return this.filter(t).head()},H.prototype.findLast=function(t){return this.reverse().find(t)},H.prototype.invokeMap=L(function(t,i){return"function"==typeof t?new H(this):this.map(function(c){return ae(c,t,i)})}),H.prototype.reject=function(t){return this.filter(ur(x(t)))},H.prototype.slice=function(t,i){t=b(t);var d=this;return d.__filtered__&&(t>0||i<0)?new H(d):(t<0?d=d.takeRight(-t):t&&(d=d.drop(t)),i!==c&&(d=(i=b(i))<0?d.dropRight(-i):d.take(i-t)),d)},H.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},$n(H.prototype,function(t,i){var d=/^(?:filter|find|map|reject)|While$/.test(i),_=/^(?:head|last)$/.test(i),w=a[_?"take"+("last"==i?"Right":""):i],S=_||/^find/.test(i);w&&(a.prototype[i]=function(){var i=this.__wrapped__,P=_?[1]:arguments,R=i instanceof H,C=P[0],T=R||iR(i),m=function(t){var i=w.apply(a,nt([t],P));return _&&A?i[0]:i};T&&d&&"function"==typeof C&&1!=C.length&&(R=T=!1);var A=this.__chain__,$=!!this.__actions__.length,q=S&&!A,U=R&&!$;if(!S&&T){i=U?i:new H(this);var B=t.apply(i,P);return B.__actions__.push({func:er,args:[m],thisArg:c}),new Pn(B,A)}return q&&U?t.apply(this,P):(B=this.thru(m),q?_?B.value()[0]:B.value():B)})}),mn(["pop","push","shift","sort","splice","unshift"],function(t){var i=ta[t],c=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",d=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var t=arguments;if(d&&!this.__chain__){var _=this.value();return i.apply(iR(_)?_:[],t)}return this[c](function(c){return i.apply(iR(c)?c:[],t)})}}),$n(H.prototype,function(t,i){var c=a[i];if(c){var d=c.name+"";tp.call(rw,d)||(rw[d]=[]),rw[d].push({name:i,func:c})}}),rw[Xe(c,2).name]=[{name:"wrapper",func:c}],H.prototype.clone=function(){var t=new H(this.__wrapped__);return t.__actions__=un(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=un(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=un(this.__views__),t},H.prototype.reverse=function(){if(this.__filtered__){var t=new H(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},H.prototype.value=function(){var t=this.__wrapped__.value(),i=this.__dir__,c=iR(t),d=i<0,_=c?t.length:0,w=function(t,i,c){for(var d=-1,_=c.length;++d<_;){var w=c[d],S=w.size;switch(w.type){case"drop":t+=S;break;case"dropRight":i-=S;break;case"take":i=ro(i,t+S);break;case"takeRight":t=rs(t,i-S)}}return{start:t,end:i}}(0,_,this.__views__),S=w.start,P=w.end,R=P-S,C=d?P:S-1,T=this.__iteratees__,A=T.length,$=0,q=ro(R,this.__takeCount__);if(!c||!d&&_==R&&q==R)return ou(t,this.__actions__);var U=[];e:for(;R--&&$<q;){C+=i;for(var B=-1,F=t[C];++B<A;){var J=T[B],X=J.iteratee,ee=J.type,et=X(F);if(2==ee)F=et;else if(!et){if(1==ee)continue e;break e}}U[$++]=F}return U},a.prototype.at=ir,a.prototype.chain=function(){return Yu(this)},a.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function(){this.__values__===c&&(this.__values__=ua(this.value()));var t=this.__index__>=this.__values__.length,i=t?c:this.__values__[this.__index__++];return{done:t,value:i}},a.prototype.plant=function(t){for(var i,d=this;d instanceof qe;){var _=Fu(d);_.__index__=0,_.__values__=c,i?w.__wrapped__=_:i=_;var w=_;d=d.__wrapped__}return w.__wrapped__=t,i},a.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof H){var i=t;return this.__actions__.length&&(i=new H(this)),(i=i.reverse()).__actions__.push({func:er,args:[Ai],thisArg:c}),new Pn(i,this.__chain__)}return this.thru(Ai)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function(){return ou(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,tq&&(a.prototype[tq]=function(){return this}),a}();tB?((tB.exports=t2)._=t2,tH._=t2):tU._=t2}).call(B)}(F,F.exports);var J=Object.defineProperty,X=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable,ya=(t,i,c)=>i in t?J(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,cr=(t,i)=>{for(var c in i||(i={}))es.call(i,c)&&ya(t,c,i[c]);if(et)for(var c of et(i))eo.call(i,c)&&ya(t,c,i[c]);return t},Zg=(t,i)=>X(t,ee(i));function ft(t,i,c){var d;let _=(0,w.parseChainId)(t);return(null==(d=i.rpcMap)?void 0:d[_.reference])||`https://rpc.walletconnect.com/v1/?chainId=${_.namespace}:${_.reference}&projectId=${c}`}function Ct(t){return t.includes(":")?t.split(":")[1]:t}function Sa(t){return t.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function Oa(t){var i,c,d,_;let S={};if(!(0,w.isValidObject)(t))return S;for(let[P,R]of Object.entries(t)){let t=(0,w.isCaipNamespace)(P)?[P]:R.chains,C=R.methods||[],T=R.events||[],A=R.rpcMap||{},$=(0,w.parseNamespaceKey)(P);S[$]=Zg(cr(cr({},S[$]),R),{chains:(0,w.mergeArrays)(t,null==(i=S[$])?void 0:i.chains),methods:(0,w.mergeArrays)(C,null==(c=S[$])?void 0:c.methods),events:(0,w.mergeArrays)(T,null==(d=S[$])?void 0:d.events),rpcMap:cr(cr({},A),null==(_=S[$])?void 0:_.rpcMap)})}return S}function Qg(t){return t.includes(":")?t.split(":")[2]:t}function Wi(t){return"number"==typeof t?t:t.includes("0x")?parseInt(t,16):t.includes(":")?Number(t.split(":")[1]):Number(t)}let ec={},z=t=>ec[t],Fi=(t,i)=>{ec[t]=i};let kg=class kg{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=Ct(i);t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let jg=class jg{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(parseInt(t),i),this.chainId=parseInt(t),this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,i){let c=i||ft(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new R.HttpConnection(c,z("disableProviderPing")))}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=parseInt(Ct(i));t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){let t=this.chainId,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}async handleSwitchChain(t){var i,c;let d=t.request.params?null==(i=t.request.params[0])?void 0:i.chainId:"0x0";d=d.startsWith("0x")?d:`0x${d}`;let _=parseInt(d,16);if(this.isChainApproved(_))this.setDefaultChain(`${_}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:d}]},chainId:null==(c=this.namespace.chains)?void 0:c[0]}),this.setDefaultChain(`${_}`);else throw Error(`Failed to switch to chain 'eip155:${_}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}};let nv=class nv{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=Ct(i);t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let tv=class tv{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=Ct(i);t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let ev=class ev{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{let c=this.getCardanoRPCUrl(i),d=Ct(i);t[d]=this.createHttpProvider(d,c)}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}getCardanoRPCUrl(t){let i=this.namespace.rpcMap;if(i)return i[t]}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||this.getCardanoRPCUrl(t);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let rv=class rv{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=Ct(i);t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let iv=class iv{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){this.httpProviders[t]||this.setHttpProvider(t,i),this.chainId=t,this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}getAccounts(){let t=this.namespace.accounts;return t?[...new Set(t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;let d=Ct(i);t[d]=this.createHttpProvider(d,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);return new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};let sv=class sv{constructor(t){this.name="near",this.namespace=t.namespace,this.events=z("events"),this.client=z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let t=this.namespace.chains[0];if(!t)throw Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,i){if(this.chainId=t,!this.httpProviders[t]){let c=i||ft(`${this.name}:${t}`,this.namespace);if(!c)throw Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,c)}this.events.emit(U.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let t=this.namespace.accounts;return t&&t.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){let t={};return this.namespace.chains.forEach(i=>{var c;t[i]=this.createHttpProvider(i,null==(c=this.namespace.rpcMap)?void 0:c[i])}),t}getHttpProvider(){let t=`${this.name}:${this.chainId}`,i=this.httpProviders[t];if(typeof i>"u")throw Error(`JSON-RPC provider for ${t} not found`);return i}setHttpProvider(t,i){let c=this.createHttpProvider(t,i);c&&(this.httpProviders[t]=c)}createHttpProvider(t,i){let c=i||ft(t,this.namespace);return typeof c>"u"?void 0:new T.JsonRpcProvider(new(C())(c,z("disableProviderPing")))}};var el=Object.defineProperty,eh=Object.defineProperties,ef=Object.getOwnPropertyDescriptors,ep=Object.getOwnPropertySymbols,ed=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,Ta=(t,i,c)=>i in t?el(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,hr=(t,i)=>{for(var c in i||(i={}))ed.call(i,c)&&Ta(t,c,i[c]);if(ep)for(var c of ep(i))eg.call(i,c)&&Ta(t,c,i[c]);return t},Mi=(t,i)=>eh(t,ef(i));let lr=class lr{constructor(t){this.events=new(_()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:(0,P.pino)((0,P.getDefaultLoggerOptions)({level:t?.logger||$})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){let i=new lr(t);return await i.initialize(),i}async request(t,i){let[c,d]=this.validateChain(i);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(c).request({request:hr({},t),chainId:`${c}:${d}`,topic:this.session.topic})}sendAsync(t,i,c){let d=new Date().getTime();this.request(t,c).then(t=>i(null,(0,A.formatJsonRpcResult)(d,t))).catch(t=>i(t,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:(0,w.getSdkError)("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}removeListener(t,i){this.events.removeListener(t,i)}off(t,i){this.events.off(t,i)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:c,approval:d}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});c&&(this.uri=c,this.events.emit("display_uri",c)),await d().then(t=>{this.session=t,this.namespaces||(this.namespaces=function(t){let i={};for(let[c,d]of Object.entries(t)){let t=d.methods||[],_=d.events||[],S=d.accounts||[],P=(0,w.isCaipNamespace)(c)?[c]:d.chains?d.chains:Sa(d.accounts);i[c]={chains:P,methods:t,events:_,accounts:S}}return i}(t.namespaces),this.persist("namespaces",this.namespaces))}).catch(t=>{if(t.message!==S.lO)throw t;i++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,i){try{if(!this.session)return;let[c,d]=this.validateChain(t);this.getProvider(c).setDefaultChain(d,i)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");let i=this.client.pairing.getAll();if((0,w.isValidArray)(i)){for(let c of i)t.deletePairings?this.client.core.expirer.set(c.topic,0):await this.client.core.relayer.subscriber.unsubscribe(c.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await S.ZP.init({logger:this.providerOpts.logger||$,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let t=[...new Set(Object.keys(this.session.namespaces).map(t=>(0,w.parseNamespaceKey)(t)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),t.forEach(t=>{if(!this.session)return;let i=function(t,i){let c=Object.keys(i.namespaces).filter(i=>i.includes(t));if(!c.length)return[];let d=[];return c.forEach(t=>{let c=i.namespaces[t].accounts;d.push(...c)}),d}(t,this.session),c=Sa(i),d=function(t={},i={}){let c=Oa(t),d=Oa(i);return F.exports.merge(c,d)}(this.namespaces,this.optionalNamespaces),_=Mi(hr({},d[t]),{accounts:i,chains:c});switch(t){case"eip155":this.rpcProviders[t]=new jg({namespace:_});break;case"solana":this.rpcProviders[t]=new nv({namespace:_});break;case"cosmos":this.rpcProviders[t]=new tv({namespace:_});break;case"polkadot":this.rpcProviders[t]=new kg({namespace:_});break;case"cip34":this.rpcProviders[t]=new ev({namespace:_});break;case"elrond":this.rpcProviders[t]=new rv({namespace:_});break;case"multiversx":this.rpcProviders[t]=new iv({namespace:_});break;case"near":this.rpcProviders[t]=new sv({namespace:_})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{let{params:i}=t,{event:c}=i;if("accountsChanged"===c.name){let t=c.data;t&&(0,w.isValidArray)(t)&&this.events.emit("accountsChanged",t.map(Qg))}else if("chainChanged"===c.name){let t=i.chainId,c=i.event.data,d=(0,w.parseNamespaceKey)(t),_=Wi(t)!==Wi(c)?`${d}:${Wi(c)}`:t;this.onChainChanged(_)}else this.events.emit(c.name,c.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:i})=>{var c;let{namespaces:d}=i,_=null==(c=this.client)?void 0:c.session.get(t);this.session=Mi(hr({},_),{namespaces:d}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:i})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Mi(hr({},(0,w.getSdkError)("USER_DISCONNECTED")),{data:t.topic}))}),this.on(U.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var i;this.getProvider(t).updateNamespace(null==(i=this.session)?void 0:i.namespaces[t])})}setNamespaces(t){let{namespaces:i,optionalNamespaces:c,sessionProperties:d}=t;i&&Object.keys(i).length&&(this.namespaces=i),c&&Object.keys(c).length&&(this.optionalNamespaces=c),this.sessionProperties=d,this.persist("namespaces",i),this.persist("optionalNamespaces",c)}validateChain(t){let[i,c]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,c];if(i&&!Object.keys(this.namespaces||{}).map(t=>(0,w.parseNamespaceKey)(t)).includes(i))throw Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&c)return[i,c];let d=(0,w.parseNamespaceKey)(Object.keys(this.namespaces)[0]),_=this.rpcProviders[d].getDefaultChain();return[d,_]}async requestAccounts(){let[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,i=!1){var c;if(!this.namespaces)return;let[d,_]=this.validateChain(t);i||this.getProvider(d).setDefaultChain(_),(null!=(c=this.namespaces[d])?c:this.namespaces[`${d}:${_}`]).defaultChain=_,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",_)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,i){this.client.core.storage.setItem(`${q}/${t}`,i)}async getFromStore(t){return await this.client.core.storage.getItem(`${q}/${t}`)}};let ey=["eth_sendTransaction","personal_sign"],em=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],e_=["chainChanged","accountsChanged"],eb=["chainChanged","accountsChanged","message","disconnect","connect"];var ew=Object.defineProperty,eE=Object.defineProperties,eS=Object.getOwnPropertyDescriptors,eI=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,O=(t,i,c)=>i in t?ew(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,p=(t,i)=>{for(var c in i||(i={}))eO.call(i,c)&&O(t,c,i[c]);if(eI)for(var c of eI(i))eP.call(i,c)&&O(t,c,i[c]);return t},M=(t,i)=>eE(t,eS(i));function g(t){return Number(t[0].split(":")[1])}function f(t){return`0x${t.toString(16)}`}let v=class v{constructor(){this.events=new d.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,i)=>(this.events.on(t,i),this),this.once=(t,i)=>(this.events.once(t,i),this),this.removeListener=(t,i)=>(this.events.removeListener(t,i),this),this.off=(t,i)=>(this.events.off(t,i),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){let i=new v;return await i.initialize(t),i}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,i){this.signer.sendAsync(t,i,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);let{required:i,optional:c}=function(t){let{chains:i,optionalChains:c,methods:d,optionalMethods:_,events:S,optionalEvents:P,rpcMap:R}=t;if(!(0,w.isValidArray)(i))throw Error("Invalid chains");let C={chains:i,methods:d||ey,events:S||e_,rpcMap:p({},i.length?{[g(i)]:R[g(i)]}:{})},T=S?.filter(t=>!e_.includes(t)),A=d?.filter(t=>!ey.includes(t));if(!c&&!P&&!_&&!(null!=T&&T.length)&&!(null!=A&&A.length))return{required:i.length?C:void 0};let $=T?.length&&A?.length||!c,q={chains:[...new Set($?C.chains.concat(c||[]):c)],methods:[...new Set(C.methods.concat(null!=_&&_.length?_:em))],events:[...new Set(C.events.concat(null!=P&&P.length?P:eb))],rpcMap:R};return{required:i.length?C:void 0,optional:c.length?q:void 0}}(this.rpc);try{let d=await new Promise(async(d,_)=>{var w;this.rpc.showQrModal&&(null==(w=this.modal)||w.subscribeModal(t=>{t.open||this.signer.session||(this.signer.abortPairingAttempt(),_(Error("Connection request reset. Please try again.")))})),await this.signer.connect(M(p({namespaces:p({},i&&{[this.namespace]:i})},c&&{optionalNamespaces:{[this.namespace]:c}}),{pairingTopic:t?.pairingTopic})).then(t=>{d(t)}).catch(t=>{_(Error(t.message))})});if(!d)return;let _=(0,w.getAccountsFromNamespaces)(d.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:_),this.setAccounts(_),this.events.emit("connect",{chainId:f(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{let{params:i}=t,{event:c}=i;"accountsChanged"===c.name?(this.accounts=this.parseAccounts(c.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===c.name?this.setChainId(this.formatChainId(c.data)):this.events.emit(c.name,c.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{let i=parseInt(t);this.chainId=i,this.events.emit("chainChanged",f(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",M(p({},(0,w.getSdkError)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var i,c;this.rpc.showQrModal&&(null==(i=this.modal)||i.closeModal(),null==(c=this.modal)||c.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){let i=t.filter(t=>this.isCompatibleChainId(t)).map(t=>this.parseChainId(t));i.length&&(this.chainId=i[0],this.events.emit("chainChanged",f(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){let i=this.parseChainId(t);this.chainId=i,this.switchEthereumChain(i)}}parseAccountId(t){let[i,c,d]=t.split(":");return{chainId:`${i}:${c}`,address:d}}setAccounts(t){this.accounts=t.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var i,c;let d=null!=(i=t?.chains)?i:[],_=null!=(c=t?.optionalChains)?c:[],w=d.concat(_);if(!w.length)throw Error("No chains specified in either `chains` or `optionalChains`");let S=d.length?t?.methods||ey:[],P=d.length?t?.events||e_:[],R=t?.optionalMethods||[],C=t?.optionalEvents||[],T=t?.rpcMap||this.buildRpcMap(w,t.projectId),A=t?.qrModalOptions||void 0;return{chains:d?.map(t=>this.formatChainId(t)),optionalChains:_.map(t=>this.formatChainId(t)),methods:S,events:P,optionalMethods:R,optionalEvents:C,rpcMap:T,showQrModal:!!(null!=t&&t.showQrModal),qrModalOptions:A,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,i){let c={};return t.forEach(t=>{c[t]=this.getRpcUrl(t,i)}),c}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?g(this.rpc.chains):g(this.rpc.optionalChains),this.signer=await lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{let{WalletConnectModal:i}=await c.e(7438).then(c.bind(c,67438));t=i}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(p({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;let{chains:i,optionalChains:c,rpcMap:d}=t;i&&(0,w.isValidArray)(i)&&(this.rpc.chains=i.map(t=>this.formatChainId(t)),i.forEach(t=>{this.rpc.rpcMap[t]=d?.[t]||this.getRpcUrl(t)})),c&&(0,w.isValidArray)(c)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=c?.map(t=>this.formatChainId(t)),c.forEach(t=>{this.rpc.rpcMap[t]=d?.[t]||this.getRpcUrl(t)}))}getRpcUrl(t,i){var c;return(null==(c=this.rpc.rpcMap)?void 0:c[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${i||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),i=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:i?.accounts),this.setAccounts(i?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map(t=>this.parseAccount(t))}};let ex=v},44106:(t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IEvents=void 0,i.IEvents=class{}},57035:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let d=c(53652);d.__exportStar(c(44106),i)},53652:(t,i,c)=>{"use strict";c.r(i),c.d(i,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)i.hasOwnProperty(c)&&(t[c]=i[c])})(t,i)};function __extends(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var i,c=1,d=arguments.length;c<d;c++)for(var _ in i=arguments[c])Object.prototype.hasOwnProperty.call(i,_)&&(t[_]=i[_]);return t}).apply(this,arguments)};function __rest(t,i){var c={};for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&0>i.indexOf(d)&&(c[d]=t[d]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var _=0,d=Object.getOwnPropertySymbols(t);_<d.length;_++)0>i.indexOf(d[_])&&Object.prototype.propertyIsEnumerable.call(t,d[_])&&(c[d[_]]=t[d[_]]);return c}function __decorate(t,i,c,d){var _,w=arguments.length,S=w<3?i:null===d?d=Object.getOwnPropertyDescriptor(i,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(t,i,c,d);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(S=(w<3?_(S):w>3?_(i,c,S):_(i,c))||S);return w>3&&S&&Object.defineProperty(i,c,S),S}function __param(t,i){return function(c,d){i(c,d,t)}}function __metadata(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function __awaiter(t,i,c,d){return new(c||(c=Promise))(function(_,w){function fulfilled(t){try{step(d.next(t))}catch(t){w(t)}}function rejected(t){try{step(d.throw(t))}catch(t){w(t)}}function step(t){var i;t.done?_(t.value):((i=t.value)instanceof c?i:new c(function(t){t(i)})).then(fulfilled,rejected)}step((d=d.apply(t,i||[])).next())})}function __generator(t,i){var c,d,_,w,S={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return w={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function verb(w){return function(P){return function(w){if(c)throw TypeError("Generator is already executing.");for(;S;)try{if(c=1,d&&(_=2&w[0]?d.return:w[0]?d.throw||((_=d.return)&&_.call(d),0):d.next)&&!(_=_.call(d,w[1])).done)return _;switch(d=0,_&&(w=[2&w[0],_.value]),w[0]){case 0:case 1:_=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,d=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!(_=(_=S.trys).length>0&&_[_.length-1])&&(6===w[0]||2===w[0])){S=0;continue}if(3===w[0]&&(!_||w[1]>_[0]&&w[1]<_[3])){S.label=w[1];break}if(6===w[0]&&S.label<_[1]){S.label=_[1],_=w;break}if(_&&S.label<_[2]){S.label=_[2],S.ops.push(w);break}_[2]&&S.ops.pop(),S.trys.pop();continue}w=i.call(t,S)}catch(t){w=[6,t],d=0}finally{c=_=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,P])}}}function __createBinding(t,i,c,d){void 0===d&&(d=c),t[d]=i[c]}function __exportStar(t,i){for(var c in t)"default"===c||i.hasOwnProperty(c)||(i[c]=t[c])}function __values(t){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&t[i],d=0;if(c)return c.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&d>=t.length&&(t=void 0),{value:t&&t[d++],done:!t}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,i){var c="function"==typeof Symbol&&t[Symbol.iterator];if(!c)return t;var d,_,w=c.call(t),S=[];try{for(;(void 0===i||i-- >0)&&!(d=w.next()).done;)S.push(d.value)}catch(t){_={error:t}}finally{try{d&&!d.done&&(c=w.return)&&c.call(w)}finally{if(_)throw _.error}}return S}function __spread(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(__read(arguments[i]));return t}function __spreadArrays(){for(var t=0,i=0,c=arguments.length;i<c;i++)t+=arguments[i].length;for(var d=Array(t),_=0,i=0;i<c;i++)for(var w=arguments[i],S=0,P=w.length;S<P;S++,_++)d[_]=w[S];return d}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,_=c.apply(t,i||[]),w=[];return d={},verb("next"),verb("throw"),verb("return"),d[Symbol.asyncIterator]=function(){return this},d;function verb(t){_[t]&&(d[t]=function(i){return new Promise(function(c,d){w.push([t,i,c,d])>1||resume(t,i)})})}function resume(t,i){try{var c;(c=_[t](i)).value instanceof __await?Promise.resolve(c.value.v).then(fulfill,reject):settle(w[0][2],c)}catch(t){settle(w[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,i){t(i),w.shift(),w.length&&resume(w[0][0],w[0][1])}}function __asyncDelegator(t){var i,c;return i={},verb("next"),verb("throw",function(t){throw t}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(d,_){i[d]=t[d]?function(i){return(c=!c)?{value:__await(t[d](i)),done:"return"===d}:_?_(i):i}:_}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=t[Symbol.asyncIterator];return c?c.call(t):(t=__values(t),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=t[c]&&function(i){return new Promise(function(d,_){(function(t,i,c,d){Promise.resolve(d).then(function(i){t({value:i,done:c})},i)})(d,_,(i=t[c](i)).done,i.value)})}}}function __makeTemplateObject(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}function __importStar(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var c in t)Object.hasOwnProperty.call(t,c)&&(i[c]=t[c]);return i.default=t,i}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,i){if(!i.has(t))throw TypeError("attempted to get private field on non-instance");return i.get(t)}function __classPrivateFieldSet(t,i,c){if(!i.has(t))throw TypeError("attempted to set private field on non-instance");return i.set(t,c),c}},46267:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HEARTBEAT_EVENTS=i.HEARTBEAT_INTERVAL=void 0;let d=c(26438);i.HEARTBEAT_INTERVAL=d.FIVE_SECONDS,i.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},68010:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let d=c(60427);d.__exportStar(c(46267),i)},13762:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeat=void 0;let d=c(60427),_=c(82361),w=c(26438),S=c(55898),P=c(68010);let HeartBeat=class HeartBeat extends S.IHeartBeat{constructor(t){super(t),this.events=new _.EventEmitter,this.interval=P.HEARTBEAT_INTERVAL,this.interval=(null==t?void 0:t.interval)||P.HEARTBEAT_INTERVAL}static init(t){return d.__awaiter(this,void 0,void 0,function*(){let i=new HeartBeat(t);return yield i.init(),i})}init(){return d.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}initialize(){return d.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),w.toMiliseconds(this.interval))})}pulse(){this.events.emit(P.HEARTBEAT_EVENTS.pulse)}};i.HeartBeat=HeartBeat},906:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let d=c(60427);d.__exportStar(c(13762),i),d.__exportStar(c(55898),i),d.__exportStar(c(68010),i)},24717:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IHeartBeat=void 0;let d=c(57035);let IHeartBeat=class IHeartBeat extends d.IEvents{constructor(t){super()}};i.IHeartBeat=IHeartBeat},55898:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let d=c(60427);d.__exportStar(c(24717),i)},60427:(t,i,c)=>{"use strict";c.r(i),c.d(i,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)i.hasOwnProperty(c)&&(t[c]=i[c])})(t,i)};function __extends(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var i,c=1,d=arguments.length;c<d;c++)for(var _ in i=arguments[c])Object.prototype.hasOwnProperty.call(i,_)&&(t[_]=i[_]);return t}).apply(this,arguments)};function __rest(t,i){var c={};for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&0>i.indexOf(d)&&(c[d]=t[d]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var _=0,d=Object.getOwnPropertySymbols(t);_<d.length;_++)0>i.indexOf(d[_])&&Object.prototype.propertyIsEnumerable.call(t,d[_])&&(c[d[_]]=t[d[_]]);return c}function __decorate(t,i,c,d){var _,w=arguments.length,S=w<3?i:null===d?d=Object.getOwnPropertyDescriptor(i,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(t,i,c,d);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(S=(w<3?_(S):w>3?_(i,c,S):_(i,c))||S);return w>3&&S&&Object.defineProperty(i,c,S),S}function __param(t,i){return function(c,d){i(c,d,t)}}function __metadata(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function __awaiter(t,i,c,d){return new(c||(c=Promise))(function(_,w){function fulfilled(t){try{step(d.next(t))}catch(t){w(t)}}function rejected(t){try{step(d.throw(t))}catch(t){w(t)}}function step(t){var i;t.done?_(t.value):((i=t.value)instanceof c?i:new c(function(t){t(i)})).then(fulfilled,rejected)}step((d=d.apply(t,i||[])).next())})}function __generator(t,i){var c,d,_,w,S={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return w={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function verb(w){return function(P){return function(w){if(c)throw TypeError("Generator is already executing.");for(;S;)try{if(c=1,d&&(_=2&w[0]?d.return:w[0]?d.throw||((_=d.return)&&_.call(d),0):d.next)&&!(_=_.call(d,w[1])).done)return _;switch(d=0,_&&(w=[2&w[0],_.value]),w[0]){case 0:case 1:_=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,d=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!(_=(_=S.trys).length>0&&_[_.length-1])&&(6===w[0]||2===w[0])){S=0;continue}if(3===w[0]&&(!_||w[1]>_[0]&&w[1]<_[3])){S.label=w[1];break}if(6===w[0]&&S.label<_[1]){S.label=_[1],_=w;break}if(_&&S.label<_[2]){S.label=_[2],S.ops.push(w);break}_[2]&&S.ops.pop(),S.trys.pop();continue}w=i.call(t,S)}catch(t){w=[6,t],d=0}finally{c=_=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,P])}}}function __createBinding(t,i,c,d){void 0===d&&(d=c),t[d]=i[c]}function __exportStar(t,i){for(var c in t)"default"===c||i.hasOwnProperty(c)||(i[c]=t[c])}function __values(t){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&t[i],d=0;if(c)return c.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&d>=t.length&&(t=void 0),{value:t&&t[d++],done:!t}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,i){var c="function"==typeof Symbol&&t[Symbol.iterator];if(!c)return t;var d,_,w=c.call(t),S=[];try{for(;(void 0===i||i-- >0)&&!(d=w.next()).done;)S.push(d.value)}catch(t){_={error:t}}finally{try{d&&!d.done&&(c=w.return)&&c.call(w)}finally{if(_)throw _.error}}return S}function __spread(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(__read(arguments[i]));return t}function __spreadArrays(){for(var t=0,i=0,c=arguments.length;i<c;i++)t+=arguments[i].length;for(var d=Array(t),_=0,i=0;i<c;i++)for(var w=arguments[i],S=0,P=w.length;S<P;S++,_++)d[_]=w[S];return d}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,_=c.apply(t,i||[]),w=[];return d={},verb("next"),verb("throw"),verb("return"),d[Symbol.asyncIterator]=function(){return this},d;function verb(t){_[t]&&(d[t]=function(i){return new Promise(function(c,d){w.push([t,i,c,d])>1||resume(t,i)})})}function resume(t,i){try{var c;(c=_[t](i)).value instanceof __await?Promise.resolve(c.value.v).then(fulfill,reject):settle(w[0][2],c)}catch(t){settle(w[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,i){t(i),w.shift(),w.length&&resume(w[0][0],w[0][1])}}function __asyncDelegator(t){var i,c;return i={},verb("next"),verb("throw",function(t){throw t}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(d,_){i[d]=t[d]?function(i){return(c=!c)?{value:__await(t[d](i)),done:"return"===d}:_?_(i):i}:_}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=t[Symbol.asyncIterator];return c?c.call(t):(t=__values(t),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=t[c]&&function(i){return new Promise(function(d,_){(function(t,i,c,d){Promise.resolve(d).then(function(i){t({value:i,done:c})},i)})(d,_,(i=t[c](i)).done,i.value)})}}}function __makeTemplateObject(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}function __importStar(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var c in t)Object.hasOwnProperty.call(t,c)&&(i[c]=t[c]);return i.default=t,i}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,i){if(!i.has(t))throw TypeError("attempted to get private field on non-instance");return i.get(t)}function __classPrivateFieldSet(t,i,c){if(!i.has(t))throw TypeError("attempted to set private field on non-instance");return i.set(t,c),c}},51393:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=c(82361),_=c(51738),w=c(25815);let v=()=>"u">typeof WebSocket||"u">typeof global&&"u">typeof global.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,h=t=>t.split("?")[0],S="u">typeof WebSocket?WebSocket:"u">typeof global&&"u">typeof global.WebSocket?global.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:c(64776);let l=class l{constructor(t){if(this.url=t,this.events=new d.EventEmitter,this.registering=!1,!w.isWsUrl(t))throw Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,i)=>{if(typeof this.socket>"u"){i(Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(_.safeJsonStringify(t))}catch(i){this.onError(t.id,i)}}register(t=this.url){if(!w.isWsUrl(t))throw Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((t,i)=>{this.events.once("register_error",t=>{this.resetMaxListeners(),i(t)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(Error("WebSocket connection is missing or invalid"));t(this.socket)})})}return this.url=t,this.registering=!0,new Promise((i,c)=>{let d=new URLSearchParams(t).get("origin"),_=w.isReactNative()?{headers:{origin:d}}:{rejectUnauthorized:!w.isLocalhostUrl(t)},P=new S(t,[],_);v()?P.onerror=t=>{c(this.emitError(t.error))}:P.on("error",t=>{c(this.emitError(t))}),P.onopen=()=>{this.onOpen(P),i(P)}})}onOpen(t){t.onmessage=t=>this.onPayload(t),t.onclose=t=>this.onClose(t),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;let i="string"==typeof t.data?_.safeJsonParse(t.data):t.data;this.events.emit("payload",i)}onError(t,i){let c=this.parseError(i),d=c.message||c.toString(),_=w.formatJsonRpcError(t,d);this.events.emit("payload",_)}parseError(t,i=this.url){return w.parseConnectionError(t,h(i),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(t){let i=this.parseError(Error(t?.message||`WebSocket connection failed for host: ${h(this.url)}`));return this.events.emit("register_error",i),i}};i.WsConnection=l,i.default=l},64776:(t,i,c)=>{"use strict";let d=c(88301);d.createWebSocketStream=c(40044),d.Server=c(79376),d.Receiver=c(3705),d.Sender=c(96427),t.exports=d},70968:(t,i,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(9011);function concat(t,i){if(0===t.length)return d;if(1===t.length)return t[0];let c=Buffer.allocUnsafe(i),_=0;for(let i=0;i<t.length;i++){let d=t[i];c.set(d,_),_+=d.length}return _<i?c.slice(0,_):c}function _mask(t,i,c,d,_){for(let w=0;w<_;w++)c[d+w]=t[w]^i[3&w]}function _unmask(t,i){let c=t.length;for(let d=0;d<c;d++)t[d]^=i[3&d]}function toArrayBuffer(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function toBuffer(t){let i;return(toBuffer.readOnly=!0,Buffer.isBuffer(t))?t:(t instanceof ArrayBuffer?i=Buffer.from(t):ArrayBuffer.isView(t)?i=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(i=Buffer.from(t),toBuffer.readOnly=!1),i)}try{let i=c(22123),d=i.BufferUtil||i;t.exports={concat,mask(t,i,c,_,w){w<48?_mask(t,i,c,_,w):d.mask(t,i,c,_,w)},toArrayBuffer,toBuffer,unmask(t,i){t.length<32?_unmask(t,i):d.unmask(t,i)}}}catch(i){t.exports={concat,mask:_mask,toArrayBuffer,toBuffer,unmask:_unmask}}},9011:t=>{"use strict";t.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},77288:t=>{"use strict";let Event=class Event{constructor(t,i){this.target=i,this.type=t}};let MessageEvent=class MessageEvent extends Event{constructor(t,i){super("message",i),this.data=t}};let CloseEvent=class CloseEvent extends Event{constructor(t,i,c){super("close",c),this.wasClean=c._closeFrameReceived&&c._closeFrameSent,this.reason=i,this.code=t}};let OpenEvent=class OpenEvent extends Event{constructor(t){super("open",t)}};let ErrorEvent=class ErrorEvent extends Event{constructor(t,i){super("error",i),this.message=t.message,this.error=t}};t.exports={addEventListener(t,i,c){if("function"!=typeof i)return;function onMessage(t){i.call(this,new MessageEvent(t,this))}function onClose(t,c){i.call(this,new CloseEvent(t,c,this))}function onError(t){i.call(this,new ErrorEvent(t,this))}function onOpen(){i.call(this,new OpenEvent(this))}let d=c&&c.once?"once":"on";"message"===t?(onMessage._listener=i,this[d](t,onMessage)):"close"===t?(onClose._listener=i,this[d](t,onClose)):"error"===t?(onError._listener=i,this[d](t,onError)):"open"===t?(onOpen._listener=i,this[d](t,onOpen)):this[d](t,i)},removeEventListener(t,i){let c=this.listeners(t);for(let d=0;d<c.length;d++)(c[d]===i||c[d]._listener===i)&&this.removeListener(t,c[d])}}},37460:t=>{"use strict";let i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function push(t,i,c){void 0===t[i]?t[i]=[c]:t[i].push(c)}t.exports={format:function(t){return Object.keys(t).map(i=>{let c=t[i];return Array.isArray(c)||(c=[c]),c.map(t=>[i].concat(Object.keys(t).map(i=>{let c=t[i];return Array.isArray(c)||(c=[c]),c.map(t=>!0===t?i:`${i}=${t}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(t){let c,d;let _=Object.create(null);if(void 0===t||""===t)return _;let w=Object.create(null),S=!1,P=!1,R=!1,C=-1,T=-1,A=0;for(;A<t.length;A++){let $=t.charCodeAt(A);if(void 0===c){if(-1===T&&1===i[$])-1===C&&(C=A);else if(32===$||9===$)-1===T&&-1!==C&&(T=A);else if(59===$||44===$){if(-1===C)throw SyntaxError(`Unexpected character at index ${A}`);-1===T&&(T=A);let i=t.slice(C,T);44===$?(push(_,i,w),w=Object.create(null)):c=i,C=T=-1}else throw SyntaxError(`Unexpected character at index ${A}`)}else if(void 0===d){if(-1===T&&1===i[$])-1===C&&(C=A);else if(32===$||9===$)-1===T&&-1!==C&&(T=A);else if(59===$||44===$){if(-1===C)throw SyntaxError(`Unexpected character at index ${A}`);-1===T&&(T=A),push(w,t.slice(C,T),!0),44===$&&(push(_,c,w),w=Object.create(null),c=void 0),C=T=-1}else if(61===$&&-1!==C&&-1===T)d=t.slice(C,A),C=T=-1;else throw SyntaxError(`Unexpected character at index ${A}`)}else if(P){if(1!==i[$])throw SyntaxError(`Unexpected character at index ${A}`);-1===C?C=A:S||(S=!0),P=!1}else if(R){if(1===i[$])-1===C&&(C=A);else if(34===$&&-1!==C)R=!1,T=A;else if(92===$)P=!0;else throw SyntaxError(`Unexpected character at index ${A}`)}else if(34===$&&61===t.charCodeAt(A-1))R=!0;else if(-1===T&&1===i[$])-1===C&&(C=A);else if(-1!==C&&(32===$||9===$))-1===T&&(T=A);else if(59===$||44===$){if(-1===C)throw SyntaxError(`Unexpected character at index ${A}`);-1===T&&(T=A);let i=t.slice(C,T);S&&(i=i.replace(/\\/g,""),S=!1),push(w,d,i),44===$&&(push(_,c,w),w=Object.create(null),c=void 0),d=void 0,C=T=-1}else throw SyntaxError(`Unexpected character at index ${A}`)}if(-1===C||R)throw SyntaxError("Unexpected end of input");-1===T&&(T=A);let $=t.slice(C,T);return void 0===c?push(_,$,w):(void 0===d?push(w,$,!0):S?push(w,d,$.replace(/\\/g,"")):push(w,d,$),push(_,c,w)),_}}},51455:t=>{"use strict";let i=Symbol("kDone"),c=Symbol("kRun");t.exports=class{constructor(t){this[i]=()=>{this.pending--,this[c]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[i])}}}},5076:(t,i,c)=>{"use strict";let d;let _=c(59796),w=c(70968),S=c(51455),{kStatusCode:P,NOOP:R}=c(9011),C=Buffer.from([0,0,255,255]),T=Symbol("permessage-deflate"),A=Symbol("total-length"),$=Symbol("callback"),q=Symbol("buffers"),U=Symbol("error");function deflateOnData(t){this[q].push(t),this[A]+=t.length}function inflateOnData(t){if(this[A]+=t.length,this[T]._maxPayload<1||this[A]<=this[T]._maxPayload){this[q].push(t);return}this[U]=RangeError("Max payload size exceeded"),this[U].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[U][P]=1009,this.removeListener("data",inflateOnData),this.reset()}function inflateOnError(t){this[T]._inflate=null,t[P]=1007,this[$](t)}t.exports=class{constructor(t,i,c){if(this._maxPayload=0|c,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!i,this._deflate=null,this._inflate=null,this.params=null,!d){let t=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;d=new S(t)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[$];this._deflate.close(),this._deflate=null,t&&t(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let i=this._options,c=t.find(t=>(!1!==i.serverNoContextTakeover||!t.server_no_context_takeover)&&(!t.server_max_window_bits||!1!==i.serverMaxWindowBits&&("number"!=typeof i.serverMaxWindowBits||!(i.serverMaxWindowBits>t.server_max_window_bits)))&&("number"!=typeof i.clientMaxWindowBits||!!t.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return i.serverNoContextTakeover&&(c.server_no_context_takeover=!0),i.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof i.serverMaxWindowBits&&(c.server_max_window_bits=i.serverMaxWindowBits),"number"==typeof i.clientMaxWindowBits?c.client_max_window_bits=i.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===i.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(t){let i=t[0];if(!1===this._options.clientNoContextTakeover&&i.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(i.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&i.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(i.client_max_window_bits=this._options.clientMaxWindowBits);return i}normalizeParams(t){return t.forEach(t=>{Object.keys(t).forEach(i=>{let c=t[i];if(c.length>1)throw Error(`Parameter "${i}" must have only a single value`);if(c=c[0],"client_max_window_bits"===i){if(!0!==c){let t=+c;if(!Number.isInteger(t)||t<8||t>15)throw TypeError(`Invalid value for parameter "${i}": ${c}`);c=t}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${i}": ${c}`)}else if("server_max_window_bits"===i){let t=+c;if(!Number.isInteger(t)||t<8||t>15)throw TypeError(`Invalid value for parameter "${i}": ${c}`);c=t}else if("client_no_context_takeover"===i||"server_no_context_takeover"===i){if(!0!==c)throw TypeError(`Invalid value for parameter "${i}": ${c}`)}else throw Error(`Unknown parameter "${i}"`);t[i]=c})}),t}decompress(t,i,c){d.add(d=>{this._decompress(t,i,(t,i)=>{d(),c(t,i)})})}compress(t,i,c){d.add(d=>{this._compress(t,i,(t,i)=>{d(),c(t,i)})})}_decompress(t,i,c){let d=this._isServer?"client":"server";if(!this._inflate){let t=`${d}_max_window_bits`,i="number"!=typeof this.params[t]?_.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=_.createInflateRaw({...this._options.zlibInflateOptions,windowBits:i}),this._inflate[T]=this,this._inflate[A]=0,this._inflate[q]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[$]=c,this._inflate.write(t),i&&this._inflate.write(C),this._inflate.flush(()=>{let t=this._inflate[U];if(t){this._inflate.close(),this._inflate=null,c(t);return}let _=w.concat(this._inflate[q],this._inflate[A]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[A]=0,this._inflate[q]=[],i&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,_)})}_compress(t,i,c){let d=this._isServer?"server":"client";if(!this._deflate){let t=`${d}_max_window_bits`,i="number"!=typeof this.params[t]?_.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=_.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:i}),this._deflate[A]=0,this._deflate[q]=[],this._deflate.on("error",R),this._deflate.on("data",deflateOnData)}this._deflate[$]=c,this._deflate.write(t),this._deflate.flush(_.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let t=w.concat(this._deflate[q],this._deflate[A]);i&&(t=t.slice(0,t.length-4)),this._deflate[$]=null,this._deflate[A]=0,this._deflate[q]=[],i&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,t)})}}},3705:(t,i,c)=>{"use strict";let{Writable:d}=c(12781),_=c(5076),{BINARY_TYPES:w,EMPTY_BUFFER:S,kStatusCode:P,kWebSocket:R}=c(9011),{concat:C,toArrayBuffer:T,unmask:A}=c(70968),{isValidStatusCode:$,isValidUTF8:q}=c(96060);function error(t,i,c,d,_){let w=new t(c?`Invalid WebSocket frame: ${i}`:i);return Error.captureStackTrace(w,error),w.code=_,w[P]=d,w}t.exports=class extends d{constructor(t,i,c,d){super(),this._binaryType=t||w[0],this[R]=void 0,this._extensions=i||{},this._isServer=!!c,this._maxPayload=0|d,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(t,i,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(c)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=i.slice(t),i.slice(0,t)}let i=Buffer.allocUnsafe(t);do{let c=this._buffers[0],d=i.length-t;t>=c.length?i.set(this._buffers.shift(),d):(i.set(new Uint8Array(c.buffer,c.byteOffset,t),d),this._buffers[0]=c.slice(t)),t-=c.length}while(t>0);return i}startLoop(t){let i;this._loop=!0;do switch(this._state){case 0:i=this.getInfo();break;case 1:i=this.getPayloadLength16();break;case 2:i=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:i=this.getData(t);break;default:this._loop=!1;return}while(this._loop);t(i)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0)return this._loop=!1,error(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let i=(64&t[0])==64;if(i&&!this._extensions[_.extensionName])return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(i)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,error(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=i}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,error(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,error(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(i)return this._loop=!1,error(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,error(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked)return this._loop=!1,error(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,error(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),i=t.readUInt32BE(0);return i>2097151?(this._loop=!1,error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=4294967296*i+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,error(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(t){let i=S;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}i=this.consume(this._payloadLength),this._masked&&A(i,this._mask)}if(this._opcode>7)return this.controlMessage(i);if(this._compressed){this._state=5,this.decompress(i,t);return}return i.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(i)),this.dataMessage()}decompress(t,i){let c=this._extensions[_.extensionName];c.decompress(t,this._fin,(t,c)=>{if(t)return i(t);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return i(error(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}let d=this.dataMessage();if(d)return i(d);this.startLoop(i)})}dataMessage(){if(this._fin){let t=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let c;c="nodebuffer"===this._binaryType?C(i,t):"arraybuffer"===this._binaryType?T(C(i,t)):i,this.emit("message",c)}else{let c=C(i,t);if(!q(c))return this._loop=!1,error(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",c.toString())}}this._state=0}controlMessage(t){if(8===this._opcode){if(this._loop=!1,0===t.length)this.emit("conclude",1005,""),this.end();else{if(1===t.length)return error(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");let i=t.readUInt16BE(0);if(!$(i))return error(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let c=t.slice(2);if(!q(c))return error(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",i,c.toString()),this.end()}}else 9===this._opcode?this.emit("ping",t):this.emit("pong",t);this._state=0}}},96427:(t,i,c)=>{"use strict";c(41808),c(24404);let{randomFillSync:d}=c(6113),_=c(5076),{EMPTY_BUFFER:w}=c(9011),{isValidStatusCode:S}=c(96060),{mask:P,toBuffer:R}=c(70968),C=Buffer.alloc(4);let Sender=class Sender{constructor(t,i){this._extensions=i||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,i){let c=i.mask&&i.readOnly,_=i.mask?6:2,w=t.length;t.length>=65536?(_+=8,w=127):t.length>125&&(_+=2,w=126);let S=Buffer.allocUnsafe(c?t.length+_:_);return(S[0]=i.fin?128|i.opcode:i.opcode,i.rsv1&&(S[0]|=64),S[1]=w,126===w?S.writeUInt16BE(t.length,2):127===w&&(S.writeUInt32BE(0,2),S.writeUInt32BE(t.length,6)),i.mask)?(d(C,0,4),S[1]|=128,S[_-4]=C[0],S[_-3]=C[1],S[_-2]=C[2],S[_-1]=C[3],c)?(P(t,C,S,_,t.length),[S]):(P(t,C,t,0,t.length),[S,t]):[S,t]}close(t,i,c,d){let _;if(void 0===t)_=w;else if("number"==typeof t&&S(t)){if(void 0===i||""===i)(_=Buffer.allocUnsafe(2)).writeUInt16BE(t,0);else{let c=Buffer.byteLength(i);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(_=Buffer.allocUnsafe(2+c)).writeUInt16BE(t,0),_.write(i,2)}}else throw TypeError("First argument must be a valid error code number");this._deflating?this.enqueue([this.doClose,_,c,d]):this.doClose(_,c,d)}doClose(t,i,c){this.sendFrame(Sender.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:i,readOnly:!1}),c)}ping(t,i,c){let d=R(t);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,d,i,R.readOnly,c]):this.doPing(d,i,R.readOnly,c)}doPing(t,i,c,d){this.sendFrame(Sender.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:i,readOnly:c}),d)}pong(t,i,c){let d=R(t);if(d.length>125)throw RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,d,i,R.readOnly,c]):this.doPong(d,i,R.readOnly,c)}doPong(t,i,c,d){this.sendFrame(Sender.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:i,readOnly:c}),d)}send(t,i,c){let d=R(t),w=this._extensions[_.extensionName],S=i.binary?2:1,P=i.compress;if(this._firstFragment?(this._firstFragment=!1,P&&w&&(P=d.length>=w._threshold),this._compress=P):(P=!1,S=0),i.fin&&(this._firstFragment=!0),w){let t={fin:i.fin,rsv1:P,opcode:S,mask:i.mask,readOnly:R.readOnly};this._deflating?this.enqueue([this.dispatch,d,this._compress,t,c]):this.dispatch(d,this._compress,t,c)}else this.sendFrame(Sender.frame(d,{fin:i.fin,rsv1:!1,opcode:S,mask:i.mask,readOnly:R.readOnly}),c)}dispatch(t,i,c,d){if(!i){this.sendFrame(Sender.frame(t,c),d);return}let w=this._extensions[_.extensionName];this._bufferedBytes+=t.length,this._deflating=!0,w.compress(t,c.fin,(i,_)=>{if(this._socket.destroyed){let t=Error("The socket was closed while data was being compressed");"function"==typeof d&&d(t);for(let i=0;i<this._queue.length;i++){let c=this._queue[i][4];"function"==typeof c&&c(t)}return}this._bufferedBytes-=t.length,this._deflating=!1,c.readOnly=!1,this.sendFrame(Sender.frame(_,c),d),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[1].length,Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,i){2===t.length?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],i),this._socket.uncork()):this._socket.write(t[0],i)}};t.exports=Sender},40044:(t,i,c)=>{"use strict";let{Duplex:d}=c(12781);function emitClose(t){t.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(t){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",t)}t.exports=function(t,i){let c=!0,_=!0;function receiverOnDrain(){c&&t._socket.resume()}t.readyState===t.CONNECTING?t.once("open",function(){t._receiver.removeAllListeners("drain"),t._receiver.on("drain",receiverOnDrain)}):(t._receiver.removeAllListeners("drain"),t._receiver.on("drain",receiverOnDrain));let w=new d({...i,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i){w.push(i)||(c=!1,t._socket.pause())}),t.once("error",function(t){w.destroyed||(_=!1,w.destroy(t))}),t.once("close",function(){w.destroyed||w.push(null)}),w._destroy=function(i,c){if(t.readyState===t.CLOSED){c(i),process.nextTick(emitClose,w);return}let d=!1;t.once("error",function(t){d=!0,c(t)}),t.once("close",function(){d||c(i),process.nextTick(emitClose,w)}),_&&t.terminate()},w._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){w._final(i)});return}null!==t._socket&&(t._socket._writableState.finished?(i(),w._readableState.endEmitted&&w.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},w._read=function(){t.readyState!==t.OPEN&&t.readyState!==t.CLOSING||c||(c=!0,t._receiver._writableState.needDrain||t._socket.resume())},w._write=function(i,c,d){if(t.readyState===t.CONNECTING){t.once("open",function(){w._write(i,c,d)});return}t.send(i,d)},w.on("end",duplexOnEnd),w.on("error",duplexOnError),w}},96060:(t,i,c)=>{"use strict";function isValidStatusCode(t){return t>=1e3&&t<=1014&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999}function _isValidUTF8(t){let i=t.length,c=0;for(;c<i;)if((128&t[c])==0)c++;else if((224&t[c])==192){if(c+1===i||(192&t[c+1])!=128||(254&t[c])==192)return!1;c+=2}else if((240&t[c])==224){if(c+2>=i||(192&t[c+1])!=128||(192&t[c+2])!=128||224===t[c]&&(224&t[c+1])==128||237===t[c]&&(224&t[c+1])==160)return!1;c+=3}else{if((248&t[c])!=240||c+3>=i||(192&t[c+1])!=128||(192&t[c+2])!=128||(192&t[c+3])!=128||240===t[c]&&(240&t[c+1])==128||244===t[c]&&t[c+1]>143||t[c]>244)return!1;c+=4}return!0}try{let i=c(19297);"object"==typeof i&&(i=i.Validation.isValidUTF8),t.exports={isValidStatusCode,isValidUTF8:t=>t.length<150?_isValidUTF8(t):i(t)}}catch(i){t.exports={isValidStatusCode,isValidUTF8:_isValidUTF8}}},79376:(t,i,c)=>{"use strict";let d=c(82361),_=c(13685);c(95687),c(41808),c(24404);let{createHash:w}=c(6113),S=c(5076),P=c(88301),{format:R,parse:C}=c(37460),{GUID:T,kWebSocket:A}=c(9011),$=/^[+/0-9A-Za-z]{22}==$/;function emitClose(t){t._state=2,t.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(t,i,c,d){t.writable&&(c=c||_.STATUS_CODES[i],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},t.write(`HTTP/1.1 ${i} ${_.STATUS_CODES[i]}\r
`+Object.keys(d).map(t=>`${t}: ${d[t]}`).join("\r\n")+"\r\n\r\n"+c)),t.removeListener("error",socketOnError),t.destroy()}function trim(t){return t.trim()}t.exports=class extends d{constructor(t,i){if(super(),null==(t={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...t}).port&&!t.server&&!t.noServer||null!=t.port&&(t.server||t.noServer)||t.server&&t.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=t.port?(this._server=_.createServer((t,i)=>{let c=_.STATUS_CODES[426];i.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),i.end(c)}),this._server.listen(t.port,t.host,t.backlog,i)):t.server&&(this._server=t.server),this._server){let t=this.emit.bind(this,"connection");this._removeListeners=function(t,i){for(let c of Object.keys(i))t.on(c,i[c]);return function(){for(let c of Object.keys(i))t.removeListener(c,i[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,c,d)=>{this.handleUpgrade(i,c,d,t)}})}!0===t.perMessageDeflate&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set),this.options=t,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(t&&this.once("close",t),2===this._state){process.nextTick(emitClose,this);return}if(1===this._state)return;if(this._state=1,this.clients)for(let t of this.clients)t.terminate();let i=this._server;if(i&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)){i.close(emitClose.bind(void 0,this));return}process.nextTick(emitClose,this)}shouldHandle(t){if(this.options.path){let i=t.url.indexOf("?"),c=-1!==i?t.url.slice(0,i):t.url;if(c!==this.options.path)return!1}return!0}handleUpgrade(t,i,c,d){i.on("error",socketOnError);let _=void 0!==t.headers["sec-websocket-key"]&&t.headers["sec-websocket-key"].trim(),w=+t.headers["sec-websocket-version"],P={};if("GET"!==t.method||"websocket"!==t.headers.upgrade.toLowerCase()||!_||!$.test(_)||8!==w&&13!==w||!this.shouldHandle(t))return abortHandshake(i,400);if(this.options.perMessageDeflate){let c=new S(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let i=C(t.headers["sec-websocket-extensions"]);i[S.extensionName]&&(c.accept(i[S.extensionName]),P[S.extensionName]=c)}catch(t){return abortHandshake(i,400)}}if(this.options.verifyClient){let S={origin:t.headers[`${8===w?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(2===this.options.verifyClient.length){this.options.verifyClient(S,(w,S,R,C)=>{if(!w)return abortHandshake(i,S||401,R,C);this.completeUpgrade(_,P,t,i,c,d)});return}if(!this.options.verifyClient(S))return abortHandshake(i,401)}this.completeUpgrade(_,P,t,i,c,d)}completeUpgrade(t,i,c,d,_,C){if(!d.readable||!d.writable)return d.destroy();if(d[A])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return abortHandshake(d,503);let $=w("sha1").update(t+T).digest("base64"),q=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${$}`],U=new P(null),B=c.headers["sec-websocket-protocol"];if(B&&(B=B.split(",").map(trim),(B=this.options.handleProtocols?this.options.handleProtocols(B,c):B[0])&&(q.push(`Sec-WebSocket-Protocol: ${B}`),U._protocol=B)),i[S.extensionName]){let t=i[S.extensionName].params,c=R({[S.extensionName]:[t]});q.push(`Sec-WebSocket-Extensions: ${c}`),U._extensions=i}this.emit("headers",q,c),d.write(q.concat("\r\n").join("\r\n")),d.removeListener("error",socketOnError),U.setSocket(d,_,this.options.maxPayload),this.clients&&(this.clients.add(U),U.on("close",()=>this.clients.delete(U))),C(U,c)}}},88301:(t,i,c)=>{"use strict";let d=c(82361),_=c(95687),w=c(13685),S=c(41808),P=c(24404),{randomBytes:R,createHash:C}=c(6113),{Readable:T}=c(12781),{URL:A}=c(57310),$=c(5076),q=c(3705),U=c(96427),{BINARY_TYPES:B,EMPTY_BUFFER:F,GUID:J,kStatusCode:X,kWebSocket:ee,NOOP:et}=c(9011),{addEventListener:es,removeEventListener:eo}=c(77288),{format:ec,parse:el}=c(37460),{toBuffer:eh}=c(70968),ef=["CONNECTING","OPEN","CLOSING","CLOSED"],ep=[8,13];let WebSocket=class WebSocket extends d{constructor(t,i,c){super(),this._binaryType=B[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==t?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(i)?i=i.join(", "):"object"==typeof i&&null!==i&&(c=i,i=void 0),function initAsClient(t,i,c,d){let S,P;let T={protocolVersion:ep[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...d,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!ep.includes(T.protocolVersion))throw RangeError(`Unsupported protocol version: ${T.protocolVersion} (supported versions: ${ep.join(", ")})`);i instanceof A?(S=i,t._url=i.href):(S=new A(i),t._url=i);let q="ws+unix:"===S.protocol;if(!S.host&&(!q||!S.pathname)){let i=Error(`Invalid URL: ${t.url}`);if(0===t._redirects)throw i;emitErrorAndClose(t,i);return}let U="wss:"===S.protocol||"https:"===S.protocol,B=U?443:80,F=R(16).toString("base64"),X=U?_.get:w.get;if(T.createConnection=U?tlsConnect:netConnect,T.defaultPort=T.defaultPort||B,T.port=S.port||B,T.host=S.hostname.startsWith("[")?S.hostname.slice(1,-1):S.hostname,T.headers={"Sec-WebSocket-Version":T.protocolVersion,"Sec-WebSocket-Key":F,Connection:"Upgrade",Upgrade:"websocket",...T.headers},T.path=S.pathname+S.search,T.timeout=T.handshakeTimeout,T.perMessageDeflate&&(P=new $(!0!==T.perMessageDeflate?T.perMessageDeflate:{},!1,T.maxPayload),T.headers["Sec-WebSocket-Extensions"]=ec({[$.extensionName]:P.offer()})),c&&(T.headers["Sec-WebSocket-Protocol"]=c),T.origin&&(T.protocolVersion<13?T.headers["Sec-WebSocket-Origin"]=T.origin:T.headers.Origin=T.origin),(S.username||S.password)&&(T.auth=`${S.username}:${S.password}`),q){let t=T.path.split(":");T.socketPath=t[0],T.path=t[1]}if(T.followRedirects){if(0===t._redirects){t._originalUnixSocket=q,t._originalSecure=U,t._originalHostOrSocketPath=q?T.socketPath:S.host;let i=d&&d.headers;if(d={...d,headers:{}},i)for(let[t,c]of Object.entries(i))d.headers[t.toLowerCase()]=c}else{let i=q?!!t._originalUnixSocket&&T.socketPath===t._originalHostOrSocketPath:!t._originalUnixSocket&&S.host===t._originalHostOrSocketPath;i&&(!t._originalSecure||U)||(delete T.headers.authorization,delete T.headers.cookie,i||delete T.headers.host,T.auth=void 0)}T.auth&&!d.headers.authorization&&(d.headers.authorization="Basic "+Buffer.from(T.auth).toString("base64"))}let ee=t._req=X(T);T.timeout&&ee.on("timeout",()=>{abortHandshake(t,ee,"Opening handshake has timed out")}),ee.on("error",i=>{null===ee||ee.aborted||(ee=t._req=null,emitErrorAndClose(t,i))}),ee.on("response",_=>{let w=_.headers.location,S=_.statusCode;if(w&&T.followRedirects&&S>=300&&S<400){let _;if(++t._redirects>T.maxRedirects){abortHandshake(t,ee,"Maximum redirects exceeded");return}ee.abort();try{_=new A(w,i)}catch(i){emitErrorAndClose(t,i);return}initAsClient(t,_,c,d)}else t.emit("unexpected-response",ee,_)||abortHandshake(t,ee,`Unexpected server response: ${_.statusCode}`)}),ee.on("upgrade",(i,d,_)=>{let w;if(t.emit("upgrade",i),t.readyState!==WebSocket.CONNECTING)return;if(ee=t._req=null,"websocket"!==i.headers.upgrade.toLowerCase()){abortHandshake(t,d,"Invalid Upgrade header");return}let S=C("sha1").update(F+J).digest("base64");if(i.headers["sec-websocket-accept"]!==S){abortHandshake(t,d,"Invalid Sec-WebSocket-Accept header");return}let R=i.headers["sec-websocket-protocol"],A=(c||"").split(/, */);if(!c&&R?w="Server sent a subprotocol but none was requested":c&&!R?w="Server sent no subprotocol":R&&!A.includes(R)&&(w="Server sent an invalid subprotocol"),w){abortHandshake(t,d,w);return}R&&(t._protocol=R);let q=i.headers["sec-websocket-extensions"];if(void 0!==q){let i;if(!P){abortHandshake(t,d,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{i=el(q)}catch(i){abortHandshake(t,d,"Invalid Sec-WebSocket-Extensions header");return}let c=Object.keys(i);if(c.length){if(1!==c.length||c[0]!==$.extensionName){abortHandshake(t,d,"Server indicated an extension that was not requested");return}try{P.accept(i[$.extensionName])}catch(i){abortHandshake(t,d,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[$.extensionName]=P}}t.setSocket(d,_,T.maxPayload)})}(this,t,i,c)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){B.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(t){}get onerror(){}set onerror(t){}get onopen(){}set onopen(t){}get onmessage(){}set onmessage(t){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,i,c){let d=new q(this.binaryType,this._extensions,this._isServer,c);this._sender=new U(t,this._extensions),this._receiver=d,this._socket=t,d[ee]=this,t[ee]=this,d.on("conclude",receiverOnConclude),d.on("drain",receiverOnDrain),d.on("error",receiverOnError),d.on("message",receiverOnMessage),d.on("ping",receiverOnPing),d.on("pong",receiverOnPong),t.setTimeout(0),t.setNoDelay(),i.length>0&&t.unshift(i),t.on("close",socketOnClose),t.on("data",socketOnData),t.on("end",socketOnEnd),t.on("error",socketOnError),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[$.extensionName]&&this._extensions[$.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,i){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING)return abortHandshake(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===WebSocket.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=WebSocket.CLOSING,this._sender.close(t,i,!this._isServer,t=>{!t&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}ping(t,i,c){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t?(c=t,t=i=void 0):"function"==typeof i&&(c=i,i=void 0),"number"==typeof t&&(t=t.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,t,c);return}void 0===i&&(i=!this._isServer),this._sender.ping(t||F,i,c)}pong(t,i,c){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t?(c=t,t=i=void 0):"function"==typeof i&&(c=i,i=void 0),"number"==typeof t&&(t=t.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,t,c);return}void 0===i&&(i=!this._isServer),this._sender.pong(t||F,i,c)}send(t,i,c){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof i&&(c=i,i={}),"number"==typeof t&&(t=t.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,t,c);return}let d={binary:"string"!=typeof t,mask:!this._isServer,compress:!0,fin:!0,...i};this._extensions[$.extensionName]||(d.compress=!1),this._sender.send(t||F,d,c)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING)return abortHandshake(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy())}}};function emitErrorAndClose(t,i){t._readyState=WebSocket.CLOSING,t.emit("error",i),t.emitClose()}function netConnect(t){return t.path=t.socketPath,S.connect(t)}function tlsConnect(t){return t.path=void 0,t.servername||""===t.servername||(t.servername=S.isIP(t.host)?"":t.host),P.connect(t)}function abortHandshake(t,i,c){t._readyState=WebSocket.CLOSING;let d=Error(c);Error.captureStackTrace(d,abortHandshake),i.setHeader?(i.abort(),i.socket&&!i.socket.destroyed&&i.socket.destroy(),i.once("abort",t.emitClose.bind(t)),t.emit("error",d)):(i.destroy(d),i.once("error",t.emit.bind(t,"error")),i.once("close",t.emitClose.bind(t)))}function sendAfterClose(t,i,c){if(i){let c=eh(i).length;t._socket?t._sender._bufferedBytes+=c:t._bufferedAmount+=c}if(c){let i=Error(`WebSocket is not open: readyState ${t.readyState} (${ef[t.readyState]})`);c(i)}}function receiverOnConclude(t,i){let c=this[ee];c._closeFrameReceived=!0,c._closeMessage=i,c._closeCode=t,void 0!==c._socket[ee]&&(c._socket.removeListener("data",socketOnData),process.nextTick(resume,c._socket),1005===t?c.close():c.close(t,i))}function receiverOnDrain(){this[ee]._socket.resume()}function receiverOnError(t){let i=this[ee];void 0!==i._socket[ee]&&(i._socket.removeListener("data",socketOnData),process.nextTick(resume,i._socket),i.close(t[X])),i.emit("error",t)}function receiverOnFinish(){this[ee].emitClose()}function receiverOnMessage(t){this[ee].emit("message",t)}function receiverOnPing(t){let i=this[ee];i.pong(t,!i._isServer,et),i.emit("ping",t)}function receiverOnPong(t){this[ee].emit("pong",t)}function resume(t){t.resume()}function socketOnClose(){let t;let i=this[ee];this.removeListener("close",socketOnClose),this.removeListener("data",socketOnData),this.removeListener("end",socketOnEnd),i._readyState=WebSocket.CLOSING,this._readableState.endEmitted||i._closeFrameReceived||i._receiver._writableState.errorEmitted||null===(t=i._socket.read())||i._receiver.write(t),i._receiver.end(),this[ee]=void 0,clearTimeout(i._closeTimer),i._receiver._writableState.finished||i._receiver._writableState.errorEmitted?i.emitClose():(i._receiver.on("error",receiverOnFinish),i._receiver.on("finish",receiverOnFinish))}function socketOnData(t){this[ee]._receiver.write(t)||this.pause()}function socketOnEnd(){let t=this[ee];t._readyState=WebSocket.CLOSING,t._receiver.end(),this.end()}function socketOnError(){let t=this[ee];this.removeListener("error",socketOnError),this.on("error",et),t&&(t._readyState=WebSocket.CLOSING,this.destroy())}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:!0,value:ef.indexOf("CONNECTING")}),Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:!0,value:ef.indexOf("CONNECTING")}),Object.defineProperty(WebSocket,"OPEN",{enumerable:!0,value:ef.indexOf("OPEN")}),Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:!0,value:ef.indexOf("OPEN")}),Object.defineProperty(WebSocket,"CLOSING",{enumerable:!0,value:ef.indexOf("CLOSING")}),Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:!0,value:ef.indexOf("CLOSING")}),Object.defineProperty(WebSocket,"CLOSED",{enumerable:!0,value:ef.indexOf("CLOSED")}),Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:!0,value:ef.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(t=>{Object.defineProperty(WebSocket.prototype,t,{enumerable:!0})}),["open","error","close","message"].forEach(t=>{Object.defineProperty(WebSocket.prototype,`on${t}`,{enumerable:!0,get(){let i=this.listeners(t);for(let t=0;t<i.length;t++)if(i[t]._listener)return i[t]._listener},set(i){let c=this.listeners(t);for(let i=0;i<c.length;i++)c[i]._listener&&this.removeListener(t,c[i]);this.addEventListener(t,i)}})}),WebSocket.prototype.addEventListener=es,WebSocket.prototype.removeEventListener=eo,t.exports=WebSocket},7752:(t,i,c)=>{"use strict";let d;Object.defineProperty(i,"__esModule",{value:!0});var _=c(51738),w=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(c(57147));let S=":memory:",P=class{constructor(t){this.writeActionsQueue={state:"idle",actions:[]},d||(d=function(){try{let t=c(21143),i=c(40870);return{db:t,driver:i}}catch{throw Error('To use WalletConnect server side, you\'ll need to install the "unstorage" dependency. If you are seeing this error during a build / in an SSR environment, you can add "unstorage" as a devDependency to make this error go away.')}}()),t?.dbName===S?this.database=d.db.createStorage():this.database=d.db.createStorage({driver:d.driver({base:t?.dbName})})}static create(t){let i=t.dbName;return i===S?new P(t):(P.instances[i]||(P.instances[i]=new P(t)),P.instances[i])}async getKeys(){return this.database.getKeys()}async getEntries(){return(await this.database.getItems(await this.database.getKeys())).map(t=>[t.key,t.value])}async onWriteAction(t){let{key:i,value:c,action:d}=t,s=()=>({}),_=new Promise(t=>s=t);this.writeActionsQueue.actions.push({key:i,value:c,action:d,callback:s}),"idle"===this.writeActionsQueue.state&&this.startWriteActions(),await _}async startWriteActions(){if(0===this.writeActionsQueue.actions.length){this.writeActionsQueue.state="idle";return}for(this.writeActionsQueue.state="active";this.writeActionsQueue.actions.length>0;){let t=this.writeActionsQueue.actions.shift();if(!t)continue;let{key:i,value:c,action:d,callback:w}=t;switch(d){case"setItem":await this.database.setItem(i),await this.database.setItem(i,_.safeJsonStringify(c));break;case"removeItem":await this.database.removeItem(i)}w()}this.writeActionsQueue.state="idle"}async getItem(t){let i=await this.database.getItem(t);if(null!==i)return i}async setItem(t,i){await this.onWriteAction({key:t,value:i,action:"setItem"})}async removeItem(t){await this.onWriteAction({key:t,action:"removeItem"})}};P.instances={};let R=".to_migrate",K=async(t,i,c)=>{var d;if(t===S){c();return}let w="wc_storage_version",P=await i.getItem(w);if(P&&P>=1){c();return}let C=await Q(`${t}${R}`);if(!C){c();return}let T=_.safeJsonParse(C);if(!T){c();return}let A=null==(d=T?.collections)?void 0:d[0],$=A?.data;if(!$||!$.length){c();return}for(;$.length;){let t=$.shift();if(!t)continue;let{id:c,value:d}=t;await i.setItem(c,_.safeJsonParse(d))}await i.setItem(w,1),b(`${t}${R}`,`${t}.migrated`),c()},Q=async t=>await new Promise(i=>{w.default.readFile(t,{encoding:"utf8"},(t,c)=>{t&&i(void 0),i(c)})}),E=t=>{t!==S&&w.default.existsSync(t)&&(w.default.lstatSync(t).isDirectory()||b(t,`${t}${R}`))},b=(t,i)=>{try{w.default.renameSync(t,i)}catch{}};let I=class I{constructor(t){this.initialized=!1,this.setInitialized=()=>{this.initialized=!0};let i=t?.database||t?.table||"walletconnect.db";E(i),this.database=P.create({dbName:i}),K(i,this.database,this.setInitialized)}async getKeys(){return await this.initialize(),this.database.getKeys()}async getEntries(){return await this.initialize(),this.database.getEntries()}async getItem(t){return await this.initialize(),this.database.getItem(t)}async setItem(t,i){await this.initialize(),await this.database.setItem(t,i)}async removeItem(t){await this.initialize(),await this.database.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{let i=setInterval(()=>{this.initialized&&(clearInterval(i),t())},20)})}};i.IKeyValueStorage=class{},i.KeyValueStorage=I,i.default=I,i.parseEntry=function(t){var i;return[t[0],_.safeJsonParse(null!=(i=t[1])?i:"")]}},28021:(t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PINO_CUSTOM_CONTEXT_KEY=i.PINO_LOGGER_DEFAULTS=void 0,i.PINO_LOGGER_DEFAULTS={level:"info"},i.PINO_CUSTOM_CONTEXT_KEY="custom_context"},3491:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;let d=c(97795),_=d.__importDefault(c(55312));Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return _.default}}),d.__exportStar(c(28021),i),d.__exportStar(c(16372),i)},16372:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.generateChildLogger=i.formatChildLoggerContext=i.getLoggerContext=i.setBrowserLoggerContext=i.getBrowserLoggerContext=i.getDefaultLoggerOptions=void 0;let d=c(28021);function getBrowserLoggerContext(t,i=d.PINO_CUSTOM_CONTEXT_KEY){return t[i]||""}function setBrowserLoggerContext(t,i,c=d.PINO_CUSTOM_CONTEXT_KEY){return t[c]=i,t}function getLoggerContext(t,i=d.PINO_CUSTOM_CONTEXT_KEY){return void 0===t.bindings?getBrowserLoggerContext(t,i):t.bindings().context||""}function formatChildLoggerContext(t,i,c=d.PINO_CUSTOM_CONTEXT_KEY){let _=getLoggerContext(t,c),w=_.trim()?`${_}/${i}`:i;return w}i.getDefaultLoggerOptions=function(t){return Object.assign(Object.assign({},t),{level:(null==t?void 0:t.level)||d.PINO_LOGGER_DEFAULTS.level})},i.getBrowserLoggerContext=getBrowserLoggerContext,i.setBrowserLoggerContext=setBrowserLoggerContext,i.getLoggerContext=getLoggerContext,i.formatChildLoggerContext=formatChildLoggerContext,i.generateChildLogger=function(t,i,c=d.PINO_CUSTOM_CONTEXT_KEY){let _=formatChildLoggerContext(t,i,c),w=t.child({context:_});return setBrowserLoggerContext(w,_,c)}},97795:(t,i,c)=>{"use strict";c.r(i),c.d(i,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)i.hasOwnProperty(c)&&(t[c]=i[c])})(t,i)};function __extends(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var i,c=1,d=arguments.length;c<d;c++)for(var _ in i=arguments[c])Object.prototype.hasOwnProperty.call(i,_)&&(t[_]=i[_]);return t}).apply(this,arguments)};function __rest(t,i){var c={};for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&0>i.indexOf(d)&&(c[d]=t[d]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var _=0,d=Object.getOwnPropertySymbols(t);_<d.length;_++)0>i.indexOf(d[_])&&Object.prototype.propertyIsEnumerable.call(t,d[_])&&(c[d[_]]=t[d[_]]);return c}function __decorate(t,i,c,d){var _,w=arguments.length,S=w<3?i:null===d?d=Object.getOwnPropertyDescriptor(i,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(t,i,c,d);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(S=(w<3?_(S):w>3?_(i,c,S):_(i,c))||S);return w>3&&S&&Object.defineProperty(i,c,S),S}function __param(t,i){return function(c,d){i(c,d,t)}}function __metadata(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function __awaiter(t,i,c,d){return new(c||(c=Promise))(function(_,w){function fulfilled(t){try{step(d.next(t))}catch(t){w(t)}}function rejected(t){try{step(d.throw(t))}catch(t){w(t)}}function step(t){var i;t.done?_(t.value):((i=t.value)instanceof c?i:new c(function(t){t(i)})).then(fulfilled,rejected)}step((d=d.apply(t,i||[])).next())})}function __generator(t,i){var c,d,_,w,S={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return w={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function verb(w){return function(P){return function(w){if(c)throw TypeError("Generator is already executing.");for(;S;)try{if(c=1,d&&(_=2&w[0]?d.return:w[0]?d.throw||((_=d.return)&&_.call(d),0):d.next)&&!(_=_.call(d,w[1])).done)return _;switch(d=0,_&&(w=[2&w[0],_.value]),w[0]){case 0:case 1:_=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,d=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!(_=(_=S.trys).length>0&&_[_.length-1])&&(6===w[0]||2===w[0])){S=0;continue}if(3===w[0]&&(!_||w[1]>_[0]&&w[1]<_[3])){S.label=w[1];break}if(6===w[0]&&S.label<_[1]){S.label=_[1],_=w;break}if(_&&S.label<_[2]){S.label=_[2],S.ops.push(w);break}_[2]&&S.ops.pop(),S.trys.pop();continue}w=i.call(t,S)}catch(t){w=[6,t],d=0}finally{c=_=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,P])}}}function __createBinding(t,i,c,d){void 0===d&&(d=c),t[d]=i[c]}function __exportStar(t,i){for(var c in t)"default"===c||i.hasOwnProperty(c)||(i[c]=t[c])}function __values(t){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&t[i],d=0;if(c)return c.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&d>=t.length&&(t=void 0),{value:t&&t[d++],done:!t}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,i){var c="function"==typeof Symbol&&t[Symbol.iterator];if(!c)return t;var d,_,w=c.call(t),S=[];try{for(;(void 0===i||i-- >0)&&!(d=w.next()).done;)S.push(d.value)}catch(t){_={error:t}}finally{try{d&&!d.done&&(c=w.return)&&c.call(w)}finally{if(_)throw _.error}}return S}function __spread(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(__read(arguments[i]));return t}function __spreadArrays(){for(var t=0,i=0,c=arguments.length;i<c;i++)t+=arguments[i].length;for(var d=Array(t),_=0,i=0;i<c;i++)for(var w=arguments[i],S=0,P=w.length;S<P;S++,_++)d[_]=w[S];return d}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,_=c.apply(t,i||[]),w=[];return d={},verb("next"),verb("throw"),verb("return"),d[Symbol.asyncIterator]=function(){return this},d;function verb(t){_[t]&&(d[t]=function(i){return new Promise(function(c,d){w.push([t,i,c,d])>1||resume(t,i)})})}function resume(t,i){try{var c;(c=_[t](i)).value instanceof __await?Promise.resolve(c.value.v).then(fulfill,reject):settle(w[0][2],c)}catch(t){settle(w[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,i){t(i),w.shift(),w.length&&resume(w[0][0],w[0][1])}}function __asyncDelegator(t){var i,c;return i={},verb("next"),verb("throw",function(t){throw t}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(d,_){i[d]=t[d]?function(i){return(c=!c)?{value:__await(t[d](i)),done:"return"===d}:_?_(i):i}:_}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=t[Symbol.asyncIterator];return c?c.call(t):(t=__values(t),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=t[c]&&function(i){return new Promise(function(d,_){(function(t,i,c,d){Promise.resolve(d).then(function(i){t({value:i,done:c})},i)})(d,_,(i=t[c](i)).done,i.value)})}}}function __makeTemplateObject(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}function __importStar(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var c in t)Object.hasOwnProperty.call(t,c)&&(i[c]=t[c]);return i.default=t,i}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,i){if(!i.has(t))throw TypeError("attempted to get private field on non-instance");return i.get(t)}function __classPrivateFieldSet(t,i,c){if(!i.has(t))throw TypeError("attempted to set private field on non-instance");return i.set(t,c),c}},90812:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.verifyJWT=i.signJWT=i.generateKeyPair=void 0;let d=c(1514),_=d.__importStar(c(50535)),w=c(53412),S=c(26438),P=c(96356),R=c(24816);i.generateKeyPair=function(t=w.randomBytes(P.KEY_PAIR_SEED_LENGTH)){return _.generateKeyPairFromSeed(t)},i.signJWT=function(t,i,c,w,C=S.fromMiliseconds(Date.now())){return d.__awaiter(this,void 0,void 0,function*(){let d={alg:P.JWT_IRIDIUM_ALG,typ:P.JWT_IRIDIUM_TYP},S=R.encodeIss(w.publicKey),T=C+c,A={iss:S,sub:t,aud:i,iat:C,exp:T},$=R.encodeData({header:d,payload:A}),q=_.sign(w.secretKey,$);return R.encodeJWT({header:d,payload:A,signature:q})})},i.verifyJWT=function(t){return d.__awaiter(this,void 0,void 0,function*(){let{header:i,payload:c,data:d,signature:w}=R.decodeJWT(t);if(i.alg!==P.JWT_IRIDIUM_ALG||i.typ!==P.JWT_IRIDIUM_TYP)throw Error("JWT must use EdDSA algorithm");let S=R.decodeIss(c.iss);return _.verify(S,d,w)})}},96356:(t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KEY_PAIR_SEED_LENGTH=i.MULTICODEC_ED25519_LENGTH=i.MULTICODEC_ED25519_HEADER=i.MULTICODEC_ED25519_BASE=i.MULTICODEC_ED25519_ENCODING=i.DID_METHOD=i.DID_PREFIX=i.DID_DELIMITER=i.DATA_ENCODING=i.JSON_ENCODING=i.JWT_ENCODING=i.JWT_DELIMITER=i.JWT_IRIDIUM_TYP=i.JWT_IRIDIUM_ALG=void 0,i.JWT_IRIDIUM_ALG="EdDSA",i.JWT_IRIDIUM_TYP="JWT",i.JWT_DELIMITER=".",i.JWT_ENCODING="base64url",i.JSON_ENCODING="utf8",i.DATA_ENCODING="utf8",i.DID_DELIMITER=":",i.DID_PREFIX="did",i.DID_METHOD="key",i.MULTICODEC_ED25519_ENCODING="base58btc",i.MULTICODEC_ED25519_BASE="z",i.MULTICODEC_ED25519_HEADER="K36",i.MULTICODEC_ED25519_LENGTH=32,i.KEY_PAIR_SEED_LENGTH=32},55336:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let d=c(1514);d.__exportStar(c(90812),i),d.__exportStar(c(96356),i),d.__exportStar(c(63288),i),d.__exportStar(c(24816),i)},63288:(t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0})},24816:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.decodeJWT=i.encodeJWT=i.decodeData=i.encodeData=i.decodeSig=i.encodeSig=i.decodeIss=i.encodeIss=i.encodeJSON=i.decodeJSON=void 0;let d=c(33391),_=c(45594),w=c(5007),S=c(51738),P=c(96356);function decodeJSON(t){return S.safeJsonParse(_.toString(w.fromString(t,P.JWT_ENCODING),P.JSON_ENCODING))}function encodeJSON(t){return _.toString(w.fromString(S.safeJsonStringify(t),P.JSON_ENCODING),P.JWT_ENCODING)}function encodeSig(t){return _.toString(t,P.JWT_ENCODING)}function decodeSig(t){return w.fromString(t,P.JWT_ENCODING)}i.decodeJSON=decodeJSON,i.encodeJSON=encodeJSON,i.encodeIss=function(t){let i=w.fromString(P.MULTICODEC_ED25519_HEADER,P.MULTICODEC_ED25519_ENCODING),c=P.MULTICODEC_ED25519_BASE+_.toString(d.concat([i,t]),P.MULTICODEC_ED25519_ENCODING);return[P.DID_PREFIX,P.DID_METHOD,c].join(P.DID_DELIMITER)},i.decodeIss=function(t){let[i,c,d]=t.split(P.DID_DELIMITER);if(i!==P.DID_PREFIX||c!==P.DID_METHOD)throw Error('Issuer must be a DID with method "key"');let S=d.slice(0,1);if(S!==P.MULTICODEC_ED25519_BASE)throw Error("Issuer must be a key in mulicodec format");let R=w.fromString(d.slice(1),P.MULTICODEC_ED25519_ENCODING),C=_.toString(R.slice(0,2),P.MULTICODEC_ED25519_ENCODING);if(C!==P.MULTICODEC_ED25519_HEADER)throw Error('Issuer must be a public key with type "Ed25519"');let T=R.slice(2);if(T.length!==P.MULTICODEC_ED25519_LENGTH)throw Error("Issuer must be a public key with length 32 bytes");return T},i.encodeSig=encodeSig,i.decodeSig=decodeSig,i.encodeData=function(t){return w.fromString([encodeJSON(t.header),encodeJSON(t.payload)].join(P.JWT_DELIMITER),P.DATA_ENCODING)},i.decodeData=function(t){let i=_.toString(t,P.DATA_ENCODING).split(P.JWT_DELIMITER),c=decodeJSON(i[0]),d=decodeJSON(i[1]);return{header:c,payload:d}},i.encodeJWT=function(t){return[encodeJSON(t.header),encodeJSON(t.payload),encodeSig(t.signature)].join(P.JWT_DELIMITER)},i.decodeJWT=function(t){let i=t.split(P.JWT_DELIMITER),c=decodeJSON(i[0]),d=decodeJSON(i[1]),_=decodeSig(i[2]),S=w.fromString(i.slice(0,2).join(P.JWT_DELIMITER),P.DATA_ENCODING);return{header:c,payload:d,signature:_,data:S}}},1514:(t,i,c)=>{"use strict";c.r(i),c.d(i,{__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__read:()=>__read,__rest:()=>__rest,__spread:()=>__spread,__spreadArrays:()=>__spreadArrays,__values:()=>__values});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)i.hasOwnProperty(c)&&(t[c]=i[c])})(t,i)};function __extends(t,i){function __(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var i,c=1,d=arguments.length;c<d;c++)for(var _ in i=arguments[c])Object.prototype.hasOwnProperty.call(i,_)&&(t[_]=i[_]);return t}).apply(this,arguments)};function __rest(t,i){var c={};for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&0>i.indexOf(d)&&(c[d]=t[d]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var _=0,d=Object.getOwnPropertySymbols(t);_<d.length;_++)0>i.indexOf(d[_])&&Object.prototype.propertyIsEnumerable.call(t,d[_])&&(c[d[_]]=t[d[_]]);return c}function __decorate(t,i,c,d){var _,w=arguments.length,S=w<3?i:null===d?d=Object.getOwnPropertyDescriptor(i,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(t,i,c,d);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(S=(w<3?_(S):w>3?_(i,c,S):_(i,c))||S);return w>3&&S&&Object.defineProperty(i,c,S),S}function __param(t,i){return function(c,d){i(c,d,t)}}function __metadata(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function __awaiter(t,i,c,d){return new(c||(c=Promise))(function(_,w){function fulfilled(t){try{step(d.next(t))}catch(t){w(t)}}function rejected(t){try{step(d.throw(t))}catch(t){w(t)}}function step(t){var i;t.done?_(t.value):((i=t.value)instanceof c?i:new c(function(t){t(i)})).then(fulfilled,rejected)}step((d=d.apply(t,i||[])).next())})}function __generator(t,i){var c,d,_,w,S={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return w={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function verb(w){return function(P){return function(w){if(c)throw TypeError("Generator is already executing.");for(;S;)try{if(c=1,d&&(_=2&w[0]?d.return:w[0]?d.throw||((_=d.return)&&_.call(d),0):d.next)&&!(_=_.call(d,w[1])).done)return _;switch(d=0,_&&(w=[2&w[0],_.value]),w[0]){case 0:case 1:_=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,d=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!(_=(_=S.trys).length>0&&_[_.length-1])&&(6===w[0]||2===w[0])){S=0;continue}if(3===w[0]&&(!_||w[1]>_[0]&&w[1]<_[3])){S.label=w[1];break}if(6===w[0]&&S.label<_[1]){S.label=_[1],_=w;break}if(_&&S.label<_[2]){S.label=_[2],S.ops.push(w);break}_[2]&&S.ops.pop(),S.trys.pop();continue}w=i.call(t,S)}catch(t){w=[6,t],d=0}finally{c=_=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,P])}}}function __createBinding(t,i,c,d){void 0===d&&(d=c),t[d]=i[c]}function __exportStar(t,i){for(var c in t)"default"===c||i.hasOwnProperty(c)||(i[c]=t[c])}function __values(t){var i="function"==typeof Symbol&&Symbol.iterator,c=i&&t[i],d=0;if(c)return c.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&d>=t.length&&(t=void 0),{value:t&&t[d++],done:!t}}};throw TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,i){var c="function"==typeof Symbol&&t[Symbol.iterator];if(!c)return t;var d,_,w=c.call(t),S=[];try{for(;(void 0===i||i-- >0)&&!(d=w.next()).done;)S.push(d.value)}catch(t){_={error:t}}finally{try{d&&!d.done&&(c=w.return)&&c.call(w)}finally{if(_)throw _.error}}return S}function __spread(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(__read(arguments[i]));return t}function __spreadArrays(){for(var t=0,i=0,c=arguments.length;i<c;i++)t+=arguments[i].length;for(var d=Array(t),_=0,i=0;i<c;i++)for(var w=arguments[i],S=0,P=w.length;S<P;S++,_++)d[_]=w[S];return d}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,i,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,_=c.apply(t,i||[]),w=[];return d={},verb("next"),verb("throw"),verb("return"),d[Symbol.asyncIterator]=function(){return this},d;function verb(t){_[t]&&(d[t]=function(i){return new Promise(function(c,d){w.push([t,i,c,d])>1||resume(t,i)})})}function resume(t,i){try{var c;(c=_[t](i)).value instanceof __await?Promise.resolve(c.value.v).then(fulfill,reject):settle(w[0][2],c)}catch(t){settle(w[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,i){t(i),w.shift(),w.length&&resume(w[0][0],w[0][1])}}function __asyncDelegator(t){var i,c;return i={},verb("next"),verb("throw",function(t){throw t}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(d,_){i[d]=t[d]?function(i){return(c=!c)?{value:__await(t[d](i)),done:"return"===d}:_?_(i):i}:_}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,c=t[Symbol.asyncIterator];return c?c.call(t):(t=__values(t),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(c){i[c]=t[c]&&function(i){return new Promise(function(d,_){(function(t,i,c,d){Promise.resolve(d).then(function(i){t({value:i,done:c})},i)})(d,_,(i=t[c](i)).done,i.value)})}}}function __makeTemplateObject(t,i){return Object.defineProperty?Object.defineProperty(t,"raw",{value:i}):t.raw=i,t}function __importStar(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var c in t)Object.hasOwnProperty.call(t,c)&&(i[c]=t[c]);return i.default=t,i}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,i){if(!i.has(t))throw TypeError("attempted to get private field on non-instance");return i.get(t)}function __classPrivateFieldSet(t,i,c){if(!i.has(t))throw TypeError("attempted to set private field on non-instance");return i.set(t,c),c}},66226:(t,i,c)=>{"use strict";var d=c(78771),_=c(3491),w=c(49454),S=c(40491),P=c(82361),R=c(26438),C=c(25815),T=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(P);let A="client",$=`wc@2:${A}:`,q={name:A,logger:"error"},U="WALLETCONNECT_DEEPLINK_CHOICE",B=(R.THIRTY_DAYS,"Proposal expired"),F=R.SEVEN_DAYS,J={wc_sessionPropose:{req:{ttl:R.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:R.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:R.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:R.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:R.ONE_DAY,prompt:!1,tag:1104},res:{ttl:R.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:R.ONE_DAY,prompt:!1,tag:1106},res:{ttl:R.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:R.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:R.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:R.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:R.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:R.ONE_DAY,prompt:!1,tag:1112},res:{ttl:R.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:R.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:R.THIRTY_SECONDS,prompt:!1,tag:1115}}},X={min:R.FIVE_MINUTES,max:R.SEVEN_DAYS},ee={idle:"IDLE",active:"ACTIVE"},et=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var es=Object.defineProperty,eo=Object.defineProperties,ec=Object.getOwnPropertyDescriptors,el=Object.getOwnPropertySymbols,eh=Object.prototype.hasOwnProperty,ef=Object.prototype.propertyIsEnumerable,j=(t,i,c)=>i in t?es(t,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[i]=c,m=(t,i)=>{for(var c in i||(i={}))eh.call(i,c)&&j(t,c,i[c]);if(el)for(var c of el(i))ef.call(i,c)&&j(t,c,i[c]);return t},f=(t,i)=>eo(t,ec(i));let pe=class pe extends w.IEngine{constructor(t){super(t),this.name="engine",this.events=new T.default,this.initialized=!1,this.ignoredPayloadTypes=[S.TYPE_1],this.requestQueue={state:ee.idle,queue:[]},this.sessionRequestQueue={state:ee.idle,queue:[]},this.requestQueueDelay=R.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(J)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},R.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();let i=f(m({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);let{pairingTopic:c,requiredNamespaces:_,optionalNamespaces:w,sessionProperties:P,relays:C}=i,T=c,A,$=!1;if(T&&($=this.client.core.pairing.pairings.get(T).active),!T||!$){let{topic:t,uri:i}=await this.client.core.pairing.create();T=t,A=i}let q=await this.client.core.crypto.generateKeyPair(),U=m({requiredNamespaces:_,optionalNamespaces:w,relays:C??[{protocol:d.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:q,metadata:this.client.metadata}},P&&{sessionProperties:P}),{reject:F,resolve:J,done:X}=S.createDelayedPromise(R.FIVE_MINUTES,B);if(this.events.once(S.engineEvent("session_connect"),async({error:t,session:i})=>{if(t)F(t);else if(i){i.self.publicKey=q;let t=f(m({},i),{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces});await this.client.session.set(i.topic,t),await this.setExpiry(i.topic,i.expiry),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:i.peer.metadata}),J(t)}}),!T){let{message:t}=S.getInternalError("NO_MATCHING_KEY",`connect() pairing topic: ${T}`);throw Error(t)}let ee=await this.sendRequest({topic:T,method:"wc_sessionPropose",params:U}),et=S.calcExpiry(R.FIVE_MINUTES);return await this.setProposal(ee,m({id:ee,expiry:et},U)),{uri:A,approval:X}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);let{id:i,relayProtocol:c,namespaces:d,sessionProperties:_}=t,w=this.client.proposal.get(i),{pairingTopic:P,proposer:R,requiredNamespaces:C,optionalNamespaces:T}=w;P=P||"",S.isValidObject(C)||(C=S.getRequiredNamespacesFromNamespaces(d,"approve()"));let A=await this.client.core.crypto.generateKeyPair(),$=R.publicKey,q=await this.client.core.crypto.generateSharedKey(A,$);P&&i&&(await this.client.core.pairing.updateMetadata({topic:P,metadata:R.metadata}),await this.sendResult({id:i,topic:P,result:{relay:{protocol:c??"irn"},responderPublicKey:A}}),await this.client.proposal.delete(i,S.getSdkError("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:P}));let U=m({relay:{protocol:c??"irn"},namespaces:d,requiredNamespaces:C,optionalNamespaces:T,pairingTopic:P,controller:{publicKey:A,metadata:this.client.metadata},expiry:S.calcExpiry(F)},_&&{sessionProperties:_});await this.client.core.relayer.subscribe(q),await this.sendRequest({topic:q,method:"wc_sessionSettle",params:U,throwOnFailedPublish:!0});let B=f(m({},U),{topic:q,pairingTopic:P,acknowledged:!1,self:U.controller,peer:{publicKey:R.publicKey,metadata:R.metadata},controller:A});return await this.client.session.set(q,B),await this.setExpiry(q,S.calcExpiry(F)),{topic:q,acknowledged:()=>new Promise(t=>setTimeout(()=>t(this.client.session.get(q)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);let{id:i,reason:c}=t,{pairingTopic:d}=this.client.proposal.get(i);d&&(await this.sendError(i,d,c),await this.client.proposal.delete(i,S.getSdkError("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);let{topic:i,namespaces:c}=t,d=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:c}}),{done:_,resolve:w,reject:P}=S.createDelayedPromise();return this.events.once(S.engineEvent("session_update",d),({error:t})=>{t?P(t):w()}),await this.client.session.update(i,{namespaces:c}),{acknowledged:_}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);let{topic:i}=t,c=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:d,resolve:_,reject:w}=S.createDelayedPromise();return this.events.once(S.engineEvent("session_extend",c),({error:t})=>{t?w(t):_()}),await this.setExpiry(i,S.calcExpiry(F)),{acknowledged:d}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);let{chainId:i,request:c,topic:d,expiry:_}=t,w=C.payloadId(),{done:P,resolve:R,reject:T}=S.createDelayedPromise(_,"Request expired. Please try again.");return this.events.once(S.engineEvent("session_request",w),({error:t,result:i})=>{t?T(t):R(i)}),await Promise.all([new Promise(async t=>{await this.sendRequest({clientRpcId:w,topic:d,method:"wc_sessionRequest",params:{request:c,chainId:i},expiry:_,throwOnFailedPublish:!0}).catch(t=>T(t)),this.client.events.emit("session_request_sent",{topic:d,request:c,chainId:i,id:w}),t()}),new Promise(async t=>{let i=await S.getDeepLink(this.client.core.storage,U);S.handleDeeplinkRedirect({id:w,topic:d,wcDeepLink:i}),t()}),P()]).then(t=>t[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);let{topic:i,response:c}=t,{id:d}=c;C.isJsonRpcResult(c)?await this.sendResult({id:d,topic:i,result:c.result,throwOnFailedPublish:!0}):C.isJsonRpcError(c)&&await this.sendError(d,i,c.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);let{topic:i}=t;if(this.client.session.keys.includes(i)){let t=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:c,resolve:d,reject:_}=S.createDelayedPromise();this.events.once(S.engineEvent("session_ping",t),({error:t})=>{t?_(t):d()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);let{topic:i,event:c,chainId:d}=t;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:c,chainId:d}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);let{topic:i}=t;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:S.getSdkError("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>S.isSessionCompatible(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{let i=this.client.core.pairing.pairings.get(t.pairingTopic),c=this.client.core.pairing.pairings.getAll().filter(c=>{var d,_;return(null==(d=c.peerMetadata)?void 0:d.url)&&(null==(_=c.peerMetadata)?void 0:_.url)===t.peer.metadata.url&&c.topic&&c.topic!==i.topic});if(0===c.length)return;this.client.logger.info(`Cleaning up ${c.length} duplicate pairing(s)`),await Promise.all(c.map(t=>this.client.core.pairing.disconnect({topic:t.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async(t,i)=>{let{self:c}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,S.getSdkError("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t),this.client.core.storage.removeItem(U).catch(t=>this.client.logger.warn(t)),this.getPendingSessionRequests().forEach(i=>{i.topic===t&&this.deletePendingSessionRequest(i.id,S.getSdkError("USER_DISCONNECTED"))})},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,S.getSdkError("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),c?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==t),c&&(this.sessionRequestQueue.state=ee.idle)},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{let i=J.wc_sessionRequest.req.ttl,{id:c,topic:d,params:_,verifyContext:w}=t;await this.client.pendingRequest.set(c,{id:c,topic:d,params:_,verifyContext:w}),i&&this.client.core.expirer.set(c,S.calcExpiry(i))},this.sendRequest=async t=>{let{topic:i,method:c,params:d,expiry:_,relayRpcId:w,clientRpcId:P,throwOnFailedPublish:R}=t,T=C.formatJsonRpcRequest(c,d,P);if(S.isBrowser()&&et.includes(c)){let t=S.hashMessage(JSON.stringify(T));this.client.core.verify.register({attestationId:t})}let A=await this.client.core.crypto.encode(i,T),$=J[c].req;return _&&($.ttl=_),w&&($.id=w),this.client.core.history.set(i,T),R?($.internal=f(m({},$.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,A,$)):this.client.core.relayer.publish(i,A,$).catch(t=>this.client.logger.error(t)),T.id},this.sendResult=async t=>{let{id:i,topic:c,result:d,throwOnFailedPublish:_}=t,w=C.formatJsonRpcResult(i,d),S=await this.client.core.crypto.encode(c,w),P=await this.client.core.history.get(c,i),R=J[P.request.method].res;_?(R.internal=f(m({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(c,S,R)):this.client.core.relayer.publish(c,S,R).catch(t=>this.client.logger.error(t)),await this.client.core.history.resolve(w)},this.sendError=async(t,i,c)=>{let d=C.formatJsonRpcError(t,c),_=await this.client.core.crypto.encode(i,d),w=await this.client.core.history.get(i,t),S=J[w.request.method].res;this.client.core.relayer.publish(i,_,S),await this.client.core.history.resolve(d)},this.cleanup=async()=>{let t=[],i=[];this.client.session.getAll().forEach(i=>{S.isExpired(i.expiry)&&t.push(i.topic)}),this.client.proposal.getAll().forEach(t=>{S.isExpired(t.expiry)&&i.push(t.id)}),await Promise.all([...t.map(t=>this.deleteSession(t)),...i.map(t=>this.deleteProposal(t))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ee.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ee.active;let t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(t=>setTimeout(t,300))}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=ee.idle},this.processRequest=t=>{let{topic:i,payload:c}=t,d=c.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(i,c);case"wc_sessionSettle":return this.onSessionSettleRequest(i,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,c);case"wc_sessionExtend":return this.onSessionExtendRequest(i,c);case"wc_sessionPing":return this.onSessionPingRequest(i,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,c);case"wc_sessionRequest":return this.onSessionRequest(i,c);case"wc_sessionEvent":return this.onSessionEventRequest(i,c);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async t=>{let{topic:i,payload:c}=t,d=(await this.client.core.history.get(i,c.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(i,c);case"wc_sessionSettle":return this.onSessionSettleResponse(i,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,c);case"wc_sessionExtend":return this.onSessionExtendResponse(i,c);case"wc_sessionPing":return this.onSessionPingResponse(i,c);case"wc_sessionRequest":return this.onSessionRequestResponse(i,c);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=t=>{let{topic:i}=t,{message:c}=S.getInternalError("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw Error(c)},this.onSessionProposeRequest=async(t,i)=>{let{params:c,id:d}=i;try{this.isValidConnect(m({},i.params));let _=S.calcExpiry(R.FIVE_MINUTES),w=m({id:d,pairingTopic:t,expiry:_},c);await this.setProposal(d,w);let P=S.hashMessage(JSON.stringify(i)),C=await this.getVerifyContext(P,w.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:w,verifyContext:C})}catch(i){await this.sendError(d,t,i),this.client.logger.error(i)}},this.onSessionProposeResponse=async(t,i)=>{let{id:c}=i;if(C.isJsonRpcResult(i)){let{result:d}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});let _=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:_});let w=_.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:w});let S=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:S});let P=await this.client.core.crypto.generateSharedKey(w,S);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:P});let R=await this.client.core.relayer.subscribe(P);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:R}),await this.client.core.pairing.activate({topic:t})}else C.isJsonRpcError(i)&&(await this.client.proposal.delete(c,S.getSdkError("USER_DISCONNECTED")),this.events.emit(S.engineEvent("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{let{id:c,params:d}=i;try{this.isValidSessionSettleRequest(d);let{relay:c,controller:_,expiry:w,namespaces:P,requiredNamespaces:R,optionalNamespaces:C,sessionProperties:T,pairingTopic:A}=i.params,$=m({topic:t,relay:c,expiry:w,namespaces:P,acknowledged:!0,pairingTopic:A,requiredNamespaces:R,optionalNamespaces:C,controller:_.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:_.publicKey,metadata:_.metadata}},T&&{sessionProperties:T});await this.sendResult({id:i.id,topic:t,result:!0}),this.events.emit(S.engineEvent("session_connect"),{session:$}),this.cleanupDuplicatePairings($)}catch(i){await this.sendError(c,t,i),this.client.logger.error(i)}},this.onSessionSettleResponse=async(t,i)=>{let{id:c}=i;C.isJsonRpcResult(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(S.engineEvent("session_approve",c),{})):C.isJsonRpcError(i)&&(await this.client.session.delete(t,S.getSdkError("USER_DISCONNECTED")),this.events.emit(S.engineEvent("session_approve",c),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{let{params:c,id:d}=i;try{let i=`${t}_session_update`,_=S.MemoryStore.get(i);if(_&&this.isRequestOutOfSync(_,d)){this.client.logger.info(`Discarding out of sync request - ${d}`);return}this.isValidUpdate(m({topic:t},c)),await this.client.session.update(t,{namespaces:c.namespaces}),await this.sendResult({id:d,topic:t,result:!0}),this.client.events.emit("session_update",{id:d,topic:t,params:c}),S.MemoryStore.set(i,d)}catch(i){await this.sendError(d,t,i),this.client.logger.error(i)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{let{id:c}=i;C.isJsonRpcResult(i)?this.events.emit(S.engineEvent("session_update",c),{}):C.isJsonRpcError(i)&&this.events.emit(S.engineEvent("session_update",c),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{let{id:c}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,S.calcExpiry(F)),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_extend",{id:c,topic:t})}catch(i){await this.sendError(c,t,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(t,i)=>{let{id:c}=i;C.isJsonRpcResult(i)?this.events.emit(S.engineEvent("session_extend",c),{}):C.isJsonRpcError(i)&&this.events.emit(S.engineEvent("session_extend",c),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{let{id:c}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_ping",{id:c,topic:t})}catch(i){await this.sendError(c,t,i),this.client.logger.error(i)}},this.onSessionPingResponse=(t,i)=>{let{id:c}=i;setTimeout(()=>{C.isJsonRpcResult(i)?this.events.emit(S.engineEvent("session_ping",c),{}):C.isJsonRpcError(i)&&this.events.emit(S.engineEvent("session_ping",c),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(d.RELAYER_EVENTS.publish,async()=>{i(await this.deleteSession(t))})}),this.sendResult({id:c,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:c,topic:t})}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,i)=>{let{id:c,params:d}=i;try{this.isValidRequest(m({topic:t},d));let i=S.hashMessage(JSON.stringify(C.formatJsonRpcRequest("wc_sessionRequest",d,c))),_=this.client.session.get(t),w=await this.getVerifyContext(i,_.peer.metadata),P={id:c,topic:t,params:d,verifyContext:w};await this.setPendingSessionRequest(P),this.addSessionRequestToSessionRequestQueue(P),this.processSessionRequestQueue()}catch(i){await this.sendError(c,t,i),this.client.logger.error(i)}},this.onSessionRequestResponse=(t,i)=>{let{id:c}=i;C.isJsonRpcResult(i)?this.events.emit(S.engineEvent("session_request",c),{result:i.result}):C.isJsonRpcError(i)&&this.events.emit(S.engineEvent("session_request",c),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{let{id:c,params:d}=i;try{let i=`${t}_session_event_${d.event.name}`,_=S.MemoryStore.get(i);if(_&&this.isRequestOutOfSync(_,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidEmit(m({topic:t},d)),this.client.events.emit("session_event",{id:c,topic:t,params:d}),S.MemoryStore.set(i,c)}catch(i){await this.sendError(c,t,i),this.client.logger.error(i)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ee.idle,this.processSessionRequestQueue()},R.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ee.active){this.client.logger.info("session request queue is already active.");return}let t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ee.active,this.client.events.emit("session_request",t)}catch(t){this.client.logger.error(t)}},this.onPairingCreated=t=>{if(t.active)return;let i=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);i&&this.onSessionProposeRequest(t.topic,C.formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw Error(i)}let{pairingTopic:i,requiredNamespaces:c,optionalNamespaces:d,sessionProperties:_,relays:w}=t;if(S.isUndefined(i)||await this.isValidPairingTopic(i),!S.isValidRelays(w,!0)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`connect() relays: ${w}`);throw Error(t)}S.isUndefined(c)||0===S.isValidObject(c)||this.validateNamespaces(c,"requiredNamespaces"),S.isUndefined(d)||0===S.isValidObject(d)||this.validateNamespaces(d,"optionalNamespaces"),S.isUndefined(_)||this.validateSessionProps(_,"sessionProperties")},this.validateNamespaces=(t,i)=>{let c=S.isValidRequiredNamespaces(t,"connect()",i);if(c)throw Error(c.message)},this.isValidApprove=async t=>{if(!S.isValidParams(t))throw Error(S.getInternalError("MISSING_OR_INVALID",`approve() params: ${t}`).message);let{id:i,namespaces:c,relayProtocol:d,sessionProperties:_}=t;await this.isValidProposalId(i);let w=this.client.proposal.get(i),P=S.isValidNamespaces(c,"approve()");if(P)throw Error(P.message);let R=S.isConformingNamespaces(w.requiredNamespaces,c,"approve()");if(R)throw Error(R.message);if(!S.isValidString(d,!0)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw Error(t)}S.isUndefined(_)||this.validateSessionProps(_,"sessionProperties")},this.isValidReject=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`reject() params: ${t}`);throw Error(i)}let{id:i,reason:c}=t;if(await this.isValidProposalId(i),!S.isValidErrorReason(c)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw Error(t)}},this.isValidSessionSettleRequest=t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw Error(i)}let{relay:i,controller:c,namespaces:d,expiry:_}=t;if(!S.isValidRelay(i)){let{message:t}=S.getInternalError("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(t)}let w=S.isValidController(c,"onSessionSettleRequest()");if(w)throw Error(w.message);let P=S.isValidNamespaces(d,"onSessionSettleRequest()");if(P)throw Error(P.message);if(S.isExpired(_)){let{message:t}=S.getInternalError("EXPIRED","onSessionSettleRequest()");throw Error(t)}},this.isValidUpdate=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`update() params: ${t}`);throw Error(i)}let{topic:i,namespaces:c}=t;await this.isValidSessionTopic(i);let d=this.client.session.get(i),_=S.isValidNamespaces(c,"update()");if(_)throw Error(_.message);let w=S.isConformingNamespaces(d.requiredNamespaces,c,"update()");if(w)throw Error(w.message)},this.isValidExtend=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`extend() params: ${t}`);throw Error(i)}let{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`request() params: ${t}`);throw Error(i)}let{topic:i,request:c,chainId:d,expiry:_}=t;await this.isValidSessionTopic(i);let{namespaces:w}=this.client.session.get(i);if(!S.isValidNamespacesChainId(w,d)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`request() chainId: ${d}`);throw Error(t)}if(!S.isValidRequest(c)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`request() ${JSON.stringify(c)}`);throw Error(t)}if(!S.isValidNamespacesRequest(w,d,c.method)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`request() method: ${c.method}`);throw Error(t)}if(_&&!S.isValidRequestExpiry(_,X)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`request() expiry: ${_}. Expiry must be a number (in seconds) between ${X.min} and ${X.max}`);throw Error(t)}},this.isValidRespond=async t=>{var i;if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`respond() params: ${t}`);throw Error(i)}let{topic:c,response:d}=t;try{await this.isValidSessionTopic(c)}catch(c){throw null!=(i=t?.response)&&i.id&&this.cleanupAfterResponse(t),c}if(!S.isValidResponse(d)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw Error(t)}},this.isValidPing=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`ping() params: ${t}`);throw Error(i)}let{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`emit() params: ${t}`);throw Error(i)}let{topic:i,event:c,chainId:d}=t;await this.isValidSessionTopic(i);let{namespaces:_}=this.client.session.get(i);if(!S.isValidNamespacesChainId(_,d)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw Error(t)}if(!S.isValidEvent(c)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(t)}if(!S.isValidNamespacesEvent(_,d,c.name)){let{message:t}=S.getInternalError("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(c)}`);throw Error(t)}},this.isValidDisconnect=async t=>{if(!S.isValidParams(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw Error(i)}let{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{let c={verified:{verifyUrl:i.verifyUrl||d.VERIFY_SERVER,validation:"UNKNOWN",origin:i.url||""}};try{let d=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});d&&(c.verified.origin=d.origin,c.verified.isScam=d.isScam,c.verified.validation=d.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(t){this.client.logger.info(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(t=>{if(!S.isValidString(t,!1)){let{message:c}=S.getInternalError("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw Error(c)}})}}async isInitialized(){if(!this.initialized){let{message:t}=S.getInternalError("NOT_INITIALIZED",this.name);throw Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(d.RELAYER_EVENTS.message,async t=>{let{topic:i,message:c}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(c)))return;let d=await this.client.core.crypto.decode(i,c);try{C.isJsonRpcRequest(d)?(this.client.core.history.set(i,d),this.onRelayEventRequest({topic:i,payload:d})):C.isJsonRpcResponse(d)?(await this.client.core.history.resolve(d),await this.onRelayEventResponse({topic:i,payload:d}),this.client.core.history.delete(i,d.id)):this.onRelayEventUnknownPayload({topic:i,payload:d})}catch(t){this.client.logger.error(t)}})}registerExpirerEvents(){this.client.core.expirer.on(d.EXPIRER_EVENTS.expired,async t=>{let{topic:i,id:c}=S.parseExpirerTarget(t.target);if(c&&this.client.pendingRequest.keys.includes(c))return await this.deletePendingSessionRequest(c,S.getInternalError("EXPIRED"),!0);i?this.client.session.keys.includes(i)&&(await this.deleteSession(i,!0),this.client.events.emit("session_expire",{topic:i})):c&&(await this.deleteProposal(c,!0),this.client.events.emit("proposal_expire",{id:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(d.PAIRING_EVENTS.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!S.isValidString(t,!1)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw Error(i)}if(!this.client.core.pairing.pairings.keys.includes(t)){let{message:i}=S.getInternalError("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw Error(i)}if(S.isExpired(this.client.core.pairing.pairings.get(t).expiry)){let{message:i}=S.getInternalError("EXPIRED",`pairing topic: ${t}`);throw Error(i)}}async isValidSessionTopic(t){if(!S.isValidString(t,!1)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw Error(i)}if(!this.client.session.keys.includes(t)){let{message:i}=S.getInternalError("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw Error(i)}if(S.isExpired(this.client.session.get(t).expiry)){await this.deleteSession(t);let{message:i}=S.getInternalError("EXPIRED",`session topic: ${t}`);throw Error(i)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(S.isValidString(t,!1)){let{message:i}=S.getInternalError("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw Error(i)}else{let{message:i}=S.getInternalError("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw Error(i)}}async isValidProposalId(t){if(!S.isValidId(t)){let{message:i}=S.getInternalError("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw Error(i)}if(!this.client.proposal.keys.includes(t)){let{message:i}=S.getInternalError("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw Error(i)}if(S.isExpired(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);let{message:i}=S.getInternalError("EXPIRED",`proposal id: ${t}`);throw Error(i)}}};let he=class he extends d.Store{constructor(t,i){super(t,i,"proposal",$),this.core=t,this.logger=i}};let z=class z extends d.Store{constructor(t,i){super(t,i,"session",$),this.core=t,this.logger=i}};let de=class de extends d.Store{constructor(t,i){super(t,i,"request",$,t=>t.id),this.core=t,this.logger=i}};let x=class x extends w.ISignClient{constructor(t){super(t),this.protocol="wc",this.version=2,this.name=q.name,this.events=new P.EventEmitter,this.on=(t,i)=>this.events.on(t,i),this.once=(t,i)=>this.events.once(t,i),this.off=(t,i)=>this.events.off(t,i),this.removeListener=(t,i)=>this.events.removeListener(t,i),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.name=t?.name||q.name,this.metadata=t?.metadata||S.getAppMetadata();let i="u">typeof t?.logger&&"string"!=typeof t?.logger?t.logger:_.pino(_.getDefaultLoggerOptions({level:t?.logger||q.logger}));this.core=t?.core||new d.Core(t),this.logger=_.generateChildLogger(i,this.name),this.session=new z(this.core,this.logger),this.proposal=new he(this.core,this.logger),this.pendingRequest=new de(this.core,this.logger),this.engine=new pe(this)}static async init(t){let i=new x(t);return await i.initialize(),i}get context(){return _.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};i.lO=B,i.ZP=x},49454:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=c(57035),_=c(82361),w=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(_);let l=class l extends d.IEvents{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}};let u=class u extends d.IEvents{constructor(t,i){super(),this.core=t,this.logger=i,this.records=new Map}};let h=class h extends d.IEvents{constructor(t,i){super(),this.relayer=t,this.logger=i}};let g=class g extends d.IEvents{constructor(t){super()}};let v=class v extends d.IEvents{constructor(t,i){super(),this.relayer=t,this.logger=i}};let y=class y extends d.IEvents{constructor(t,i){super(),this.core=t,this.logger=i}};let x=class x extends w.default{constructor(){super()}};let M=class M extends _.EventEmitter{constructor(){super()}};i.ICore=l,i.ICrypto=class{constructor(t,i,c){this.core=t,this.logger=i}},i.IEchoClient=class{constructor(t,i){this.projectId=t,this.logger=i}},i.IEngine=class{constructor(t){this.client=t}},i.IEngineEvents=M,i.IExpirer=y,i.IJsonRpcHistory=u,i.IKeyChain=class{constructor(t,i){this.core=t,this.logger=i}},i.IMessageTracker=class{constructor(t,i){this.logger=t,this.core=i}},i.IPairing=class{constructor(t,i){this.logger=t,this.core=i}},i.IPublisher=h,i.IRelayer=g,i.ISignClient=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},i.ISignClientEvents=x,i.IStore=class{constructor(t,i,c,d){this.core=t,this.logger=i,this.name=c}},i.ISubscriber=v,i.ISubscriberTopicMap=class{constructor(){this.map=new Map}},i.IVerify=class{constructor(t,i){this.projectId=t,this.logger=i}}},34338:t=>{"use strict";if("undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){let i=new Int32Array(new SharedArrayBuffer(4));t.exports=function(t){if(!1==(t>0&&t<1/0)){if("number"!=typeof t&&"bigint"!=typeof t)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(i,0,0,Number(t))}}else t.exports=function(t){if(!1==(t>0&&t<1/0)){if("number"!=typeof t&&"bigint"!=typeof t)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}let i=Date.now()+Number(t);for(;i>Date.now(););}},37994:(t,i,c)=>{"use strict";let d=c(92854),_=c(60429),w=c(67456),S=c(33612),{groupRedact:P,nestedRedact:R}=c(95964),C=c(26279),T=c(55619),A=d(),noop=t=>t;function fastRedact(t={}){let i=Array.from(new Set(t.paths||[])),c="serialize"in t?!1===t.serialize?t.serialize:"function"==typeof t.serialize?t.serialize:JSON.stringify:JSON.stringify,d=t.remove;if(!0===d&&c!==JSON.stringify)throw Error("fast-redact – remove option may only be set when serializer is JSON.stringify");let T=!0===d?void 0:"censor"in t?t.censor:"[REDACTED]",$="function"==typeof T,q=$&&T.length>1;if(0===i.length)return c||noop;A({paths:i,serialize:c,censor:T});let{wildcards:U,wcLen:B,secret:F}=_({paths:i,censor:T}),J=S({secret:F,wcLen:B}),X=!("strict"in t)||t.strict;return w({secret:F,wcLen:B,serialize:c,strict:X,isCensorFct:$,censorFctTakesPath:q},C({secret:F,censor:T,compileRestore:J,serialize:c,groupRedact:P,nestedRedact:R,wildcards:U,wcLen:B}))}noop.restore=noop,fastRedact.rx=T,fastRedact.validator=d,t.exports=fastRedact},95964:t=>{"use strict";function has(t,i){return null!=t&&("hasOwn"in Object?Object.hasOwn(t,i):Object.prototype.hasOwnProperty.call(t,i))}function get(t,i){for(var c=-1,d=i.length,_=t;null!=_&&++c<d;)_=_[i[c]];return _}function node(t,i,c){if(t.depth===c)return node(t.parent,i,c);var d={parent:t,key:i,depth:c,children:[]};return t.children.push(d),d}function restoreInstr(t,i,c){let d=t,_=[];do _.push(d.key),d=d.parent;while(null!=d.parent);return{path:_,value:i,target:c}}t.exports={groupRedact:function(t,i,c,d,_){let w=get(t,i);if(null==w)return{keys:null,values:null,target:null,flat:!0};let S=Object.keys(w),P=S.length,R=i.length,C=_?[...i]:void 0,T=Array(P);for(var A=0;A<P;A++){let t=S[A];T[A]=w[t],_?(C[R]=t,w[t]=c(w[t],C)):d?w[t]=c(w[t]):w[t]=c}return{keys:S,values:T,target:w,flat:!0}},groupRestore:function({keys:t,values:i,target:c}){if(null==c)return;let d=t.length;for(var _=0;_<d;_++){let d=t[_];c[d]=i[_]}},nestedRedact:function(t,i,c,d,_,w,S){let P=get(i,c);if(null==P)return;let R=Object.keys(P),C=R.length;for(var T=0;T<C;T++){let i=R[T];(function(t,i,c,d,_,w,S,P){let R=_.length,C=R-1,T=c;var A,$,q,U,B,F=-1,J=null,X=null,ee=!1,et=0,es={parent:null,key:null,children:[],depth:0};if(q=A=i[c],"object"==typeof A){for(;null!=A&&++F<R&&(et+=1,c=_[F],"*"===c||X||"object"==typeof A&&(c in A));)if("*"!==c||("*"===X&&(ee=!0),X=c,F===C)){if(X){let R=Object.keys(A);for(var eo=0;eo<R.length;eo++){let J=R[eo];if(B=A[J],U="*"===c,ee)es=node(es,J,et),q=function iterateNthLevel(t,i,c,d,_,w,S,P,R,C,T,A,$,q,U,B,F,J,X,ee){if(0===i&&($||"object"==typeof t&&null!==t&&c in t)){if(A=$?t:t[c],T=U!==B?A:S?P?w(A,[...d,R,..._]):w(A):w,$){let t=restoreInstr(F,A,X);J.push(t),C[q]=T}else if(t[c]===T);else if(void 0===T&&void 0!==w||has(t,c)&&T===A);else{let i=restoreInstr(node(F,c,ee+1),A,X);J.push(i),t[c]=T}}for(let et in t)"object"==typeof t[et]&&(F=node(F,et,ee),iterateNthLevel(t[et],i-1,c,d,_,w,S,P,R,C,T,A,$,q,U,B,F,J,X,ee+1))}(B,F-1,c,d,_,w,S,P,T,A,$,q,U,J,F,C,es,t,i[T],et+1);else if(U||"object"==typeof B&&null!==B&&c in B){if(q=U?B:B[c],$=F!==C?q:S?P?w(q,[...d,T,..._]):w(q):w,U){let c=restoreInstr(node(es,J,et),q,i[T]);t.push(c),A[J]=$}else if(B[c]===$);else if(void 0===$&&void 0!==w||has(B,c)&&$===q)es=node(es,J,et);else{es=node(es,J,et);let d=restoreInstr(node(es,c,et+1),q,i[T]);t.push(d),B[c]=$}}}X=null}else{if(q=A[c],es=node(es,c,et),$=F!==C?q:S?P?w(q,[...d,T,..._]):w(q):w,has(A,c)&&$===q||void 0===$&&void 0!==w);else{let d=restoreInstr(es,q,i[T]);t.push(d),A[c]=$}A=A[c]}if("object"!=typeof A)break}}})(t,P,i,c,d,_,w,S)}return t},nestedRestore:function(t){for(let i=0;i<t.length;i++){let{target:c,path:d,value:_}=t[i],w=c;for(let t=d.length-1;t>0;t--)w=w[d[t]];w[d[0]]=_}}}},60429:(t,i,c)=>{"use strict";let d=c(55619);t.exports=function({paths:t}){let i=[];var c=0;let _=t.reduce(function(t,_,w){var S=_.match(d).map(t=>t.replace(/'|"|`/g,""));let P="["===_[0];S=S.map(t=>"["===t[0]?t.substr(1,t.length-2):t);let R=S.indexOf("*");if(R>-1){let t=S.slice(0,R),d=t.join("."),_=S.slice(R+1,S.length),w=_.length>0;c++,i.push({before:t,beforeStr:d,after:_,nested:w})}else t[_]={path:S,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(_),leadingBracket:P};return t},{});return{wildcards:i,wcLen:c,secret:_}}},67456:(t,i,c)=>{"use strict";let d=c(55619);t.exports=function({secret:t,serialize:i,wcLen:c,strict:_,isCensorFct:w,censorFctTakesPath:S},P){let R=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${!0===_?"throw Error('fast-redact: primitives cannot be redacted')":!1===i?"return o":"return this.serialize(o)"}
    }
    const { censor, secret } = this
    ${Object.keys(t).map(i=>{let{escPath:c,leadingBracket:_,path:P}=t[i],R=_?1:0,C=_?"":".",T=[];for(;null!==(A=d.exec(i));){let[,t]=A,{index:i,input:c}=A;i>R&&T.push(c.substring(0,i-(t?0:1)))}var A,$=T.map(t=>`o${C}${t}`).join(" && ");0===$.length?$+=`o${C}${i} != null`:$+=` && o${C}${i} != null`;let q=`
      switch (true) {
        ${T.reverse().map(t=>`
          case o${C}${t} === censor:
            secret[${c}].circle = ${JSON.stringify(t)}
            break
        `).join("\n")}
      }
    `,U=S?`val, ${JSON.stringify(P)}`:"val";return`
      if (${$}) {
        const val = o${C}${i}
        if (val === censor) {
          secret[${c}].precensored = true
        } else {
          secret[${c}].val = val
          o${C}${i} = ${w?`censor(${U})`:"censor"}
          ${q}
        }
      }
    `}).join("\n")}
    this.compileRestore()
    ${!0==c>0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${w}, ${S})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${w}, ${S})
      }
    }
  `:""}
    ${!1===i?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}
  `).bind(P);return!1===i&&(R.restore=t=>P.restore(t)),R}},33612:(t,i,c)=>{"use strict";let{groupRestore:d,nestedRestore:_}=c(95964);t.exports=function({secret:t,wcLen:i}){return function(){if(this.restore)return;let c=Object.keys(t),w=c.map(i=>{let{circle:c,escPath:d,leadingBracket:_}=t[i],w=c?`o.${c} = secret[${d}].val`:`o${_?"":"."}${i} = secret[${d}].val`,S=`secret[${d}].val = undefined`;return`
      if (secret[${d}].val !== undefined) {
        try { ${w} } catch (e) {}
        ${S}
      }
    `}).join(""),S=i>0,P=S?{secret:t,groupRestore:d,nestedRestore:_}:{secret:t};this.restore=Function("o",function(t,i,c){let d=!0===c?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${i.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:"";return`
    const secret = this.secret
    ${d}
    ${t}
    return o
  `}(w,c,S)).bind(P)}}},55619:t=>{"use strict";t.exports=/[^.[\]]+|\[((?:.)*?)\]/g},26279:t=>{"use strict";t.exports=function(t){let{secret:i,censor:c,compileRestore:d,serialize:_,groupRedact:w,nestedRedact:S,wildcards:P,wcLen:R}=t,C=[{secret:i,censor:c,compileRestore:d}];return!1!==_&&C.push({serialize:_}),R>0&&C.push({groupRedact:w,nestedRedact:S,wildcards:P,wcLen:R}),Object.assign(...C)}},92854:t=>{"use strict";t.exports=function(t={}){let{ERR_PATHS_MUST_BE_STRINGS:i=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:c=t=>`fast-redact – Invalid path (${t})`}=t;return function({paths:t}){t.forEach(t=>{if("string"!=typeof t)throw Error(i());try{if(/〇/.test(t))throw Error();let i=("["===t[0]?"":".")+t.replace(/^\*/,"〇").replace(/\.\*/g,".〇").replace(/\[\*\]/g,"[〇]");if(/\n|\r|;/.test(i)||/\/\*/.test(i))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const 〇 = null;
            o${i}
            if ([o${i}].length !== 1) throw Error()`)()}catch(i){throw Error(c(t))}})}}},73793:(t,i,c)=>{function r(t){return t&&t.default||t}t.exports=global.fetch=global.fetch||("undefined"==typeof process?r(c(10343)):function(t,i){return r(c(17096))(String(t).replace(/^\/\//g,"https://"),i)})},510:(t,i,c)=>{t=c.nmd(t);var d,_,w="__lodash_hash_undefined__",S="[object Arguments]",P="[object Array]",R="[object Boolean]",C="[object Date]",T="[object Error]",A="[object Function]",$="[object Map]",q="[object Number]",U="[object Object]",B="[object Promise]",F="[object RegExp]",J="[object Set]",X="[object String]",ee="[object WeakMap]",et="[object ArrayBuffer]",es="[object DataView]",eo=/^\[object .+?Constructor\]$/,ec=/^(?:0|[1-9]\d*)$/,el={};el["[object Float32Array]"]=el["[object Float64Array]"]=el["[object Int8Array]"]=el["[object Int16Array]"]=el["[object Int32Array]"]=el["[object Uint8Array]"]=el["[object Uint8ClampedArray]"]=el["[object Uint16Array]"]=el["[object Uint32Array]"]=!0,el[S]=el[P]=el[et]=el[R]=el[es]=el[C]=el[T]=el[A]=el[$]=el[q]=el[U]=el[F]=el[J]=el[X]=el[ee]=!1;var eh="object"==typeof global&&global&&global.Object===Object&&global,ef="object"==typeof self&&self&&self.Object===Object&&self,ep=eh||ef||Function("return this")(),ed=i&&!i.nodeType&&i,eg=ed&&t&&!t.nodeType&&t,ey=eg&&eg.exports===ed,em=ey&&eh.process,e_=function(){try{return em&&em.binding&&em.binding("util")}catch(t){}}(),eb=e_&&e_.isTypedArray;function mapToArray(t){var i=-1,c=Array(t.size);return t.forEach(function(t,d){c[++i]=[d,t]}),c}function setToArray(t){var i=-1,c=Array(t.size);return t.forEach(function(t){c[++i]=t}),c}var ew=Array.prototype,eE=Function.prototype,eS=Object.prototype,eI=ep["__core-js_shared__"],eO=eE.toString,eP=eS.hasOwnProperty,ex=function(){var t=/[^.]+$/.exec(eI&&eI.keys&&eI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),eR=eS.toString,eC=RegExp("^"+eO.call(eP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eT=ey?ep.Buffer:void 0,eN=ep.Symbol,ek=ep.Uint8Array,eA=eS.propertyIsEnumerable,eL=ew.splice,ej=eN?eN.toStringTag:void 0,eD=Object.getOwnPropertySymbols,eM=eT?eT.isBuffer:void 0,e$=(d=Object.keys,_=Object,function(t){return d(_(t))}),ez=getNative(ep,"DataView"),eU=getNative(ep,"Map"),eH=getNative(ep,"Promise"),eB=getNative(ep,"Set"),eW=getNative(ep,"WeakMap"),eV=getNative(Object,"create"),eK=toSource(ez),eG=toSource(eU),eF=toSource(eH),eJ=toSource(eB),eY=toSource(eW),eZ=eN?eN.prototype:void 0,eQ=eZ?eZ.valueOf:void 0;function Hash(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function ListCache(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function MapCache(t){var i=-1,c=null==t?0:t.length;for(this.clear();++i<c;){var d=t[i];this.set(d[0],d[1])}}function SetCache(t){var i=-1,c=null==t?0:t.length;for(this.__data__=new MapCache;++i<c;)this.add(t[i])}function Stack(t){var i=this.__data__=new ListCache(t);this.size=i.size}function assocIndexOf(t,i){for(var c=t.length;c--;)if(eq(t[c][0],i))return c;return -1}function baseGetTag(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ej&&ej in Object(t)?function(t){var i=eP.call(t,ej),c=t[ej];try{t[ej]=void 0;var d=!0}catch(t){}var _=eR.call(t);return d&&(i?t[ej]=c:delete t[ej]),_}(t):eR.call(t)}function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==S}function equalArrays(t,i,c,d,_,w){var S=1&c,P=t.length,R=i.length;if(P!=R&&!(S&&R>P))return!1;var C=w.get(t);if(C&&w.get(i))return C==i;var T=-1,A=!0,$=2&c?new SetCache:void 0;for(w.set(t,i),w.set(i,t);++T<P;){var q=t[T],U=i[T];if(d)var B=S?d(U,q,T,i,t,w):d(q,U,T,t,i,w);if(void 0!==B){if(B)continue;A=!1;break}if($){if(!function(t,i){for(var c=-1,d=null==t?0:t.length;++c<d;)if(i(t[c],c,t))return!0;return!1}(i,function(t,i){if(!$.has(i)&&(q===t||_(q,t,c,d,w)))return $.push(i)})){A=!1;break}}else if(!(q===U||_(q,U,c,d,w))){A=!1;break}}return w.delete(t),w.delete(i),A}function getAllKeys(t){var i;return i=function(t){return null!=t&&isLength(t.length)&&!isFunction(t)?function(t,i){var c,d=e5(t),_=!d&&e1(t),w=!d&&!_&&e2(t),S=!d&&!_&&!w&&e6(t),P=d||_||w||S,R=P?function(t,i){for(var c=-1,d=Array(t);++c<t;)d[c]=i(c);return d}(t.length,String):[],C=R.length;for(var T in t)eP.call(t,T)&&!(P&&("length"==T||w&&("offset"==T||"parent"==T)||S&&("buffer"==T||"byteLength"==T||"byteOffset"==T)||(c=null==(c=C)?9007199254740991:c)&&("number"==typeof T||ec.test(T))&&T>-1&&T%1==0&&T<c))&&R.push(T);return R}(t):function(t){if(i=t&&t.constructor,t!==("function"==typeof i&&i.prototype||eS))return e$(t);var i,c=[];for(var d in Object(t))eP.call(t,d)&&"constructor"!=d&&c.push(d);return c}(t)}(t),e5(t)?i:function(t,i){for(var c=-1,d=i.length,_=t.length;++c<d;)t[_+c]=i[c];return t}(i,eX(t))}function getMapData(t,i){var c,d=t.__data__;return("string"==(c=typeof i)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==i:null===i)?d["string"==typeof i?"string":"hash"]:d.map}function getNative(t,i){var c=null==t?void 0:t[i];return!(!isObject(c)||ex&&ex in c)&&(isFunction(c)?eC:eo).test(toSource(c))?c:void 0}Hash.prototype.clear=function(){this.__data__=eV?eV(null):{},this.size=0},Hash.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Hash.prototype.get=function(t){var i=this.__data__;if(eV){var c=i[t];return c===w?void 0:c}return eP.call(i,t)?i[t]:void 0},Hash.prototype.has=function(t){var i=this.__data__;return eV?void 0!==i[t]:eP.call(i,t)},Hash.prototype.set=function(t,i){var c=this.__data__;return this.size+=this.has(t)?0:1,c[t]=eV&&void 0===i?w:i,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(t){var i=this.__data__,c=assocIndexOf(i,t);return!(c<0)&&(c==i.length-1?i.pop():eL.call(i,c,1),--this.size,!0)},ListCache.prototype.get=function(t){var i=this.__data__,c=assocIndexOf(i,t);return c<0?void 0:i[c][1]},ListCache.prototype.has=function(t){return assocIndexOf(this.__data__,t)>-1},ListCache.prototype.set=function(t,i){var c=this.__data__,d=assocIndexOf(c,t);return d<0?(++this.size,c.push([t,i])):c[d][1]=i,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(eU||ListCache),string:new Hash}},MapCache.prototype.delete=function(t){var i=getMapData(this,t).delete(t);return this.size-=i?1:0,i},MapCache.prototype.get=function(t){return getMapData(this,t).get(t)},MapCache.prototype.has=function(t){return getMapData(this,t).has(t)},MapCache.prototype.set=function(t,i){var c=getMapData(this,t),d=c.size;return c.set(t,i),this.size+=c.size==d?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(t){return this.__data__.set(t,w),this},SetCache.prototype.has=function(t){return this.__data__.has(t)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(t){var i=this.__data__,c=i.delete(t);return this.size=i.size,c},Stack.prototype.get=function(t){return this.__data__.get(t)},Stack.prototype.has=function(t){return this.__data__.has(t)},Stack.prototype.set=function(t,i){var c=this.__data__;if(c instanceof ListCache){var d=c.__data__;if(!eU||d.length<199)return d.push([t,i]),this.size=++c.size,this;c=this.__data__=new MapCache(d)}return c.set(t,i),this.size=c.size,this};var eX=eD?function(t){return null==t?[]:function(t,i){for(var c=-1,d=null==t?0:t.length,_=0,w=[];++c<d;){var S=t[c];i(S,c,t)&&(w[_++]=S)}return w}(eD(t=Object(t)),function(i){return eA.call(t,i)})}:function(){return[]},e0=baseGetTag;function toSource(t){if(null!=t){try{return eO.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function eq(t,i){return t===i||t!=t&&i!=i}(ez&&e0(new ez(new ArrayBuffer(1)))!=es||eU&&e0(new eU)!=$||eH&&e0(eH.resolve())!=B||eB&&e0(new eB)!=J||eW&&e0(new eW)!=ee)&&(e0=function(t){var i=baseGetTag(t),c=i==U?t.constructor:void 0,d=c?toSource(c):"";if(d)switch(d){case eK:return es;case eG:return $;case eF:return B;case eJ:return J;case eY:return ee}return i});var e1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&eP.call(t,"callee")&&!eA.call(t,"callee")},e5=Array.isArray,e2=eM||function(){return!1};function isFunction(t){if(!isObject(t))return!1;var i=baseGetTag(t);return i==A||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function isObject(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function isObjectLike(t){return null!=t&&"object"==typeof t}var e6=eb?function(t){return eb(t)}:function(t){return isObjectLike(t)&&isLength(t.length)&&!!el[baseGetTag(t)]};t.exports=function(t,i){return function baseIsEqual(t,i,c,d,_){return t===i||(null!=t&&null!=i&&(isObjectLike(t)||isObjectLike(i))?function(t,i,c,d,_,w){var A=e5(t),B=e5(i),ee=A?P:e0(t),eo=B?P:e0(i);ee=ee==S?U:ee,eo=eo==S?U:eo;var ec=ee==U,el=eo==U,eh=ee==eo;if(eh&&e2(t)){if(!e2(i))return!1;A=!0,ec=!1}if(eh&&!ec)return w||(w=new Stack),A||e6(t)?equalArrays(t,i,c,d,_,w):function(t,i,c,d,_,w,S){switch(c){case es:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)break;t=t.buffer,i=i.buffer;case et:if(t.byteLength!=i.byteLength||!w(new ek(t),new ek(i)))break;return!0;case R:case C:case q:return eq(+t,+i);case T:return t.name==i.name&&t.message==i.message;case F:case X:return t==i+"";case $:var P=mapToArray;case J:var A=1&d;if(P||(P=setToArray),t.size!=i.size&&!A)break;var U=S.get(t);if(U)return U==i;d|=2,S.set(t,i);var B=equalArrays(P(t),P(i),d,_,w,S);return S.delete(t),B;case"[object Symbol]":if(eQ)return eQ.call(t)==eQ.call(i)}return!1}(t,i,ee,c,d,_,w);if(!(1&c)){var ef=ec&&eP.call(t,"__wrapped__"),ep=el&&eP.call(i,"__wrapped__");if(ef||ep){var ed=ef?t.value():t,eg=ep?i.value():i;return w||(w=new Stack),_(ed,eg,c,d,w)}}return!!eh&&(w||(w=new Stack),function(t,i,c,d,_,w){var S=1&c,P=getAllKeys(t),R=P.length;if(R!=getAllKeys(i).length&&!S)return!1;for(var C=R;C--;){var T=P[C];if(!(S?T in i:eP.call(i,T)))return!1}var A=w.get(t);if(A&&w.get(i))return A==i;var $=!0;w.set(t,i),w.set(i,t);for(var q=S;++C<R;){var U=t[T=P[C]],B=i[T];if(d)var F=S?d(B,U,T,i,t,w):d(U,B,T,t,i,w);if(!(void 0===F?U===B||_(U,B,c,d,w):F)){$=!1;break}q||(q="constructor"==T)}if($&&!q){var J=t.constructor,X=i.constructor;J!=X&&"constructor"in t&&"constructor"in i&&!("function"==typeof J&&J instanceof J&&"function"==typeof X&&X instanceof X)&&($=!1)}return w.delete(t),w.delete(i),$}(t,i,c,d,_,w))}(t,i,c,d,baseIsEqual,_):t!=t&&i!=i)}(t,i)}},22858:t=>{"use strict";function genWrap(t,i,c,d){function wrap(){let t=i.deref();void 0!==t&&c(t,d)}t[d]=wrap,process.once(d,wrap)}let i=new FinalizationRegistry(clear),c=new WeakMap;function clear(t){process.removeListener("exit",t.exit),process.removeListener("beforeExit",t.beforeExit)}t.exports={register:function(t,d){if(void 0===t)throw Error("the object can't be undefined");let _=new WeakRef(t),w={};c.set(t,w),i.register(t,w),genWrap(w,_,d,"exit"),genWrap(w,_,d,"beforeExit")},unregister:function(t){let d=c.get(t);c.delete(t),d&&clear(d),i.unregister(t)}}},95495:(t,i,c)=>{"use strict";let{format:d}=c(73837);t.exports=function(){let t={},i=new Map;return{create:function(c,_,w){if(!c)throw Error("Warning name must not be empty");if(!_)throw Error("Warning code must not be empty");if(!w)throw Error("Warning message must not be empty");if(void 0!==t[_=_.toUpperCase()])throw Error(`The code '${_}' already exist`);return i.set(_,!1),t[_]=function(t,i,S){return{code:_,name:c,message:t&&i&&S?d(w,t,i,S):t&&i?d(w,t,i):t?d(w,t):w}},t[_]},emit:function(c,d,_,w){if(void 0===t[c])throw Error(`The code '${c}' does not exist`);if(!0===i.get(c))return;i.set(c,!0);let S=t[c](d,_,w);process.emitWarning(S.message,S.name,S.code)},emitted:i}}},24773:t=>{"use strict";function tryStringify(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}t.exports=function(t,i,c){var d=c&&c.stringify||tryStringify;if("object"==typeof t&&null!==t){var _=i.length+1;if(1===_)return t;var w=Array(_);w[0]=d(t);for(var S=1;S<_;S++)w[S]=d(i[S]);return w.join(" ")}if("string"!=typeof t)return t;var P=i.length;if(0===P)return t;for(var R="",C=0,T=-1,A=t&&t.length||0,$=0;$<A;){if(37===t.charCodeAt($)&&$+1<A){switch(T=T>-1?T:0,t.charCodeAt($+1)){case 100:case 102:if(C>=P||null==i[C])break;T<$&&(R+=t.slice(T,$)),R+=Number(i[C]),T=$+2,$++;break;case 105:if(C>=P||null==i[C])break;T<$&&(R+=t.slice(T,$)),R+=Math.floor(Number(i[C])),T=$+2,$++;break;case 79:case 111:case 106:if(C>=P||void 0===i[C])break;T<$&&(R+=t.slice(T,$));var q=typeof i[C];if("string"===q){R+="'"+i[C]+"'",T=$+2,$++;break}if("function"===q){R+=i[C].name||"<anonymous>",T=$+2,$++;break}R+=d(i[C]),T=$+2,$++;break;case 115:if(C>=P)break;T<$&&(R+=t.slice(T,$)),R+=String(i[C]),T=$+2,$++;break;case 37:T<$&&(R+=t.slice(T,$)),R+="%",T=$+2,$++,C--}++C}++$}return -1===T?t:(T<A&&(R+=t.slice(T)),R)}},66354:(t,i)=>{"use strict";let{hasOwnProperty:c}=Object.prototype,d=configure();d.configure=configure,d.stringify=d,d.default=d,i.stringify=d,i.configure=configure,t.exports=d;let _=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function strEscape(t){return t.length<5e3&&!_.test(t)?`"${t}"`:JSON.stringify(t)}function insertSort(t){if(t.length>200)return t.sort();for(let i=1;i<t.length;i++){let c=t[i],d=i;for(;0!==d&&t[d-1]>c;)t[d]=t[d-1],d--;t[d]=c}return t}let w=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function isTypedArrayWithEntries(t){return void 0!==w.call(t)&&0!==t.length}function stringifyTypedArray(t,i,c){t.length<c&&(c=t.length);let d=","===i?"":" ",_=`"0":${d}${t[0]}`;for(let w=1;w<c;w++)_+=`${i}"${w}":${d}${t[w]}`;return _}function getBooleanOption(t,i){let d;if(c.call(t,i)&&"boolean"!=typeof(d=t[i]))throw TypeError(`The "${i}" argument must be of type boolean`);return void 0===d||d}function getPositiveIntegerOption(t,i){let d;if(c.call(t,i)){if("number"!=typeof(d=t[i]))throw TypeError(`The "${i}" argument must be of type number`);if(!Number.isInteger(d))throw TypeError(`The "${i}" argument must be an integer`);if(d<1)throw RangeError(`The "${i}" argument must be >= 1`)}return void 0===d?1/0:d}function getItemCount(t){return 1===t?"1 item":`${t} items`}function configure(t){t={...t};let i=function(t){if(c.call(t,"strict")){let i=t.strict;if("boolean"!=typeof i)throw TypeError('The "strict" argument must be of type boolean');if(i)return t=>{let i=`Object can not safely be stringified. Received type ${typeof t}`;throw"function"!=typeof t&&(i+=` (${t.toString()})`),Error(i)}}}(t);!i||(void 0===t.bigint&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let d=function(t){if(c.call(t,"circularValue")){let i=t.circularValue;if("string"==typeof i)return`"${i}"`;if(null==i)return i;if(i===Error||i===TypeError)return{toString(){throw TypeError("Converting circular structure to JSON")}};throw TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(t),_=getBooleanOption(t,"bigint"),w=getBooleanOption(t,"deterministic"),S=getPositiveIntegerOption(t,"maximumDepth"),P=getPositiveIntegerOption(t,"maximumBreadth");return function(t,c,R){if(arguments.length>1){let C="";if("number"==typeof R?C=" ".repeat(Math.min(R,10)):"string"==typeof R&&(C=R.slice(0,10)),null!=c){if("function"==typeof c)return function stringifyFnReplacer(t,c,R,C,T,A){let $=c[t];switch("object"==typeof $&&null!==$&&"function"==typeof $.toJSON&&($=$.toJSON(t)),typeof($=C.call(c,t,$))){case"string":return strEscape($);case"object":{if(null===$)return"null";if(-1!==R.indexOf($))return d;let t="",i=",",c=A;if(Array.isArray($)){if(0===$.length)return"[]";if(S<R.length+1)return'"[Array]"';R.push($),""!==T&&(A+=T,t+=`
${A}`,i=`,
${A}`);let d=Math.min($.length,P),_=0;for(;_<d-1;_++){let c=stringifyFnReplacer(String(_),$,R,C,T,A);t+=(void 0!==c?c:"null")+i}let w=stringifyFnReplacer(String(_),$,R,C,T,A);if(t+=void 0!==w?w:"null",$.length-1>P){let c=$.length-P-1;t+=`${i}"... ${getItemCount(c)} not stringified"`}return""!==T&&(t+=`
${c}`),R.pop(),`[${t}]`}let _=Object.keys($),q=_.length;if(0===q)return"{}";if(S<R.length+1)return'"[Object]"';let U="",B="";""!==T&&(A+=T,i=`,
${A}`,U=" ");let F=Math.min(q,P);w&&!isTypedArrayWithEntries($)&&(_=insertSort(_)),R.push($);for(let c=0;c<F;c++){let d=_[c],w=stringifyFnReplacer(d,$,R,C,T,A);void 0!==w&&(t+=`${B}${strEscape(d)}:${U}${w}`,B=i)}if(q>P){let c=q-P;t+=`${B}"...":${U}"${getItemCount(c)} not stringified"`,B=i}return""!==T&&B.length>1&&(t=`
${A}${t}
${c}`),R.pop(),`{${t}}`}case"number":return isFinite($)?String($):i?i($):"null";case"boolean":return!0===$?"true":"false";case"undefined":return;case"bigint":if(_)return String($);default:return i?i($):void 0}}("",{"":t},[],c,C,"");if(Array.isArray(c))return function stringifyArrayReplacer(t,c,w,R,C,T){switch("object"==typeof c&&null!==c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),typeof c){case"string":return strEscape(c);case"object":{if(null===c)return"null";if(-1!==w.indexOf(c))return d;let t=T,i="",_=",";if(Array.isArray(c)){if(0===c.length)return"[]";if(S<w.length+1)return'"[Array]"';w.push(c),""!==C&&(T+=C,i+=`
${T}`,_=`,
${T}`);let d=Math.min(c.length,P),A=0;for(;A<d-1;A++){let t=stringifyArrayReplacer(String(A),c[A],w,R,C,T);i+=(void 0!==t?t:"null")+_}let $=stringifyArrayReplacer(String(A),c[A],w,R,C,T);if(i+=void 0!==$?$:"null",c.length-1>P){let t=c.length-P-1;i+=`${_}"... ${getItemCount(t)} not stringified"`}return""!==C&&(i+=`
${t}`),w.pop(),`[${i}]`}w.push(c);let A="";""!==C&&(T+=C,_=`,
${T}`,A=" ");let $="";for(let t of R){let d=stringifyArrayReplacer(t,c[t],w,R,C,T);void 0!==d&&(i+=`${$}${strEscape(t)}:${A}${d}`,$=_)}return""!==C&&$.length>1&&(i=`
${T}${i}
${t}`),w.pop(),`{${i}}`}case"number":return isFinite(c)?String(c):i?i(c):"null";case"boolean":return!0===c?"true":"false";case"undefined":return;case"bigint":if(_)return String(c);default:return i?i(c):void 0}}("",t,[],function(t){let i=new Set;for(let c of t)("string"==typeof c||"number"==typeof c)&&i.add(String(c));return i}(c),C,"")}if(0!==C.length)return function stringifyIndent(t,c,R,C,T){switch(typeof c){case"string":return strEscape(c);case"object":{if(null===c)return"null";if("function"==typeof c.toJSON){if("object"!=typeof(c=c.toJSON(t)))return stringifyIndent(t,c,R,C,T);if(null===c)return"null"}if(-1!==R.indexOf(c))return d;let i=T;if(Array.isArray(c)){if(0===c.length)return"[]";if(S<R.length+1)return'"[Array]"';R.push(c),T+=C;let t=`
${T}`,d=`,
${T}`,_=Math.min(c.length,P),w=0;for(;w<_-1;w++){let i=stringifyIndent(String(w),c[w],R,C,T);t+=(void 0!==i?i:"null")+d}let A=stringifyIndent(String(w),c[w],R,C,T);if(t+=void 0!==A?A:"null",c.length-1>P){let i=c.length-P-1;t+=`${d}"... ${getItemCount(i)} not stringified"`}return t+=`
${i}`,R.pop(),`[${t}]`}let _=Object.keys(c),A=_.length;if(0===A)return"{}";if(S<R.length+1)return'"[Object]"';T+=C;let $=`,
${T}`,q="",U="",B=Math.min(A,P);isTypedArrayWithEntries(c)&&(q+=stringifyTypedArray(c,$,P),_=_.slice(c.length),B-=c.length,U=$),w&&(_=insertSort(_)),R.push(c);for(let t=0;t<B;t++){let i=_[t],d=stringifyIndent(i,c[i],R,C,T);void 0!==d&&(q+=`${U}${strEscape(i)}: ${d}`,U=$)}if(A>P){let t=A-P;q+=`${U}"...": "${getItemCount(t)} not stringified"`,U=$}return""!==U&&(q=`
${T}${q}
${i}`),R.pop(),`{${q}}`}case"number":return isFinite(c)?String(c):i?i(c):"null";case"boolean":return!0===c?"true":"false";case"undefined":return;case"bigint":if(_)return String(c);default:return i?i(c):void 0}}("",t,[],C,"")}return function stringifySimple(t,c,R){switch(typeof c){case"string":return strEscape(c);case"object":{if(null===c)return"null";if("function"==typeof c.toJSON){if("object"!=typeof(c=c.toJSON(t)))return stringifySimple(t,c,R);if(null===c)return"null"}if(-1!==R.indexOf(c))return d;let i="";if(Array.isArray(c)){if(0===c.length)return"[]";if(S<R.length+1)return'"[Array]"';R.push(c);let t=Math.min(c.length,P),d=0;for(;d<t-1;d++){let t=stringifySimple(String(d),c[d],R);i+=(void 0!==t?t:"null")+","}let _=stringifySimple(String(d),c[d],R);if(i+=void 0!==_?_:"null",c.length-1>P){let t=c.length-P-1;i+=`,"... ${getItemCount(t)} not stringified"`}return R.pop(),`[${i}]`}let _=Object.keys(c),C=_.length;if(0===C)return"{}";if(S<R.length+1)return'"[Object]"';let T="",A=Math.min(C,P);isTypedArrayWithEntries(c)&&(i+=stringifyTypedArray(c,",",P),_=_.slice(c.length),A-=c.length,T=","),w&&(_=insertSort(_)),R.push(c);for(let t=0;t<A;t++){let d=_[t],w=stringifySimple(d,c[d],R);void 0!==w&&(i+=`${T}${strEscape(d)}:${w}`,T=",")}if(C>P){let t=C-P;i+=`${T}"...":"${getItemCount(t)} not stringified"`}return R.pop(),`{${i}}`}case"number":return isFinite(c)?String(c):i?i(c):"null";case"boolean":return!0===c?"true":"false";case"undefined":return;case"bigint":if(_)return String(c);default:return i?i(c):void 0}}("",t,[])}}},71944:(t,i,c)=>{"use strict";let{EventEmitter:d}=c(82361),{Worker:_}=c(71267),{join:w}=c(71017),{pathToFileURL:S}=c(57310),{wait:P}=c(10177),{WRITE_INDEX:R,READ_INDEX:C}=c(74429),T=c(14300),A=c(39491),$=Symbol("kImpl"),q=T.constants.MAX_STRING_LENGTH;let FakeWeakRef=class FakeWeakRef{constructor(t){this._value=t}deref(){return this._value}};let U=global.FinalizationRegistry||class{register(){}unregister(){}},B=global.WeakRef||FakeWeakRef,F=new U(t=>{t.exited||t.terminate()});function drain(t){A(!t[$].sync),t[$].needDrain&&(t[$].needDrain=!1,t.emit("drain"))}function onWorkerMessage(t){let i=this.stream.deref();if(void 0===i){this.exited=!0,this.terminate();return}switch(t.code){case"READY":this.stream=new B(i),i.flush(()=>{i[$].ready=!0,i.emit("ready")});break;case"ERROR":destroy(i,t.err);break;default:throw Error("this should not happen: "+t.code)}}function onWorkerExit(t){let i=this.stream.deref();void 0!==i&&(F.unregister(i),i.worker.exited=!0,i.worker.off("exit",onWorkerExit),destroy(i,0!==t?Error("The worker thread exited"):null))}function destroy(t,i){t[$].destroyed||(t[$].destroyed=!0,i&&(t[$].errored=i,t.emit("error",i)),t.worker.exited?setImmediate(()=>{t[$].closed=!0,t.emit("close")}):t.worker.terminate().catch(()=>{}).then(()=>{t[$].closed=!0,t.emit("close")}))}function write(t,i,c){let d=Atomics.load(t[$].state,R),_=Buffer.byteLength(i);return t[$].data.write(i,d),Atomics.store(t[$].state,R,d+_),Atomics.notify(t[$].state,R),c(),!0}function end(t){if(!t[$].ended&&t[$].ending&&!t[$].flushing){t[$].ended=!0;try{t.flushSync();let i=Atomics.load(t[$].state,C);Atomics.store(t[$].state,R,-1),Atomics.notify(t[$].state,R);let c=0;for(;-1!==i;){if(Atomics.wait(t[$].state,C,i,1e3),i=Atomics.load(t[$].state,C),-2===i)throw Error("end() failed");if(10==++c)throw Error("end() took too long (10s)")}process.nextTick(()=>{t[$].finished=!0,t.emit("finish")})}catch(i){destroy(t,i)}}}function writeSync(t){let cb=()=>{t[$].ending?end(t):t[$].needDrain&&process.nextTick(drain,t)};for(t[$].flushing=!1;0!==t[$].buf.length;){let i=Atomics.load(t[$].state,R),c=t[$].data.length-i;if(0===c){flushSync(t),Atomics.store(t[$].state,C,0),Atomics.store(t[$].state,R,0);continue}if(c<0)throw Error("overwritten");let d=t[$].buf.slice(0,c),_=Buffer.byteLength(d);if(_<=c)t[$].buf=t[$].buf.slice(c),write(t,d,cb);else{for(flushSync(t),Atomics.store(t[$].state,C,0),Atomics.store(t[$].state,R,0);_>t[$].buf.length;)c/=2,d=t[$].buf.slice(0,c),_=Buffer.byteLength(d);t[$].buf=t[$].buf.slice(c),write(t,d,cb)}}}function flushSync(t){if(t[$].flushing)throw Error("unable to flush while flushing");let i=Atomics.load(t[$].state,R),c=0;for(;;){let d=Atomics.load(t[$].state,C);if(-2===d)throw Error("_flushSync failed");if(d!==i)Atomics.wait(t[$].state,C,d,1e3);else break;if(10==++c)throw Error("_flushSync took too long (10s)")}}t.exports=class extends d{constructor(t={}){if(super(),t.bufferSize<4)throw Error("bufferSize must at least fit a 4-byte utf-8 char");this[$]={},this[$].stateBuf=new SharedArrayBuffer(128),this[$].state=new Int32Array(this[$].stateBuf),this[$].dataBuf=new SharedArrayBuffer(t.bufferSize||4194304),this[$].data=Buffer.from(this[$].dataBuf),this[$].sync=t.sync||!1,this[$].ending=!1,this[$].ended=!1,this[$].needDrain=!1,this[$].destroyed=!1,this[$].flushing=!1,this[$].ready=!1,this[$].finished=!1,this[$].errored=null,this[$].closed=!1,this[$].buf="",this.worker=function(t,i){let{filename:c,workerData:d}=i,P="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},R=P["thread-stream-worker"]||w(__dirname,"lib","worker.js"),C=new _(R,{...i.workerOpts,workerData:{filename:0===c.indexOf("file://")?c:S(c).href,dataBuf:t[$].dataBuf,stateBuf:t[$].stateBuf,workerData:d}});return C.stream=new FakeWeakRef(t),C.on("message",onWorkerMessage),C.on("exit",onWorkerExit),F.register(t,C),C}(this,t)}write(t){if(this[$].destroyed)throw Error("the worker has exited");if(this[$].ending)throw Error("the worker is ending");if(this[$].flushing&&this[$].buf.length+t.length>=q)try{writeSync(this),this[$].flushing=!0}catch(t){return destroy(this,t),!1}if(this[$].buf+=t,this[$].sync)try{return writeSync(this),!0}catch(t){return destroy(this,t),!1}return this[$].flushing||(this[$].flushing=!0,setImmediate(function nextFlush(t){let i=Atomics.load(t[$].state,R),c=t[$].data.length-i;if(c>0){if(0===t[$].buf.length){t[$].flushing=!1,t[$].ending?end(t):t[$].needDrain&&process.nextTick(drain,t);return}let i=t[$].buf.slice(0,c),d=Buffer.byteLength(i);d<=c?(t[$].buf=t[$].buf.slice(c),write(t,i,nextFlush.bind(null,t))):t.flush(()=>{if(!t.destroyed){for(Atomics.store(t[$].state,C,0),Atomics.store(t[$].state,R,0);d>t[$].data.length;)c/=2,i=t[$].buf.slice(0,c),d=Buffer.byteLength(i);t[$].buf=t[$].buf.slice(c),write(t,i,nextFlush.bind(null,t))}})}else if(0===c){if(0===i&&0===t[$].buf.length)return;t.flush(()=>{Atomics.store(t[$].state,C,0),Atomics.store(t[$].state,R,0),nextFlush(t)})}else throw Error("overwritten")},this)),this[$].needDrain=this[$].data.length-this[$].buf.length-Atomics.load(this[$].state,R)<=0,!this[$].needDrain}end(){this[$].destroyed||(this[$].ending=!0,end(this))}flush(t){if(this[$].destroyed){"function"==typeof t&&process.nextTick(t,Error("the worker has exited"));return}let i=Atomics.load(this[$].state,R);P(this[$].state,C,i,1/0,(i,c)=>{if(i){destroy(this,i),process.nextTick(t,i);return}if("not-equal"===c){this.flush(t);return}process.nextTick(t)})}flushSync(){this[$].destroyed||(writeSync(this),flushSync(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[$].ready}get destroyed(){return this[$].destroyed}get closed(){return this[$].closed}get writable(){return!this[$].destroyed&&!this[$].ending}get writableEnded(){return this[$].ending}get writableFinished(){return this[$].finished}get writableNeedDrain(){return this[$].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[$].errored}}},74429:t=>{"use strict";t.exports={WRITE_INDEX:4,READ_INDEX:8}},10177:t=>{"use strict";t.exports={wait:function(t,i,c,d,_){let w=Date.now()+d,S=Atomics.load(t,i);if(S===c){_(null,"ok");return}let P=S,check=d=>{Date.now()>w?_(null,"timed-out"):setTimeout(()=>{P=S,(S=Atomics.load(t,i))===P?check(d>=1e3?1e3:2*d):S===c?_(null,"ok"):_(null,"not-equal")},d)};check(1)},waitDiff:function(t,i,c,d,_){let w=Date.now()+d,S=Atomics.load(t,i);if(S!==c){_(null,"ok");return}let check=d=>{Date.now()>w?_(null,"timed-out"):setTimeout(()=>{(S=Atomics.load(t,i))!==c?_(null,"ok"):check(d>=1e3?1e3:2*d)},d)};check(1)}}},10343:t=>{t.exports=function(t,i){return i=i||{},new Promise(function(c,d){var _=new XMLHttpRequest,w=[],S=[],P={},a=function(){return{ok:2==(_.status/100|0),statusText:_.statusText,status:_.status,url:_.responseURL,text:function(){return Promise.resolve(_.responseText)},json:function(){return Promise.resolve(_.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([_.response]))},clone:a,headers:{keys:function(){return w},entries:function(){return S},get:function(t){return P[t.toLowerCase()]},has:function(t){return t.toLowerCase() in P}}}};for(var R in _.open(i.method||"get",t,!0),_.onload=function(){_.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(t,i,c){w.push(i=i.toLowerCase()),S.push([i,c]),P[i]=P[i]?P[i]+","+c:c}),c(a())},_.onerror=d,_.withCredentials="include"==i.credentials,i.headers)_.setRequestHeader(R,i.headers[R]);_.send(i.body||null)})}},68747:(t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});let c=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,d=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(t,i){if("__proto__"===t||"constructor"===t&&i&&"object"==typeof i&&"prototype"in i){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`);return}return i}function destr(t,i={}){if("string"!=typeof t)return t;let w=t.trim();if('"'===t[0]&&'"'===t.at(-1)&&!t.includes("\\"))return w.slice(1,-1);if(w.length<=9){let t=w.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if("undefined"===t)return;if("null"===t)return null;if("nan"===t)return Number.NaN;if("infinity"===t)return Number.POSITIVE_INFINITY;if("-infinity"===t)return Number.NEGATIVE_INFINITY}if(!_.test(t)){if(i.strict)throw SyntaxError("[destr] Invalid JSON");return t}try{if(c.test(t)||d.test(t)){if(i.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(t,jsonParseTransform)}return JSON.parse(t)}catch(c){if(i.strict)throw c;return t}}i.default=destr,i.destr=destr,i.safeDestr=function(t,i={}){return destr(t,{...i,strict:!0})}},12891:(t,i,c)=>{let{destr:d,safeDestr:_}=c(68747);d.destr=d,d.safeDestr=_,t.exports=d},70480:(t,i,c)=>{"use strict";let d=c(87675),_=c(1666),w=c(54908);t.exports={err:d,mapHttpRequest:_.mapHttpRequest,mapHttpResponse:w.mapHttpResponse,req:_.reqSerializer,res:w.resSerializer,wrapErrorSerializer:function(t){return t===d?t:function(i){return t(d(i))}},wrapRequestSerializer:function(t){return t===_.reqSerializer?t:function(i){return t(_.reqSerializer(i))}},wrapResponseSerializer:function(t){return t===w.resSerializer?t:function(i){return t(w.resSerializer(i))}}}},87675:t=>{"use strict";t.exports=function errSerializer(t){if(!(t instanceof Error))return t;t[c]=void 0;let d=Object.create(_);for(let _ in d.type="[object Function]"===i.call(t.constructor)?t.constructor.name:t.name,d.message=t.message,d.stack=t.stack,t)if(void 0===d[_]){let i=t[_];i instanceof Error?i.hasOwnProperty(c)||(d[_]=errSerializer(i)):d[_]=i}return delete t[c],d.raw=t,d};let{toString:i}=Object.prototype,c=Symbol("circular-ref-tag"),d=Symbol("pino-raw-err-ref"),_=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[d]},set:function(t){this[d]=t}}});Object.defineProperty(_,d,{writable:!0,value:{}})},1666:t=>{"use strict";t.exports={mapHttpRequest:function(t){return{req:reqSerializer(t)}},reqSerializer};let i=Symbol("pino-raw-req-ref"),c=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[i]},set:function(t){this[i]=t}}});function reqSerializer(t){let i=t.info||t.socket,d=Object.create(c);return d.id="function"==typeof t.id?t.id():t.id||(t.info?t.info.id:void 0),d.method=t.method,t.originalUrl?(d.url=t.originalUrl,d.query=t.query,d.params=t.params):d.url=t.path||(t.url?t.url.path||t.url:void 0),d.headers=t.headers,d.remoteAddress=i&&i.remoteAddress,d.remotePort=i&&i.remotePort,d.raw=t.raw||t,d}Object.defineProperty(c,i,{writable:!0,value:{}})},54908:t=>{"use strict";t.exports={mapHttpResponse:function(t){return{res:resSerializer(t)}},resSerializer};let i=Symbol("pino-raw-res-ref"),c=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[i]},set:function(t){this[i]=t}}});function resSerializer(t){let i=Object.create(c);return i.statusCode=t.statusCode,i.headers=t.getHeaders?t.getHeaders():t._headers,i.raw=t,i}Object.defineProperty(c,i,{writable:!0,value:{}})},17444:t=>{"use strict";function noOpPrepareStackTrace(t,i){return i}t.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=noOpPrepareStackTrace;let i=Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(i))return;let c=i.slice(2),d=[];for(let t of c)t&&d.push(t.getFileName());return d}},38398:(t,i,c)=>{"use strict";let d=c(95495)();t.exports=d;let _="PinoWarning";d.create(_,"PINODEP008","prettyPrint is deprecated, look at https://github.com/pinojs/pino-pretty for alternatives."),d.create(_,"PINODEP009","The use of pino.final is discouraged in Node.js v14+ and not required. It will be removed in the next major version")},30888:(t,i,c)=>{"use strict";let{lsCacheSym:d,levelValSym:_,useOnlyCustomLevelsSym:w,streamSym:S,formattersSym:P,hooksSym:R}=c(82818),{noop:C,genLog:T}=c(1223),A={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},$={fatal:t=>{let i=T(A.fatal,t);return function(...t){let c=this[S];if(i.call(this,...t),"function"==typeof c.flushSync)try{c.flushSync()}catch(t){}}},error:t=>T(A.error,t),warn:t=>T(A.warn,t),info:t=>T(A.info,t),debug:t=>T(A.debug,t),trace:t=>T(A.trace,t)},q=Object.keys(A).reduce((t,i)=>(t[A[i]]=i,t),{}),U=Object.keys(q).reduce((t,i)=>(t[i]='{"level":'+Number(i),t),{});t.exports={initialLsCache:U,genLsCache:function(t){let i=t[P].level,{labels:c}=t.levels,_={};for(let t in c){let d=i(c[t],Number(t));_[t]=JSON.stringify(d).slice(0,-1)}return t[d]=_,t},levelMethods:$,getLevel:function(t){let{levels:i,levelVal:c}=this;return i&&i.labels?i.labels[c]:""},setLevel:function(t){let{labels:i,values:c}=this.levels;if("number"==typeof t){if(void 0===i[t])throw Error("unknown level value"+t);t=i[t]}if(void 0===c[t])throw Error("unknown level "+t);let d=this[_],S=this[_]=c[t],P=this[w],A=this[R].logMethod;for(let t in c){if(S>c[t]){this[t]=C;continue}this[t]=!function(t,i){if(i)return!1;switch(t){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}(t,P)?T(c[t],A):$[t](A)}this.emit("level-change",t,S,i[d],d)},isLevelEnabled:function(t){let{values:i}=this.levels,c=i[t];return void 0!==c&&c>=this[_]},mappings:function(t=null,i=!1){let c=t?Object.keys(t).reduce((i,c)=>(i[t[c]]=c,i),{}):null,d=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),i?null:q,c),_=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),i?null:A,t);return{labels:d,values:_}},levels:A,assertNoLevelCollisions:function(t,i){let{labels:c,values:d}=t;for(let t in i){if(t in d)throw Error("levels cannot be overridden");if(i[t]in c)throw Error("pre-existing level values cannot be used for new levels")}},assertDefaultLevelFound:function(t,i,c){if("number"==typeof t){let d=[].concat(Object.keys(i||{}).map(t=>i[t]),c?[]:Object.keys(q).map(t=>+t),1/0);if(!d.includes(t))throw Error(`default level:${t} must be included in custom levels`);return}let d=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),c?null:A,i);if(!(t in d))throw Error(`default level:${t} must be included in custom levels`)}}},82522:(t,i,c)=>{"use strict";let{version:d}=c(19780);t.exports={version:d}},18382:(t,i,c)=>{"use strict";let d=Symbol.for("pino.metadata"),{levels:_}=c(30888),w=Object.create(_);w.silent=1/0;let S=_.info;function compareByLevel(t,i){return t.level-i.level}t.exports=function(t,i){let c=0;t=t||[];let _=w;(i=i||{dedupe:!1}).levels&&"object"==typeof i.levels&&(_=i.levels);let P={write,add,flushSync,end:function(){for(let{stream:t}of this.streams)"function"==typeof t.flushSync&&t.flushSync(),t.end()},minLevel:0,streams:[],clone:function clone(t){let i=Array(this.streams.length);for(let c=0;c<i.length;c++)i[c]={level:t,stream:this.streams[c].stream};return{write,add,minLevel:t,streams:i,clone,flushSync,[d]:!0}},[d]:!0};return Array.isArray(t)?t.forEach(add,P):add.call(P,t),t=null,P;function write(t){let c,_;let w=this.lastLevel,{streams:S}=this;for(let P=0;P<S.length;P++)if((c=S[P]).level<=w){if((_=c.stream)[d]){let{lastTime:t,lastMsg:i,lastObj:c,lastLogger:d}=this;_.lastLevel=w,_.lastTime=t,_.lastMsg=i,_.lastObj=c,_.lastLogger=d}i.dedupe&&c.level!==w||_.write(t)}else break}function flushSync(){for(let{stream:t}of this.streams)"function"==typeof t.flushSync&&t.flushSync()}function add(t){let i;if(!t)return P;let d="function"==typeof t.write||t.stream,w=t.write?t:t.stream;if(!d)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:R}=this;i="number"==typeof t.levelVal?t.levelVal:"string"==typeof t.level?_[t.level]:"number"==typeof t.level?t.level:S;let C={stream:w,level:i,levelVal:void 0,id:c++};return R.unshift(C),R.sort(compareByLevel),this.minLevel=R[0].level,P}}},75262:(t,i,c)=>{"use strict";let{EventEmitter:d}=c(82361),{lsCacheSym:_,levelValSym:w,setLevelSym:S,getLevelSym:P,chindingsSym:R,parsedChindingsSym:C,mixinSym:T,asJsonSym:A,writeSym:$,mixinMergeStrategySym:q,timeSym:U,timeSliceIndexSym:B,streamSym:F,serializersSym:J,formattersSym:X,useOnlyCustomLevelsSym:ee,needsMetadataGsym:et,redactFmtSym:es,stringifySym:eo,formatOptsSym:ec,stringifiersSym:el}=c(82818),{getLevel:eh,setLevel:ef,isLevelEnabled:ep,mappings:ed,initialLsCache:eg,genLsCache:ey,assertNoLevelCollisions:em}=c(30888),{asChindings:e_,asJson:eb,buildFormatters:ew,stringify:eE}=c(1223),{version:eS}=c(82522),eI=c(90570),eO={constructor:class{},child:function(t,i){if(!t)throw Error("missing bindings for child Pino");i=i||{};let c=this[J],d=this[X],_=Object.create(this);if(!0===i.hasOwnProperty("serializers")){for(let t in _[J]=Object.create(null),c)_[J][t]=c[t];let t=Object.getOwnPropertySymbols(c);for(var w=0;w<t.length;w++){let i=t[w];_[J][i]=c[i]}for(let t in i.serializers)_[J][t]=i.serializers[t];let d=Object.getOwnPropertySymbols(i.serializers);for(var P=0;P<d.length;P++){let t=d[P];_[J][t]=i.serializers[t]}}else _[J]=c;if(i.hasOwnProperty("formatters")){let{level:t,bindings:c,log:w}=i.formatters;_[X]=ew(t||d.level,c||resetChildingsFormatter,w||d.log)}else _[X]=ew(d.level,resetChildingsFormatter,d.log);if(!0===i.hasOwnProperty("customLevels")&&(em(this.levels,i.customLevels),_.levels=ed(i.customLevels,_[ee]),ey(_)),"object"==typeof i.redact&&null!==i.redact||Array.isArray(i.redact)){_.redact=i.redact;let t=eI(_.redact,eE),c={stringify:t[es]};_[eo]=eE,_[el]=t,_[ec]=c}_[R]=e_(_,t);let C=i.level||this.level;return _[S](C),_},bindings:function(){let t=this[R],i=`{${t.substr(1)}}`,c=JSON.parse(i);return delete c.pid,delete c.hostname,c},setBindings:function(t){let i=e_(this,t);this[R]=i,delete this[C]},flush:function(){let t=this[F];"flush"in t&&t.flush(noop)},isLevelEnabled:ep,version:eS,get level(){return this[P]()},set level(lvl){this[S](lvl)},get levelVal(){return this[w]},set levelVal(n){throw Error("levelVal is read-only")},[_]:eg,[$]:function(t,i,c){let d;let _=this[U](),w=this[T],S=this[q]||defaultMixinMergeStrategy;null==t?d={}:t instanceof Error?(d={err:t},void 0===i&&(i=t.message)):(d=t,void 0===i&&t.err&&(i=t.err.message)),w&&(d=S(d,w(d,c)));let P=this[A](d,i,c,_),R=this[F];!0===R[et]&&(R.lastLevel=c,R.lastObj=d,R.lastMsg=i,R.lastTime=_.slice(this[B]),R.lastLogger=this),R.write(P)},[A]:eb,[P]:eh,[S]:ef};Object.setPrototypeOf(eO,d.prototype),t.exports=function(){return Object.create(eO)};let resetChildingsFormatter=t=>t;function defaultMixinMergeStrategy(t,i){return Object.assign(i,t)}function noop(){}},90570:(t,i,c)=>{"use strict";let d=c(37994),{redactFmtSym:_,wildcardFirstSym:w}=c(82818),{rx:S,validator:P}=d,R=P({ERR_PATHS_MUST_BE_STRINGS:()=>"pino – redacted paths must be strings",ERR_INVALID_PATH:t=>`pino – redact paths array contains an invalid path (${t})`}),C="[Redacted]";t.exports=function(t,i){let{paths:c,censor:P}=function(t){if(Array.isArray(t))return R(t={paths:t,censor:C}),t;let{paths:i,censor:c=C,remove:d}=t;if(!1===Array.isArray(i))throw Error("pino – redact must contain an array of strings");return!0===d&&(c=void 0),R({paths:i,censor:c}),{paths:i,censor:c}}(t),T=c.reduce((t,i)=>{S.lastIndex=0;let c=S.exec(i),d=S.exec(i),_=void 0!==c[1]?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if("*"===_&&(_=w),null===d)return t[_]=null,t;if(null===t[_])return t;let{index:P}=d,R=`${i.substr(P,i.length-1)}`;return t[_]=t[_]||[],_!==w&&0===t[_].length&&t[_].push(...t[w]||[]),_===w&&Object.keys(t).forEach(function(i){t[i]&&t[i].push(R)}),t[_].push(R),t},{}),A={[_]:d({paths:c,censor:P,serialize:i,strict:!1})},topCensor=(...t)=>"function"==typeof P?i(P(...t)):i(P);return[...Object.keys(T),...Object.getOwnPropertySymbols(T)].reduce((t,c)=>{if(null===T[c])t[c]=t=>topCensor(t,[c]);else{let _="function"==typeof P?(t,i)=>P(t,[c,...i]):P;t[c]=d({paths:T[c],censor:_,serialize:i,strict:!1})}return t},A)}},82818:t=>{"use strict";let i=Symbol("pino.setLevel"),c=Symbol("pino.getLevel"),d=Symbol("pino.levelVal"),_=Symbol("pino.useLevelLabels"),w=Symbol("pino.useOnlyCustomLevels"),S=Symbol("pino.mixin"),P=Symbol("pino.lsCache"),R=Symbol("pino.chindings"),C=Symbol("pino.parsedChindings"),T=Symbol("pino.asJson"),A=Symbol("pino.write"),$=Symbol("pino.redactFmt"),q=Symbol("pino.time"),U=Symbol("pino.timeSliceIndex"),B=Symbol("pino.stream"),F=Symbol("pino.stringify"),J=Symbol("pino.stringifySafe"),X=Symbol("pino.stringifiers"),ee=Symbol("pino.end"),et=Symbol("pino.formatOpts"),es=Symbol("pino.messageKey"),eo=Symbol("pino.nestedKey"),ec=Symbol("pino.nestedKeyStr"),el=Symbol("pino.mixinMergeStrategy"),eh=Symbol("pino.wildcardFirst"),ef=Symbol.for("pino.serializers"),ep=Symbol.for("pino.formatters"),ed=Symbol.for("pino.hooks"),eg=Symbol.for("pino.metadata");t.exports={setLevelSym:i,getLevelSym:c,levelValSym:d,useLevelLabelsSym:_,mixinSym:S,lsCacheSym:P,chindingsSym:R,parsedChindingsSym:C,asJsonSym:T,writeSym:A,serializersSym:ef,redactFmtSym:$,timeSym:q,timeSliceIndexSym:U,streamSym:B,stringifySym:F,stringifySafeSym:J,stringifiersSym:X,endSym:ee,formatOptsSym:et,messageKeySym:es,nestedKeySym:eo,wildcardFirstSym:eh,needsMetadataGsym:eg,useOnlyCustomLevelsSym:w,formattersSym:ep,hooksSym:ed,nestedKeyStrSym:ec,mixinMergeStrategySym:el}},89411:t=>{"use strict";t.exports={nullTime:()=>"",epochTime:()=>`,"time":${Date.now()}`,unixTime:()=>`,"time":${Math.round(Date.now()/1e3)}`,isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`}},1223:(t,i,c)=>{"use strict";let d=c(24773),{mapHttpRequest:_,mapHttpResponse:w}=c(70480),S=c(99490),P=c(38398),{lsCacheSym:R,chindingsSym:C,parsedChindingsSym:T,writeSym:A,serializersSym:$,formatOptsSym:q,endSym:U,stringifiersSym:B,stringifySym:F,stringifySafeSym:J,wildcardFirstSym:X,needsMetadataGsym:ee,redactFmtSym:et,streamSym:es,nestedKeySym:eo,formattersSym:ec,messageKeySym:el,nestedKeyStrSym:eh}=c(82818),{isMainThread:ef}=c(71267),ep=c(4011);function noop(){}function asString(t){let i="",c=0,d=!1,_=255,w=t.length;if(w>100)return JSON.stringify(t);for(var S=0;S<w&&_>=32;S++)(34===(_=t.charCodeAt(S))||92===_)&&(i+=t.slice(c,S)+"\\",c=S,d=!0);return d?i+=t.slice(c):i=t,_<32?JSON.stringify(t):'"'+i+'"'}function getPrettyStream(t,i,d,_){if(i&&"function"==typeof i)return prettifierMetaWrapper((i=i.bind(_))(t),d,t);try{let i=c(14752).prettyFactory;return i.asMetaWrapper=prettifierMetaWrapper,prettifierMetaWrapper(i(t),d,t)}catch(t){if(t.message.startsWith("Cannot find module 'pino-pretty'"))throw Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately");throw t}}function prettifierMetaWrapper(t,i,c){c=Object.assign({suppressFlushSyncWarning:!1},c);let d=!1;return{[ee]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){c.suppressFlushSyncWarning||d||(d=!0,setMetadataProps(i,this),i.write(t(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let t=this.lastLogger,i=null;return t?(t.hasOwnProperty(T)?i=t[T]:(i=JSON.parse("{"+t[C].substr(1)+"}"),t[T]=i),i):null},write(c){let d=this.lastLogger,_=this.chindings(),w=this.lastTime;"number"==typeof w||(w=w.match(/^\d+/)?parseInt(w):w.slice(1,-1));let S=this.lastObj,P=this.lastMsg,R=d[ec],C=R.log?R.log(S):S,T=d[el];P&&C&&!Object.prototype.hasOwnProperty.call(C,T)&&(C[T]=P);let A=Object.assign({level:this.lastLevel,time:w},C,null),q=d[$],U=Object.keys(q);for(var F=0;F<U.length;F++){let t=U[F];void 0!==A[t]&&(A[t]=q[t](A[t]))}for(let t in _)A.hasOwnProperty(t)||(A[t]=_[t]);let J=d[B],X=J[et],ee=t("function"==typeof X?X(A):A);void 0!==ee&&(setMetadataProps(i,this),i.write(ee))}}}function buildSafeSonicBoom(t){let i=new S(t);return i.on("error",function filterBrokenPipe(t){if("EPIPE"===t.code){i.write=noop,i.end=noop,i.flushSync=noop,i.destroy=noop;return}i.removeListener("error",filterBrokenPipe),i.emit("error",t)}),!t.sync&&ef&&function(t){if(global.WeakRef&&global.WeakMap&&global.FinalizationRegistry){let i=c(22858);i.register(t,autoEnd),t.on("close",function(){i.unregister(t)})}}(i),i}function autoEnd(t,i){t.destroyed||("beforeExit"===i?(t.flush(),t.on("drain",function(){t.end()})):t.flushSync())}function setMetadataProps(t,i){!0===t[ee]&&(t.lastLevel=i.lastLevel,t.lastMsg=i.lastMsg,t.lastObj=i.lastObj,t.lastTime=i.lastTime,t.lastLogger=i.lastLogger)}t.exports={noop,buildSafeSonicBoom,getPrettyStream,asChindings:function(t,i){let c;let d=t[C],_=t[F],w=t[J],S=t[B],P=S[X],R=t[$],T=t[ec].bindings;for(let t in i=T(i)){c=i[t];let C="level"!==t&&"serializers"!==t&&"formatters"!==t&&"customLevels"!==t&&i.hasOwnProperty(t)&&void 0!==c;if(!0===C){if(c=R[t]?R[t](c):c,void 0===(c=(S[t]||P||_)(c,w)))continue;d+=',"'+t+'":'+c}}return d},asJson:function(t,i,c,d){let _;let w=this[F],S=this[J],P=this[B],T=this[U],A=this[C],q=this[$],ee=this[ec],et=this[el],es=this[R][c]+d;es+=A,ee.log&&(t=ee.log(t));let ef=P[X],ep="";for(let i in t)if(_=t[i],Object.prototype.hasOwnProperty.call(t,i)&&void 0!==_){_=q[i]?q[i](_):_;let t=P[i]||ef;switch(typeof _){case"undefined":case"function":continue;case"number":!1===Number.isFinite(_)&&(_=null);case"boolean":t&&(_=t(_));break;case"string":_=(t||asString)(_);break;default:_=(t||w)(_,S)}if(void 0===_)continue;ep+=',"'+i+'":'+_}let ed="";if(void 0!==i){_=q[et]?q[et](i):i;let t=P[et]||ef;switch(typeof _){case"function":break;case"number":!1===Number.isFinite(_)&&(_=null);case"boolean":t&&(_=t(_)),ed=',"'+et+'":'+_;break;case"string":ed=',"'+et+'":'+(_=(t||asString)(_));break;default:ed=',"'+et+'":'+(_=(t||w)(_,S))}}return this[eo]&&ep?es+this[eh]+ep.slice(1)+"}"+ed+T:es+ep+ed+T},genLog:function(t,i){if(!i)return LOG;return function(...c){i.call(this,c,LOG,t)};function LOG(i,...c){if("object"==typeof i){let S,P=i;null!==i&&(i.method&&i.headers&&i.socket?i=_(i):"function"==typeof i.setHeader&&(i=w(i))),null===P&&0===c.length?S=[null]:(P=c.shift(),S=c),this[A](i,d(P,S,this[q]),t)}else this[A](null,d(i,c,this[q]),t)}},createArgsNormalizer:function(t){return function(i,c,d={},_){var w;if("string"==typeof d)_=buildSafeSonicBoom({dest:d,sync:!0}),d={};else if("string"==typeof _){if(d&&d.transport)throw Error("only one of option.transport or stream can be specified");_=buildSafeSonicBoom({dest:_,sync:!0})}else if(d instanceof S||d.writable||d._writableState)_=d,d={};else if(d.transport){let t;if(d.transport instanceof S||d.transport.writable||d.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(d.transport.targets&&d.transport.targets.length&&d.formatters&&"function"==typeof d.formatters.level)throw Error("option.transport.targets do not allow custom level formatters");d.customLevels&&(t=d.useOnlyCustomLevels?d.customLevels:Object.assign({},d.levels,d.customLevels)),_=ep({caller:c,...d.transport,levels:t})}if((d=Object.assign({},t,d)).serializers=Object.assign({},t.serializers,d.serializers),d.formatters=Object.assign({},t.formatters,d.formatters),"onTerminated"in d)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in d&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),d.levelKey=d.changeLevelName,delete d.changeLevelName);let{enabled:R,prettyPrint:C,prettifier:T,messageKey:A}=d;if(!1===R&&(d.level="silent"),(_=_||process.stdout)===process.stdout&&_.fd>=0&&!((w=_).write!==w.constructor.prototype.write)&&(_=buildSafeSonicBoom({fd:_.fd,sync:!0})),C){P.emit("PINODEP008");let t=Object.assign({messageKey:A},C);_=getPrettyStream(t,T,_,i)}return{opts:d,stream:_}}},final:function(t,i){let c=Number(process.versions.node.split(".")[0]);if(c>=14&&P.emit("PINODEP009"),void 0===t||"function"!=typeof t.child)throw Error("expected a pino logger instance");let d=void 0!==i;if(d&&"function"!=typeof i)throw Error("if supplied, the handler parameter should be a function");let _=t[es];if("function"!=typeof _.flushSync)throw Error("final requires a stream that has a flushSync method, such as pino.destination");let w=new Proxy(t,{get:(t,i)=>i in t.levels.values?(...c)=>{t[i](...c),_.flushSync()}:t[i]});if(!d){try{_.flushSync()}catch{}return w}return(t=null,...c)=>{try{_.flushSync()}catch(t){}return i(t,w,...c)}},stringify:function(t,i){try{return JSON.stringify(t)}catch(c){try{let c=i||this[J];return c(t)}catch(t){return'"[unable to serialize, circular reference is too complex to analyze]"'}}},buildFormatters:function(t,i,c){return{level:t,bindings:i,log:c}},normalizeDestFileDescriptor:function(t){let i=Number(t);return"string"==typeof t&&Number.isFinite(i)?i:t}}},4011:(t,i,c)=>{"use strict";let d;let{createRequire:_}=c(98188),w=c(17444),{join:S,isAbsolute:P}=c(71017),R=c(34338);global.WeakRef&&global.WeakMap&&global.FinalizationRegistry&&(d=c(22858));let C=c(71944);function autoEnd(t){t.ref(),t.flushSync(),t.end(),t.once("close",function(){t.unref()})}t.exports=function(t){let{pipeline:i,targets:c,levels:T,options:A={},worker:$={},caller:q=w()}=t,U="string"==typeof q?[q]:q,B="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},F=t.target;if(F&&c)throw Error("only one of target or targets can be specified");return c?(F=B["pino-worker"]||S(__dirname,"worker.js"),A.targets=c.map(t=>({...t,target:fixTarget(t.target)}))):i&&(F=B["pino-pipeline-worker"]||S(__dirname,"worker-pipeline.js"),A.targets=i.map(t=>({...t,target:fixTarget(t.target)}))),T&&(A.levels=T),function(t,i,c){let _=new C({filename:t,workerData:i,workerOpts:c});function onExit(){_.closed||(_.flushSync(),R(100),_.end())}return _.on("ready",function(){process.removeListener("exit",onExit),_.unref(),!1!==c.autoEnd&&function(t){if(d)d.register(t,autoEnd),t.on("close",function(){d.unregister(t)});else{let i=autoEnd.bind(null,t);process.once("beforeExit",i),process.once("exit",i),t.on("close",function(){process.removeListener("beforeExit",i),process.removeListener("exit",i)})}}(_)}),_.on("close",function(){process.removeListener("exit",onExit)}),process.on("exit",onExit),_}(fixTarget(F),A,$);function fixTarget(t){let i;if(P(t=B[t]||t)||0===t.indexOf("file://"))return t;if("pino/file"===t)return S(__dirname,"..","file.js");for(let c of U)try{i=_(c).resolve(t);break}catch(t){continue}if(!i)throw Error(`unable to determine transport target for "${t}"`);return i}}},55312:(t,i,c)=>{"use strict";let d=c(22037),_=c(70480),w=c(17444),S=c(90570),P=c(89411),R=c(75262),C=c(82818),{configure:T}=c(66354),{assertDefaultLevelFound:A,mappings:$,genLsCache:q,levels:U}=c(30888),{createArgsNormalizer:B,asChindings:F,final:J,buildSafeSonicBoom:X,buildFormatters:ee,stringify:et,normalizeDestFileDescriptor:es,noop:eo}=c(1223),{version:ec}=c(82522),{chindingsSym:el,redactFmtSym:eh,serializersSym:ef,timeSym:ep,timeSliceIndexSym:ed,streamSym:eg,stringifySym:ey,stringifySafeSym:em,stringifiersSym:e_,setLevelSym:eb,endSym:ew,formatOptsSym:eE,messageKeySym:eS,nestedKeySym:eI,mixinSym:eO,useOnlyCustomLevelsSym:eP,formattersSym:ex,hooksSym:eR,nestedKeyStrSym:eC,mixinMergeStrategySym:eT}=C,{epochTime:eN,nullTime:ek}=P,{pid:eA}=process,eL=d.hostname(),ej=_.err,eD={level:"info",levels:U,messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:eA,hostname:eL},serializers:Object.assign(Object.create(null),{err:ej}),formatters:Object.assign(Object.create(null),{bindings:t=>t,level:(t,i)=>({level:i})}),hooks:{logMethod:void 0},timestamp:eN,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},eM=B(eD),e$=Object.assign(Object.create(null),_);function pino(...t){let i={},{opts:c,stream:d}=eM(i,w(),...t),{redact:_,crlf:P,serializers:C,timestamp:U,messageKey:B,nestedKey:J,base:X,name:es,level:ec,customLevels:eA,mixin:eL,mixinMergeStrategy:ej,useOnlyCustomLevels:eD,formatters:e$,hooks:ez,depthLimit:eU,edgeLimit:eH}=c,eB=T({maximumDepth:eU,maximumBreadth:eH}),eW=ee(e$.level,e$.bindings,e$.log),eV=_?S(_,et):{},eK=et.bind({[em]:eB}),eG=_?{stringify:eV[eh]}:{stringify:eK},eF=F.bind(null,{[el]:"",[ef]:C,[e_]:eV,[ey]:et,[em]:eB,[ex]:eW}),eJ="";null!==X&&(eJ=eF(void 0===es?X:Object.assign({},X,{name:es})));let eY=U instanceof Function?U:U?eN:ek,eZ=eY().indexOf(":")+1;if(eD&&!eA)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(eL&&"function"!=typeof eL)throw Error(`Unknown mixin type "${typeof eL}" - expected "function"`);A(ec,eA,eD);let eQ=$(eA,eD);return Object.assign(i,{levels:eQ,[eP]:eD,[eg]:d,[ep]:eY,[ed]:eZ,[ey]:et,[em]:eB,[e_]:eV,[ew]:"}"+(P?"\r\n":"\n"),[eE]:eG,[eS]:B,[eI]:J,[eC]:J?`,${JSON.stringify(J)}:{`:"",[ef]:C,[eO]:eL,[eT]:ej,[el]:eJ,[ex]:eW,[eR]:ez,silent:eo}),Object.setPrototypeOf(i,R()),q(i),i[eb](ec),i}t.exports=pino,t.exports.destination=(t=process.stdout.fd)=>"object"==typeof t?(t.dest=es(t.dest||process.stdout.fd),X(t)):X({dest:es(t),minLength:0,sync:!0}),t.exports.transport=c(4011),t.exports.multistream=c(18382),t.exports.final=J,t.exports.levels=$(),t.exports.stdSerializers=e$,t.exports.stdTimeFunctions=Object.assign({},P),t.exports.symbols=C,t.exports.version=ec,t.exports.default=pino,t.exports.pino=pino},99490:(t,i,c)=>{"use strict";let d=c(57147),_=c(82361),w=c(73837).inherits,S=c(71017),P=c(34338);function openFile(t,i){function fileOpened(c,d){if(c){i._reopening=!1,i._writing=!1,i._opening=!1,i.sync?process.nextTick(()=>{i.listenerCount("error")>0&&i.emit("error",c)}):i.emit("error",c);return}i.fd=d,i.file=t,i._reopening=!1,i._opening=!1,i._writing=!1,i.sync?process.nextTick(()=>i.emit("ready")):i.emit("ready"),!i._reopening&&(i._writing||!(i._len>i.minLength)||i.destroyed||actualWrite(i))}i._opening=!0,i._writing=!0,i._asyncDrainScheduled=!1;let c=i.append?"a":"w",_=i.mode;if(i.sync)try{i.mkdir&&d.mkdirSync(S.dirname(t),{recursive:!0});let w=d.openSync(t,c,_);fileOpened(null,w)}catch(t){throw fileOpened(t),t}else i.mkdir?d.mkdir(S.dirname(t),{recursive:!0},i=>{if(i)return fileOpened(i);d.open(t,c,_,fileOpened)}):d.open(t,c,_,fileOpened)}function SonicBoom(t){if(!(this instanceof SonicBoom))return new SonicBoom(t);let{fd:i,dest:c,minLength:_,maxLength:w,maxWrite:S,sync:R,append:C=!0,mode:T,mkdir:A,retryEAGAIN:$}=t||{};if(i=i||c,this._bufs=[],this._len=0,this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._hwm=Math.max(_||0,16387),this.file=null,this.destroyed=!1,this.minLength=_||0,this.maxLength=w||0,this.maxWrite=S||16384,this.sync=R||!1,this.append=C||!1,this.mode=T,this.retryEAGAIN=$||(()=>!0),this.mkdir=A||!1,"number"==typeof i)this.fd=i,process.nextTick(()=>this.emit("ready"));else if("string"==typeof i)openFile(i,this);else throw Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(t,i)=>{if(t){if("EAGAIN"===t.code&&this.retryEAGAIN(t,this._writingBuf.length,this._len-this._writingBuf.length)){if(this.sync)try{P(100),this.release(void 0,0)}catch(t){this.release(t)}else setTimeout(()=>{d.write(this.fd,this._writingBuf,"utf8",this.release)},100)}else this._writing=!1,this.emit("error",t);return}if(this.emit("write",i),this._len-=i,this._writingBuf=this._writingBuf.slice(i),this._writingBuf.length){if(!this.sync){d.write(this.fd,this._writingBuf,"utf8",this.release);return}try{do{let t=d.writeSync(this.fd,this._writingBuf,"utf8");this._len-=t,this._writingBuf=this._writingBuf.slice(t)}while(this._writingBuf)}catch(t){this.release(t);return}}let c=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):c>this.minLength?actualWrite(this):this._ending?c>0?actualWrite(this):(this._writing=!1,actualClose(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(emitDrain,this)):this.emit("drain"))},this.on("newListener",function(t){"drain"===t&&(this._asyncDrainScheduled=!1)})}function emitDrain(t){let i=t.listenerCount("drain")>0;i&&(t._asyncDrainScheduled=!1,t.emit("drain"))}function actualWrite(t){let i=t.release;if(t._writing=!0,t._writingBuf=t._writingBuf||t._bufs.shift()||"",t.sync)try{let c=d.writeSync(t.fd,t._writingBuf,"utf8");i(null,c)}catch(t){i(t)}else d.write(t.fd,t._writingBuf,"utf8",i)}function actualClose(t){if(-1===t.fd){t.once("ready",actualClose.bind(null,t));return}function done(i){if(i){t.emit("error",i);return}t._ending&&!t._writing&&t.emit("finish"),t.emit("close")}t.destroyed=!0,t._bufs=[],1!==t.fd&&2!==t.fd?d.close(t.fd,done):setImmediate(done)}w(SonicBoom,_),SonicBoom.prototype.write=function(t){if(this.destroyed)throw Error("SonicBoom destroyed");let i=this._len+t.length,c=this._bufs;return this.maxLength&&i>this.maxLength?this.emit("drop",t):(0===c.length||c[c.length-1].length+t.length>this.maxWrite?c.push(""+t):c[c.length-1]+=t,this._len=i,!this._writing&&this._len>=this.minLength&&actualWrite(this)),this._len<this._hwm},SonicBoom.prototype.flush=function(){if(this.destroyed)throw Error("SonicBoom destroyed");this._writing||this.minLength<=0||(0===this._bufs.length&&this._bufs.push(""),actualWrite(this))},SonicBoom.prototype.reopen=function(t){if(this.destroyed)throw Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(t)});return}if(this._ending)return;if(!this.file)throw Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let i=this.fd;this.once("ready",()=>{i!==this.fd&&d.close(i,t=>{if(t)return this.emit("error",t)})}),openFile(t||this.file,this)},SonicBoom.prototype.end=function(){if(this.destroyed)throw Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}!this._ending&&(this._ending=!0,this._writing||(this._len>0&&this.fd>=0?actualWrite(this):actualClose(this)))},SonicBoom.prototype.flushSync=function(){if(this.destroyed)throw Error("SonicBoom destroyed");if(this.fd<0)throw Error("sonic boom is not ready yet");for(!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");this._bufs.length;){let t=this._bufs[0];try{this._len-=d.writeSync(this.fd,t,"utf8"),this._bufs.shift()}catch(i){if("EAGAIN"!==i.code||!this.retryEAGAIN(i,t.length,this._len-t.length))throw i;P(100)}}},SonicBoom.prototype.destroy=function(){this.destroyed||actualClose(this)},SonicBoom.SonicBoom=SonicBoom,SonicBoom.default=SonicBoom,t.exports=SonicBoom},21143:(t,i,c)=>{"use strict";let d=c(12891),_=c(9930),w=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(d),memory=()=>{let t=new Map;return{name:"memory",options:{},hasItem:i=>t.has(i),getItem:i=>t.get(i)??null,getItemRaw:i=>t.get(i)??null,setItem(i,c){t.set(i,c)},setItemRaw(i,c){t.set(i,c)},removeItem(i){t.delete(i)},getKeys:()=>Array.from(t.keys()),clear(){t.clear()},dispose(){t.clear()}}};async function snapshot(t,i){i=_.normalizeBaseKey(i);let c=await t.getKeys(i),d={};return await Promise.all(c.map(async c=>{d[c.slice(i.length)]=await t.getItem(c)})),d}async function restoreSnapshot(t,i,c=""){c=_.normalizeBaseKey(c),await Promise.all(Object.entries(i).map(i=>t.setItem(c+i[0],i[1])))}function watch(t,i,c){return t.watch?t.watch((t,d)=>i(t,c+d)):()=>{}}async function dispose(t){"function"==typeof t.dispose&&await _.asyncCall(t.dispose)}i.joinKeys=_.joinKeys,i.normalizeBaseKey=_.normalizeBaseKey,i.normalizeKey=_.normalizeKey,i.prefixStorage=_.prefixStorage,i.builtinDrivers={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"},i.createStorage=function(t={}){let i={mounts:{"":t.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=t=>{for(let c of i.mountpoints)if(t.startsWith(c))return{base:c,relativeKey:t.slice(c.length),driver:i.mounts[c]};return{base:"",relativeKey:t,driver:i.mounts[""]}},getMounts=(t,c)=>i.mountpoints.filter(i=>i.startsWith(t)||c&&t.startsWith(i)).map(c=>({relativeBase:t.length>c.length?t.slice(c.length):void 0,mountpoint:c,driver:i.mounts[c]})),onChange=(t,c)=>{if(i.watching)for(let d of(c=_.normalizeKey(c),i.watchListeners))d(t,c)},startWatch=async()=>{if(!i.watching)for(let t in i.watching=!0,i.mounts)i.unwatch[t]=await watch(i.mounts[t],onChange,t)},stopWatch=async()=>{if(i.watching){for(let t in i.unwatch)await i.unwatch[t]();i.unwatch={},i.watching=!1}},runBatch=(t,i,c)=>{let d=new Map,getBatch=t=>{let i=d.get(t.base);return i||(i={driver:t.driver,base:t.base,items:[]},d.set(t.base,i)),i};for(let c of t){let t="string"==typeof c,d=_.normalizeKey(t?c:c.key),w=t?void 0:c.value,S=t||!c.options?i:{...i,...c.options},P=getMount(d);getBatch(P).items.push({key:d,value:w,relativeKey:P.relativeKey,options:S})}return Promise.all([...d.values()].map(t=>c(t))).then(t=>t.flat())},c={hasItem(t,i={}){t=_.normalizeKey(t);let{relativeKey:c,driver:d}=getMount(t);return _.asyncCall(d.hasItem,c,i)},getItem(t,i={}){t=_.normalizeKey(t);let{relativeKey:c,driver:d}=getMount(t);return _.asyncCall(d.getItem,c,i).then(t=>w(t))},getItems:(t,i)=>runBatch(t,i,t=>t.driver.getItems?_.asyncCall(t.driver.getItems,t.items.map(t=>({key:t.relativeKey,options:t.options})),i).then(i=>i.map(i=>({key:_.joinKeys(t.base,i.key),value:w(i.value)}))):Promise.all(t.items.map(i=>_.asyncCall(t.driver.getItem,i.relativeKey,i.options).then(t=>({key:i.key,value:w(t)}))))),getItemRaw(t,i={}){t=_.normalizeKey(t);let{relativeKey:c,driver:d}=getMount(t);return d.getItemRaw?_.asyncCall(d.getItemRaw,c,i):_.asyncCall(d.getItem,c,i).then(t=>_.deserializeRaw(t))},async setItem(t,i,d={}){if(void 0===i)return c.removeItem(t);t=_.normalizeKey(t);let{relativeKey:w,driver:S}=getMount(t);S.setItem&&(await _.asyncCall(S.setItem,w,_.stringify(i),d),S.watch||onChange("update",t))},async setItems(t,i){await runBatch(t,i,async t=>{t.driver.setItems&&await _.asyncCall(t.driver.setItems,t.items.map(t=>({key:t.relativeKey,value:_.stringify(t.value),options:t.options})),i),t.driver.setItem&&await Promise.all(t.items.map(i=>_.asyncCall(t.driver.setItem,i.relativeKey,_.stringify(i.value),i.options)))})},async setItemRaw(t,i,d={}){if(void 0===i)return c.removeItem(t,d);t=_.normalizeKey(t);let{relativeKey:w,driver:S}=getMount(t);if(S.setItemRaw)await _.asyncCall(S.setItemRaw,w,i,d);else{if(!S.setItem)return;await _.asyncCall(S.setItem,w,_.serializeRaw(i),d)}S.watch||onChange("update",t)},async removeItem(t,i={}){"boolean"==typeof i&&(i={removeMeta:i}),t=_.normalizeKey(t);let{relativeKey:c,driver:d}=getMount(t);d.removeItem&&(await _.asyncCall(d.removeItem,c,i),(i.removeMeta||i.removeMata)&&await _.asyncCall(d.removeItem,c+"$",i),d.watch||onChange("remove",t))},async getMeta(t,i={}){"boolean"==typeof i&&(i={nativeOnly:i}),t=_.normalizeKey(t);let{relativeKey:c,driver:d}=getMount(t),S=Object.create(null);if(d.getMeta&&Object.assign(S,await _.asyncCall(d.getMeta,c,i)),!i.nativeOnly){let t=await _.asyncCall(d.getItem,c+"$",i).then(t=>w(t));t&&"object"==typeof t&&("string"==typeof t.atime&&(t.atime=new Date(t.atime)),"string"==typeof t.mtime&&(t.mtime=new Date(t.mtime)),Object.assign(S,t))}return S},setMeta(t,i,c={}){return this.setItem(t+"$",i,c)},removeMeta(t,i={}){return this.removeItem(t+"$",i)},async getKeys(t,i={}){t=_.normalizeBaseKey(t);let c=getMounts(t,!0),d=[],w=[];for(let t of c){let c=await _.asyncCall(t.driver.getKeys,t.relativeBase,i),S=c.map(i=>t.mountpoint+_.normalizeKey(i)).filter(t=>!d.some(i=>t.startsWith(i)));w.push(...S),d=[t.mountpoint,...d.filter(i=>!i.startsWith(t.mountpoint))]}return t?w.filter(i=>i.startsWith(t)&&!i.endsWith("$")):w.filter(t=>!t.endsWith("$"))},async clear(t,i={}){t=_.normalizeBaseKey(t),await Promise.all(getMounts(t,!1).map(async t=>{if(t.driver.clear)return _.asyncCall(t.driver.clear,t.relativeBase,i);if(t.driver.removeItem){let c=await t.driver.getKeys(t.relativeBase||"",i);return Promise.all(c.map(c=>t.driver.removeItem(c,i)))}}))},async dispose(){await Promise.all(Object.values(i.mounts).map(t=>dispose(t)))},watch:async t=>(await startWatch(),i.watchListeners.push(t),async()=>{i.watchListeners=i.watchListeners.filter(i=>i!==t),0===i.watchListeners.length&&await stopWatch()}),async unwatch(){i.watchListeners=[],await stopWatch()},mount(t,d){if((t=_.normalizeBaseKey(t))&&i.mounts[t])throw Error(`already mounted at ${t}`);return t&&(i.mountpoints.push(t),i.mountpoints.sort((t,i)=>i.length-t.length)),i.mounts[t]=d,i.watching&&Promise.resolve(watch(d,onChange,t)).then(c=>{i.unwatch[t]=c}).catch(console.error),c},async unmount(t,c=!0){(t=_.normalizeBaseKey(t))&&i.mounts[t]&&(i.watching&&t in i.unwatch&&(i.unwatch[t](),delete i.unwatch[t]),c&&await dispose(i.mounts[t]),i.mountpoints=i.mountpoints.filter(i=>i!==t),delete i.mounts[t])},getMount(t=""){t=_.normalizeKey(t)+":";let i=getMount(t);return{driver:i.driver,base:i.base}},getMounts(t="",i={}){t=_.normalizeKey(t);let c=getMounts(t,i.parents);return c.map(t=>({driver:t.driver,base:t.mountpoint}))}};return c},i.defineDriver=function(t){return t},i.restoreSnapshot=restoreSnapshot,i.snapshot=snapshot},9930:(t,i)=>{"use strict";let c="base64:",d=["hasItem","getItem","getItemRaw","setItem","setItemRaw","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function normalizeBaseKey(t){return(t=normalizeKey(t))?t+":":""}i.asyncCall=function(t,...i){try{var c;return(c=t(...i))&&"function"==typeof c.then?c:Promise.resolve(c)}catch(t){return Promise.reject(t)}},i.deserializeRaw=function(t){return"string"==typeof t&&t.startsWith(c)?Buffer.from(t.slice(c.length),"base64"):t},i.joinKeys=function(...t){return normalizeKey(t.join(":"))},i.normalizeBaseKey=normalizeBaseKey,i.normalizeKey=normalizeKey,i.prefixStorage=function(t,i){if(!(i=normalizeBaseKey(i)))return t;let c={...t};for(let _ of d)c[_]=(c="",...d)=>t[_](i+c,...d);return c.getKeys=(c="",...d)=>t.getKeys(i+c,...d).then(t=>t.map(t=>t.slice(i.length))),c},i.serializeRaw=function(t){if("string"==typeof t)return t;let i=Buffer.from(t).toString("base64");return c+i},i.stringify=function stringify(t){if(function(t){let i=typeof t;return null===t||"object"!==i&&"function"!==i}(t))return String(t);if(function(t){let i=Object.getPrototypeOf(t);return!i||i.isPrototypeOf(Object)}(t)||Array.isArray(t))return JSON.stringify(t);if("function"==typeof t.toJSON)return stringify(t.toJSON());throw Error("[unstorage] Cannot stringify value!")}},40870:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=c(57147),_=c(71017),w=c(95934),S=c(78592);let P=/\.\.\:|\.\.$/,R="fs-lite";t.exports=(0,w.defineDriver)((t={})=>{if(!t.base)throw(0,w.createRequiredError)(R,"base");t.base=(0,_.resolve)(t.base);let r=i=>{if(P.test(i))throw(0,w.createError)(R,`Invalid key: ${JSON.stringify(i)}. It should not contain .. segments`);let c=(0,_.join)(t.base,i.replace(/:/g,"/"));return c};return{name:R,options:t,hasItem:t=>(0,d.existsSync)(r(t)),getItem:t=>(0,S.readFile)(r(t),"utf8"),getItemRaw:t=>(0,S.readFile)(r(t)),async getMeta(t){let{atime:i,mtime:c,size:_,birthtime:w,ctime:S}=await d.promises.stat(r(t)).catch(()=>({}));return{atime:i,mtime:c,size:_,birthtime:w,ctime:S}},setItem(i,c){if(!t.readOnly)return(0,S.writeFile)(r(i),c,"utf8")},setItemRaw(i,c){if(!t.readOnly)return(0,S.writeFile)(r(i),c)},removeItem(i){if(!t.readOnly)return(0,S.unlink)(r(i))},getKeys:()=>(0,S.readdirRecursive)(r("."),t.ignore),async clear(){t.readOnly||t.noClear||await (0,S.rmRecursive)(r("."))}}})},95934:(t,i)=>{"use strict";function normalizeKey(t){return t?t.replace(/[/\\]/g,":").replace(/^:|:$/g,""):""}function createError(t,i,c){let d=Error(`[unstorage] [${t}] ${i}`,c);return d}Object.defineProperty(i,"__esModule",{value:!0}),i.createError=createError,i.createRequiredError=function(t,i){return Array.isArray(i)?createError(t,`Missing some of the required options ${i.map(t=>"`"+t+"`").join(", ")}`):createError(t,`Missing required option \`${i}\`.`)},i.defineDriver=function(t){return t},i.joinKeys=function(...t){return t.map(normalizeKey).filter(Boolean).join(":")},i.normalizeKey=normalizeKey},78592:(t,i,c)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ensuredir=ensuredir,i.readFile=function(t,i){return d.promises.readFile(t,i).catch(ignoreNotfound)},i.readdir=readdir,i.readdirRecursive=readdirRecursive,i.rmRecursive=rmRecursive,i.stat=function(t){return d.promises.stat(t).catch(ignoreNotfound)},i.unlink=function(t){return d.promises.unlink(t).catch(ignoreNotfound)},i.writeFile=writeFile;var d=c(57147),_=c(71017);function ignoreNotfound(t){return"ENOENT"===t.code||"EISDIR"===t.code?null:t}function ignoreExists(t){return"EEXIST"===t.code?null:t}async function writeFile(t,i,c){return await ensuredir((0,_.dirname)(t)),d.promises.writeFile(t,i,c)}function readdir(t){return d.promises.readdir(t,{withFileTypes:!0}).catch(ignoreNotfound).then(t=>t||[])}async function ensuredir(t){(0,d.existsSync)(t)||(await ensuredir((0,_.dirname)(t)).catch(ignoreExists),await d.promises.mkdir(t).catch(ignoreExists))}async function readdirRecursive(t,i){if(i&&i(t))return[];let c=await readdir(t),d=[];return await Promise.all(c.map(async c=>{let w=(0,_.resolve)(t,c.name);if(c.isDirectory()){let t=await readdirRecursive(w,i);d.push(...t.map(t=>c.name+"/"+t))}else i&&i(c.name)||d.push(c.name)})),d}async function rmRecursive(t){let i=await readdir(t);await Promise.all(i.map(i=>{let c=(0,_.resolve)(t,i.name);return i.isDirectory()?rmRecursive(c).then(()=>d.promises.rmdir(c)):d.promises.unlink(c)}))}},19780:t=>{"use strict";t.exports=JSON.parse('{"name":"pino","version":"7.11.0","description":"super fast, all natural json logger","main":"pino.js","type":"commonjs","types":"pino.d.ts","browser":"./browser.js","files":["pino.js","file.js","pino.d.ts","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],"scripts":{"docs":"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js","lint":"eslint .","test":"npm run lint && npm run transpile && tap --ts && jest test/jest && npm run test-types","test-ci":"npm run lint && npm run transpile && tap --ts --no-check-coverage --coverage-report=lcovonly && npm run test-types","test-ci-pnpm":"pnpm run lint && npm run transpile && tap --ts --no-coverage --no-check-coverage && pnpm run test-types","test-ci-yarn-pnp":"yarn run lint && npm run transpile && tap --ts --no-check-coverage --coverage-report=lcovonly","test-types":"tsc && tsd && ts-node test/types/pino.ts","transpile":"node ./test/fixtures/ts/transpile.cjs","cov-ui":"tap --ts --coverage-report=html","bench":"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},"bin":{"pino":"./bin.js"},"precommit":"test","repository":{"type":"git","url":"git+https://github.com/pinojs/pino.git"},"keywords":["fast","logger","stream","json"],"author":"Matteo Collina <hello@matteocollina.com>","contributors":["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],"license":"MIT","bugs":{"url":"https://github.com/pinojs/pino/issues"},"homepage":"http://getpino.io","devDependencies":{"@types/flush-write-stream":"^1.0.0","@types/node":"^17.0.0","@types/tap":"^15.0.6","airtap":"4.0.4","benchmark":"^2.1.4","bole":"^4.0.0","bunyan":"^1.8.14","docsify-cli":"^4.4.1","eslint":"^7.17.0","eslint-config-standard":"^16.0.3","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^5.1.0","execa":"^5.0.0","fastbench":"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1","jest":"^27.3.1","log":"^6.0.0","loglevel":"^1.6.7","pino-pretty":"^v7.6.0","pre-commit":"^1.2.2","proxyquire":"^2.1.3","pump":"^3.0.0","rimraf":"^3.0.2","semver":"^7.0.0","split2":"^4.0.0","steed":"^1.1.3","strip-ansi":"^6.0.0","tap":"^16.0.0","tape":"^5.0.0","through2":"^4.0.0","ts-node":"^10.7.0","tsd":"^0.20.0","typescript":"^4.4.4","winston":"^3.3.3"},"dependencies":{"atomic-sleep":"^1.0.0","fast-redact":"^3.0.0","on-exit-leak-free":"^0.2.0","pino-abstract-transport":"v0.5.0","pino-std-serializers":"^4.0.0","process-warning":"^1.0.0","quick-format-unescaped":"^4.0.3","real-require":"^0.1.0","safe-stable-stringify":"^2.1.0","sonic-boom":"^2.2.1","thread-stream":"^0.15.1"},"tsd":{"directory":"test/types"}}')}};